{"code":"(this[\"webpackJsonpsongsearch-client\"]=this[\"webpackJsonpsongsearch-client\"]||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){\"use strict\";n.r(t);var s=n(1),a=n.n(s),r=n(26),c=n.n(r),o=n(3),i=n(5),l=n(4),u=n(6),m=n(7),h=n(9),d=n(8),j=n(10),b=n(22),p=n(30),g=n.n(p),f={},x=function(e,t){var n=f[e];if(void 0!==n)try{var s=new window.Response(new Blob([n]));return Promise.resolve(s)}catch(a){console.log(\"Unable to create new window.Response\",a)}return fetch(e,t).then((function(t){if(200===t.status){var n=t.headers.get(\"Content-Type\");n&&(n.match(/application\\/json/i)||n.match(/text\\//i))&&t.clone().text().then((function(t){f[e]=t}))}return t}))},O=(n(40),n(0));n.p,n.p;n.p,n.p;var v=n(12),S=n.n(v),y=n(16),w=n(31),C=n.n(w),N=n(20),_=n(21),k=\"undefined\"===typeof document,E={title:\"Song Search - Find Songs by Lyrics\",image:k?null:document.querySelector('meta[itemprop=\"image\"]').content},A=function(e){var t=e.title,n=e.image,s=void 0===n?null:n;if(k)console.warn(\"SetHTMLHeaders should not be called in server mode\");else{t!==document.title&&(document.title=t);var a=document.querySelector('meta[property=\"og:title\"]');a.content!==t&&(a.content=t);var r=document.querySelector('meta[itemprop=\"name\"]');r!==t&&(r.content=t);var c=document.querySelector('meta[itemprop=\"image\"]');c.content!==s&&(c.content=s)}},I=function(){A(E)},T=function(e){var t=e.text;return Object(O.jsxs)(\"div\",{className:\"loading\",title:t,children:[Object(O.jsxs)(\"div\",{className:\"cssload-wrapper\",children:[Object(O.jsx)(\"div\",{className:\"cssload-square\"}),Object(O.jsx)(\"div\",{className:\"cssload-square\"}),Object(O.jsx)(\"div\",{className:\"cssload-square\"}),Object(O.jsx)(\"div\",{className:\"cssload-square\"}),Object(O.jsx)(\"div\",{className:\"cssload-square\"})]}),Object(O.jsx)(\"p\",{children:t})]})};function R(e){return e.value.toLocaleString()}function L(e){var t=e.song,n=Object(s.useState)(null),a=Object(i.a)(n,2),r=a[0],c=a[1],o=Object(s.useState)(1),l=Object(i.a)(o,2),u=l[0],m=l[1],h=Object(s.useState)(!1),d=Object(i.a)(h,2),j=d[0],b=d[1];if(Object(s.useEffect)((function(){u>1&&b(!0)}),[u]),Object(s.useEffect)((function(){var e=!0,n=\"/api/song/\".concat(t.id,\"/amazon?v=5\");return u>1&&(n+=\"&page=\".concat(u)),fetch(n).then((function(t){e&&t.ok&&t.json().then((function(e){c(e),b(!1)}))})),function(){e=!1}}),[t,u]),!r||!r.items.length)return null;var p=r.items,g=r.total;return Object(O.jsxs)(\"div\",{className:\"amazon-related-products\",children:[Object(O.jsx)(\"h4\",{children:\"Relevant on Amazon.com\"}),p.map((function(e){return Object(O.jsx)(D,{item:e},e.asin||e.ASIN)})),Object(O.jsx)(\"small\",{children:\"As an Amazon Associate I earn from qualifying purchases.\"}),g>p.length&&Object(O.jsx)(\"p\",{style:{textAlign:\"right\"},children:Object(O.jsx)(\"button\",{className:\"btn btn-default btn-sm\",onClick:function(){m(u+1)},disabled:j,children:j?\"Loading...\":\"Load more products...\"})})]})}function D(e){var t=e.item;if(!t.detail_page_url)return function(e){var t=e.item,n=t.ItemAttributes.ProductGroup;n&&t.ItemAttributes.Binding&&n!==t.ItemAttributes.Binding&&(n+=\", \".concat(t.ItemAttributes.Binding));return Object(O.jsxs)(\"div\",{className:\"media amazon-item\",children:[Object(O.jsx)(\"div\",{className:\"media-left media-top\",children:Object(O.jsx)(\"a\",{href:t.URL,target:\"_blank\",rel:\"noopener noreferrer\",children:Object(O.jsx)(\"img\",{className:\"media-object\",src:t.SmallImage,alt:\"Product\"})})}),Object(O.jsxs)(\"div\",{className:\"media-body\",children:[Object(O.jsx)(\"h4\",{className:\"media-heading\",children:Object(O.jsx)(\"a\",{href:t.URL,target:\"_blank\",rel:\"noopener noreferrer\",children:t.Title})}),t.Creator&&Object(O.jsxs)(\"p\",{children:[\"By \",Object(O.jsx)(\"b\",{children:t.Creator})]}),Object(O.jsxs)(\"p\",{children:[t.ItemAttributes.ListPrice&&Object(O.jsx)(\"b\",{className:\"price\",children:t.ItemAttributes.ListPrice.FormattedPrice}),n]})]})]})}({item:t});var n=t.product_group;return n&&t.binding&&n!==t.binding&&(n+=\", \".concat(t.binding)),Object(O.jsxs)(\"div\",{className:\"media amazon-item\",children:[Object(O.jsx)(\"div\",{className:\"media-left media-top\",children:Object(O.jsx)(\"a\",{href:t.detail_page_url,target:\"_blank\",rel:\"noopener noreferrer\",children:Object(O.jsx)(\"img\",{className:\"media-object\",loading:\"lazy\",src:t.image_small||t.image_medium,alt:\"Product\"})})}),Object(O.jsxs)(\"div\",{className:\"media-body\",children:[Object(O.jsx)(\"h4\",{className:\"media-heading\",children:Object(O.jsx)(\"a\",{href:t.detail_page_url,target:\"_blank\",rel:\"noopener noreferrer\",children:t.title})}),t.contributor&&Object(O.jsxs)(\"p\",{children:[\"By \",Object(O.jsx)(\"b\",{children:t.contributor})]}),Object(O.jsxs)(\"p\",{children:[t.price&&Object(O.jsx)(\"b\",{className:\"price\",children:t.price}),n,Object(O.jsx)(\"br\",{}),t.release_date&&Object(O.jsxs)(\"span\",{children:[\"Release date: \",t.release_date]})]})]})]})}function F(e){var t=e.song,n=e.compact,s=void 0===n||n,a=Object(_.a)(\"/api/song/\".concat(t.id,\"/spotify\"),function(){var e=Object(y.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=6;break}throw new Error(\"\".concat(n.status,\" on \").concat(t));case 6:return e.next=8,n.json();case 8:return e.abrupt(\"return\",e.sent);case 9:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1}),r=a.data;return r?Object(O.jsxs)(\"div\",{className:\"spotify\",children:[Object(O.jsx)(\"h4\",{children:\"On Spotify\\u2122\"}),Object(O.jsx)(\"div\",{style:{textAlign:\"center\"},children:Object(O.jsx)(\"iframe\",{src:r.embed_url,width:\"300\",height:s?80:380,frameBorder:\"0\",allowtransparency:\"true\",allow:\"encrypted-media\"})})]}):null}var P=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={snippet:null,searched:!1,clicked:!1},e.onClickThumbnail=function(t){t.preventDefault(),e.setState({clicked:!0})},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e=this,t=this.props.song.id,n=\"/api/song/\".concat(t,\"/youtube\");return x(n).then((function(t){e.dismounted||(200!==t.status?console.warn(t.status,\"loading\",n):t.json().then((function(t){t.snippet?e.setState({snippet:t.snippet,searched:!0}):e.setState({searched:!0})})))}))}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"render\",value:function(){var e,t=this.state,n=t.clicked,s=t.snippet;if(k||null===s)return null;var a=s.videoId,r=\"https://www.youtube.com/watch?v=\".concat(a);if(n){var c=\"https://www.youtube-nocookie.com/embed/\".concat(a,\"?rel=0\"),o=335,i=178,l=document.querySelector(\"div.result\");l&&l.offsetWidth>335&&(o=560,i=315),e=Object(O.jsx)(\"iframe\",{width:o,height:i,title:s.title||\"YouTube Snippet\",src:c,frameBorder:0,allow:\"autoplay; encrypted-media\",allowFullScreen:!0})}else{var u=s.thumbnails.medium,m=document.querySelector(\"div.result\");m&&m.offsetWidth>335&&(u=s.thumbnails.high),e=Object(O.jsx)(\"a\",{href:r,onClick:this.onClickThumbnail,children:Object(O.jsx)(\"img\",{src:u.url,width:u.width,height:u.height,title:\"Click to load video\",alt:\"Video thumbnail\",loading:\"lazy\"})})}return Object(O.jsxs)(\"div\",{className:\"youtube\",children:[Object(O.jsxs)(\"h4\",{children:[\"YouTube\\u2122\",\" \",n?null:Object(O.jsx)(\"small\",{onClick:this.onClickThumbnail,children:\"Click to load\"})]}),Object(O.jsxs)(\"div\",{style:{textAlign:\"center\"},children:[e,Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"small\",{children:Object(O.jsx)(\"a\",{href:r,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Watch on YouTube\\u2122\"})})})]})]})}}]),n}(a.a.PureComponent);function H(e){var t=e.render,n=Object(s.useState)(!1),a=Object(i.a)(n,2),r=a[0],c=a[1];return r?t():Object(O.jsx)(N.a,{onEnter:function(){c(!0)}})}function M(){var e=document.getElementById(\"carbonadsouter\");if(e&&!e.querySelector(\"script\")){var t=document.createElement(\"script\");t.id=\"_carbonads_js\",t.src=\"https://cdn.carbonads.com/carbon.js?serve=CK7DCK7W&placement=songsearch\",t.async=!0,e.appendChild(t)}}var q=a.a.memo((function(e){var t=e.text;return Object(O.jsx)(\"blockquote\",{dangerouslySetInnerHTML:{__html:t}})}));function B(e){return Object(O.jsx)(C.a,Object(l.a)({minPeriod:60,formatter:function(e,t,n,s,a){return\"second\"===t?\"seconds ago\":a(e,t,n,s)}},e))}function U(){return Object(O.jsxs)(\"div\",{className:\"not-found\",children:[Object(O.jsx)(\"h3\",{children:\"Server Error\"}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"img\",{alt:\"Skull\",src:\"/static/skull.png\"})}),Object(O.jsxs)(\"p\",{children:[\"Most likely a \",Object(O.jsx)(\"b\",{children:\"temporary problem\"}),\" which will go away if you\",\" \",Object(O.jsx)(\"b\",{children:\"reload this page soon\"}),\".\"]}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Back to the home page\"})})]})}n(49);var Y=n(25),W=\"submittedComments\",z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={loadingComments:!1,savingComment:!1,serverError:null,submissionError:null,comments:e.props.comments||null,commentsCount:e.props.commentsCount||null,submittedComments:[],commentSubmitted:null,commentEdited:null,commentDeleted:null,searchedId:e.props.searchedId,replyComment:null,editComment:null,csrfToken:null,highlightComment:null,highlitComment:null,hasCommented:!1},e.loadCSRFToken=function(){fetch(\"/api/comments?csrftoken=1\").then((function(t){if(!e.dismounted)return t.ok?t.json().then((function(t){e.setState({csrfToken:t.csrf_token})})):void e.setState({serverError:t})})).catch((function(t){e.dismounted||e.setState({serverError:t})}))},e.loadComments=function(){var t=e.props,n=t.song,s=t.search,a=e.state,r=a.submittedComments,c=a.commentEdited,o=[],i=\"/api/comments\";n?i+=\"?song=\".concat(n.id):s&&(i+=\"?search=\".concat(s.id)),r.length&&(o=r.filter((function(e){return n?e.song===n.id:s?e.search===s.id:!e.song&&!e.search})).map((function(e){return e.id}))),o.forEach((function(e){i+=i.includes(\"?\")?\"&\":\"?\",i+=\"submitted=\".concat(e)})),c&&(i+=i.includes(\"?\")?\"&\":\"?\",i+=\"edited=\".concat(c.id)),(c&&o.length?fetch:x)(i).then((function(t){if(!e.dismounted){if(e.setState({loadingComments:!1}),t.ok)return t.json().then((function(t){e.setState({csrfToken:t.csrf_token,comments:t.comments,commentsCount:t.comments_count,loadingComments:!1},e.consolidateSubmittedComments)}));e.setState({serverError:t,loadingComments:!1})}})).catch((function(t){e.dismounted||e.setState({serverError:t,loadingComments:!1})}))},e.consolidateSubmittedComments=function(){var t=e.state.comments,n=e.state.submittedComments;if(n.length&&t[\"\"]&&t[\"\"].length){var s=[];if(function e(t){t.forEach((function(a){a.not_approved||n.forEach((function(e){e.id===a.id&&s.push(e.id)})),t[a.id]&&e(t[a.id])}))}(t[\"\"]),s.length){var a=n.filter((function(e){return!s.includes(e.id)}));e.setState({submittedComments:a},(function(){if(e.state.submittedComments.length)try{sessionStorage.setItem(W,JSON.stringify(e.state.submittedComments))}catch(t){console.warn(\"'sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY)' did't work\")}else try{sessionStorage.removeItem(W)}catch(t){}}))}}},e.highlightComment=function(t){var n=e.state.highlitComment;n=n&&n===t?null:t,e.setState({highlitComment:n},(function(){window.setTimeout((function(){e.dismounted||e.state.highlitComment!==t||e.setState({highlitComment:null})}),1e4)}))},e.submitCommentHandler=function(t){e.setState({savingComment:!0},(function(){e._submitCommentHandler(t).then((function(){e.setState({savingComment:!1})}))}))},e._submitCommentHandler=function(){var t=Object(y.a)(S.a.mark((function t(n){var s,a,r,c,o,i,l,u,m;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.song,c=a.search,o=e.state,i=o.submittedComments,l=o.csrfToken){t.next=4;break}throw new Error(\"No csrfToken prepared\");case 4:if((u=new FormData).append(\"csrfmiddlewaretoken\",l),u.append(\"text\",n.comment),u.append(\"name\",n.name),u.append(\"email\",n.email),i.length&&i.filter((function(e){return r?e.song===r.id:c?e.search===c.id:!e.song&&!e.search})).forEach((function(e){u.append(\"submitted\",e.id)})),!n.editComment){t.next=15;break}if(u.append(\"id\",n.editComment.id),n.editComment.oid){t.next=14;break}throw new Error(\"Can't edit if you don't have the oid\");case 14:u.append(\"oid\",n.editComment.oid);case 15:return n.replyComment&&u.append(\"parent\",n.replyComment.id),n.askedWasSearchedFor&&u.append(\"was_searched_for\",n.wasSearchedFor||!1),e.state.searchedId&&u.append(\"search\",e.state.searchedId||null),n.parent&&u.append(\"parent\",n.parent||null),u.append(\"experiment\",n.experiment||{}),r?u.append(\"song\",r.id):c&&u.append(\"search\",c.id),t.prev=21,t.next=24,fetch(\"/api/comments\",{method:\"POST\",body:u});case 24:if(!(s=t.sent).ok){t.next=37;break}if(e.state.searchedId)try{localStorage.removeItem(\"searched\")}catch(h){console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\")}return t.next=29,s.json();case 29:if(m=t.sent,!n.editComment){t.next=34;break}return t.abrupt(\"return\",e.setState({searchedId:null,commentEdited:m.submitted,submissionError:null,commentSubmitted:null,editComment:null,replyComment:null,comments:m.comments,commentsCount:m.comments_count}));case 34:return t.abrupt(\"return\",e.setState({searchedId:null,submissionError:null,commentEdited:null,commentSubmitted:m.submitted,commentDeleted:null,replyComment:null,comments:m.comments,commentsCount:m.comments_count},(function(){1===document.querySelectorAll(\".alert-comment\").length&&document.querySelector(\".alert-comment.alert-success\").scrollIntoView({behavior:\"smooth\"});var t=e.state.commentSubmitted,n=e.props,s=n.song,a=n.search;e.highlightComment(t.id);var r=e.state.submittedComments.slice(0);if(!r.map((function(e){return e.id})).filter((function(e){return e===t.id})).length){var c={id:t.id,oid:t.oid};s?c.song=s.id:a&&(c.search=a.id),r.push(c)}e.setState({submittedComments:r,submissionError:null},(function(){e.loadComments();try{sessionStorage.setItem(W,JSON.stringify(e.state.submittedComments))}catch(h){}}))})));case 35:t.next=38;break;case 37:return t.abrupt(\"return\",e.setState({submissionError:s}));case 38:t.next=44;break;case 40:return t.prev=40,t.t0=t.catch(21),console.warn(\"Submission failed:\",t.t0),t.abrupt(\"return\",e.setState({submissionError:t.t0}));case 44:case\"end\":return t.stop()}}),t,null,[[21,40]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteCommentHandler=function(t){e.setState({savingComment:!0},(function(){e._deleteCommentHandler(t).then((function(){e.setState({savingComment:!1})}))}))},e._deleteCommentHandler=function(){var t=Object(y.a)(S.a.mark((function t(n){var s,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new FormData,n.oid){t.next=3;break}throw new Error(\"Can't edit if you don't have the oid\");case 3:return a.append(\"id\",n.id),a.append(\"oid\",n.oid),\"/api/comments/delete\",t.prev=6,t.next=9,fetch(\"/api/comments/delete\",{method:\"POST\",body:a});case 9:s=t.sent,t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(6),t.abrupt(\"return\",e.setState({submissionError:t.t0}));case 15:if(s.ok){t.next=17;break}return t.abrupt(\"return\",e.setState({submissionError:s}));case 17:return t.abrupt(\"return\",e.setState({commentDeleted:n,commentEdited:null,editComment:null,submissionError:null},(function(){var t=e.state.submittedComments.filter((function(e){return e.id!==n.id}));e.setState({submittedComments:t},(function(){e.loadComments();try{sessionStorage.setItem(W,JSON.stringify(e.state.submittedComments))}catch(t){}}))})));case 18:case\"end\":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),e.setEditComment=function(t){e.setState({editComment:t})},e.setReplyComment=function(t){e.state.replyComment&&e.state.replyComment.id===t.id?e.setState({replyComment:null,highlitComment:null,commentEdited:null}):e.setState({replyComment:t,highlitComment:t.id,commentEdited:null})},e.clearCommentSubmitted=function(){e.setState({commentSubmitted:null})},e.clearCommentEdited=function(){e.setState({commentEdited:null})},e.clearCommentDeleted=function(){e.setState({commentDeleted:null})},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e=this,t=\"[]\";try{t=sessionStorage.getItem(W)||\"[]\"}catch(o){console.warn(\"'sessionStorage.getItem(SUBMITTED_COMMENTS_STORAGE_KEY)' didn't work\")}var n=JSON.parse(t);if(n.length){var s=!1,a=this.props.song;a&&(s=n.some((function(e){return e.song&&e.song===a.id}))),this.setState({submittedComments:n,hasCommented:s,loadingComments:!this.state.comments},this.loadComments)}else this.state.comments?this.loadCSRFToken():this.setState({loadingComments:!0},this.loadComments);if(window.location.hash){var r=/c(\\d+)$/;if(window.location.hash.match(r)){var c=parseInt(window.location.hash.match(r)[1],10);this.setState({highlitComment:c},(function(){window.setTimeout((function(){if(!e.dismounted){var t=document.querySelector(\"#c\".concat(e.state.highlitComment));t&&t.scrollIntoView&&t.scrollIntoView({behavior:\"smooth\"})}}),1e3),window.setTimeout((function(){e.dismounted||e.state.highlitComment!==c||e.setState({highlitComment:null})}),1e4)}))}}}},{key:\"componentDidUpdate\",value:function(e){e.song!==this.props.song&&this.setState({loadingComments:!0,comments:null,commentsCount:null},this.loadComments)}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"render\",value:function(){var e=this.props.song,t=this.state,n=t.comments,s=t.commentsCount,a=t.submissionError,r=t.commentSubmitted,c=t.commentEdited,o=t.commentDeleted,i=t.submittedComments,u=t.searchedId,m=t.editComment,h=t.replyComment,d=t.savingComment,j=t.highlitComment,b=t.hasCommented,p=t.csrfToken;return Object(O.jsxs)(\"div\",{className:\"comments masters song-comments\",children:[Object(O.jsx)(Y.a,{children:Object(O.jsx)(\"script\",{type:\"text/javascript\",language:\"javascript\",src:\"https://live.primis.tech/live/liveView.php?s=113482\"})}),Object(O.jsxs)(\"h3\",{children:[\"Song Comments \",s?Object(O.jsxs)(\"span\",{children:[\"(\",s,\")\"]}):null,Object(O.jsx)(\"br\",{}),Object(O.jsxs)(\"small\",{children:[\"On \",Object(O.jsx)(\"b\",{children:e.name}),\" \",Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",e.artist.name]})]}),Object(O.jsx)(V,{commentDeleted:o,clearCommentDeleted:this.clearCommentDeleted}),Object(O.jsx)(Q,Object(l.a)(Object(l.a)({},this.props),{},{submissionError:a,comments:n,editComment:m,replyComment:h,searchedId:u,setEditComment:this.setEditComment,setReplyComment:this.setReplyComment,submitCommentHandler:this.submitCommentHandler,deleteCommentHandler:this.deleteCommentHandler,commentSubmitted:r,commentEdited:c,submittedComments:i,savingComment:d,highlitComment:j,highlightComment:this.highlightComment,clearCommentSubmitted:this.clearCommentSubmitted,clearCommentEdited:this.clearCommentEdited,csrfToken:p,hasCommented:b}))]})}}]),n}(a.a.PureComponent);function K(e){var t=e.commentSubmitted,n=e.clearCommentSubmitted;return t?Object(O.jsxs)(\"div\",{className:\"alert-comment alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function(e){n()},children:Object(O.jsx)(\"span\",{\"aria-hidden\":\"true\",children:\"\\xd7\"})}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"b\",{children:\"Comment submitted. Thank you!\"})}),Object(O.jsx)(\"p\",{children:\"It needs to be moderated before publishing.\"})]}):null}function G(e){var t=e.commentEdited,n=e.clearCommentEdited;return t?Object(O.jsxs)(\"div\",{className:\"alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function(e){n()},children:Object(O.jsx)(\"span\",{\"aria-hidden\":\"true\",children:\"\\xd7\"})}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"b\",{children:\"Comment edited.\"})}),Object(O.jsx)(\"p\",{children:\"You can keep editing it until it gets approved.\"})]}):null}function V(e){var t=e.commentDeleted,n=e.clearCommentDeleted;return t?Object(O.jsxs)(\"div\",{className:\"alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function(e){n()},children:Object(O.jsx)(\"span\",{\"aria-hidden\":\"true\",children:\"\\xd7\"})}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"b\",{children:\"Comment removed.\"})}),Object(O.jsx)(\"p\",{children:\"Feel free to write a new comment.\"})]}):null}function J(e){var t,n=e.submissionError,a=Object(s.useState)({}),r=Object(i.a)(a,2),c=r[0],o=r[1],l=!1;if(!k)try{l=n instanceof window.Response}catch(u){console.log(\"instanceof window.Response did not work:\",u)}return Object(s.useEffect)((function(){!k&&l&&400===n.status&&n.json().then((function(e){o(e.errors)}))}),[n,l]),n?(t=!k&&l?400===n.status?Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"b\",{children:\"Something's not right with the submission\"})}),Object.keys(c).map((function(e){return Object(O.jsxs)(\"p\",{children:[Object(O.jsxs)(\"b\",{children:[e,\":\"]}),\" \",c[e].map((function(e){return Object(O.jsxs)(\"span\",{children:[Object(O.jsx)(\"i\",{children:e.message}),\" \",e.code?Object(O.jsxs)(\"span\",{children:[\"(\",Object(O.jsx)(\"code\",{children:e.code}),\")\"]}):null]},e.message+e.code)}))]},e)}))]}):n.status>=500?Object(O.jsx)(\"p\",{children:\"Server error. Perhaps simply try again a little later.\"}):Object(O.jsx)(\"p\",{children:\"The server basically failed to process the submission.\"}):Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"code\",{children:n.toString()})}),Object(O.jsxs)(\"div\",{className:\"search-error\",children:[Object(O.jsx)(\"h4\",{children:\"Sorry, an error occured\"}),t]})):null}var Q=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this.props,t=e.comments,n=e.replyComment,s=e.editComment;return Object(O.jsxs)(O.Fragment,{children:[t&&t[\"\"]&&Object(O.jsx)($,Object(l.a)(Object(l.a)({},this.props),{},{allComments:t,comments:t[\"\"]})),!n&&!s&&Object(O.jsx)(X,Object(l.a)({replyingComment:!1},this.props))]})}}]),n}(a.a.PureComponent),$=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={confirmDelete:!1},e}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this,t=this.state.confirmDelete,s=this.props,a=s.replyComment,r=s.editComment,c=s.setEditComment,o=s.setReplyComment,i=s.comments,u=s.allComments,m=s.submittedComments,h=s.deleteCommentHandler,d=s.highlightComment,j=s.highlitComment,b=s.commentSubmitted,p=s.clearCommentSubmitted,g=s.commentEdited,f=s.clearCommentEdited,x=s.csrfToken;return i.length?Object(O.jsx)(\"div\",{className:\"comments\",children:i.map((function(s){var i=!1;s.not_approved&&m.filter((function(e){return e.id===s.id})).length&&(i=!0);var v=!i&&x,S=u[s.id],y=!(!i||!r||r.id!==s.id),w=!(!v||!a||a.id!==s.id);return Object(O.jsxs)(\"div\",{className:\"comment\",id:\"c\".concat(s.id),children:[b&&b.id===s.id&&Object(O.jsx)(K,{commentSubmitted:b,clearCommentSubmitted:p}),g&&g.id===s.id&&Object(O.jsx)(G,{commentEdited:g,clearCommentEdited:f}),i&&!(r&&r.id===s.id)&&Object(O.jsx)(\"p\",{className:\"buttons\",children:Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function(e){e.preventDefault(),c(s)},children:\"Edit your comment\"})}),t&&r&&r.id===s.id&&Object(O.jsxs)(\"p\",{style:{margin:20,textAlign:\"center\"},children:[Object(O.jsx)(\"b\",{children:\"Are you sure?\"}),Object(O.jsx)(\"br\",{}),Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function(e){e.preventDefault(),h(s)},children:\"Yes\"}),\" \",Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-info\",onClick:function(t){t.preventDefault(),e.setState({confirmDelete:!1})},children:\"No\"})]}),i&&r&&r.id===s.id&&Object(O.jsxs)(\"p\",{className:\"buttons\",children:[!t&&Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-warning btn-sm\",onClick:function(t){t.preventDefault(),e.setState({confirmDelete:!0})},children:\"Remove your comment\"}),\" \",Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function(n){n.preventDefault(),t?e.setState({confirmDelete:!1},(function(){c(null)})):c(null)},children:\"Close edit\"})]}),r&&r.id===s.id?Object(O.jsx)(X,Object(l.a)({focusOnMount:!0,editingComment:y,replyingComment:!1},e.props)):Object(O.jsx)(ee,{highlightComment:d,canReply:v,replyingComment:w,setReplyComment:o,comment:s,highlit:j&&j===s.id}),a&&s.id===a.id&&Object(O.jsx)(X,Object(l.a)(Object(l.a)({},e.props),{},{replyingComment:w,focusOnMount:!0})),S&&Object(O.jsx)(n,Object(l.a)(Object(l.a)({},e.props),{},{comments:S}))]},s.id)}))}):null}}]),n}(a.a.PureComponent),X=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={comment:e.props.editComment?e.props.editComment.text:\"\",name:\"\",email:\"\",showNameEmailInputs:!0,wasSearchedFor:!1,canSubmit:!1,warnAboutName:!1},e.textareaRef=a.a.createRef(),e.clearComment=function(){e.setState({comment:\"\",preview:!1})},e.submitHandler=function(t){t.preventDefault();var n=e.state,s=n.comment,a=n.name,r=n.email,c=n.warnAboutName,o=n.wasSearchedFor,i=e.props,l=i.submitCommentHandler,u=i.editComment,m=i.replyComment;if(s.trim()){try{a&&a.trim()&&localStorage.setItem(\"commentName\",a.trim()),r&&r.trim()&&localStorage.setItem(\"commentEmail\",r.trim())}catch(h){console.warn(\"'localStorage.stItem(\\\"commentName\\\")' didn't work\")}a&&r||c?(c&&e.setState({warnAboutName:!1}),l({comment:s,email:r,name:a,wasSearchedFor:o,editComment:u,replyComment:m,askedWasSearchedFor:e.askWasSearchedFor()})):e.setState({warnAboutName:!0})}},e.getTextareaRows=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,s=(e.match(/\\n/g)||[]).length;return Math.min(n,Math.max(t,s+2))},e.askWasSearchedFor=function(){var t=e.props,n=t.searchedId,s=t.replyingComment,a=t.hasCommented,r=t.editingComment;return!(!n||s||r||a)},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e={},t=this.state,n=t.canSubmit,s=t.name,a=t.email,r=t.showNameEmailInputs;try{s=localStorage.getItem(\"commentName\")||\"\",a=localStorage.getItem(\"commentEmail\")||\"\"}catch(c){console.warn(\"'localStorage.getItem(\\\"commentName\\\")' didn't work\")}(s||a)&&(e.name=s,e.email=a),n||!s&&!a||(e.canSubmit=!0),s&&a&&r&&!this.props.editComment&&(e.showNameEmailInputs=!1),Object.keys(e).length&&this.setState(e),this.props.focusOnMount&&this.textareaRef.current.focus()}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"componentDidUpdate\",value:function(e){e.commentSubmitted!==this.props.commentSubmitted&&this.setState({comment:\"\"})}},{key:\"render\",value:function(){var e=this,t=this.state,n=t.comment,s=t.name,a=t.email,r=t.warnAboutName,c=t.showNameEmailInputs,o=this.props,i=o.editComment,l=o.savingComment,u=o.submissionError,m=o.editingComment;return o.csrfToken?Object(O.jsxs)(\"form\",{onSubmit:this.submitHandler,children:[Object(O.jsx)(J,{submissionError:u}),m&&Object(O.jsxs)(\"i\",{children:[\"You can edit \",Object(O.jsx)(\"b\",{children:\"your\"}),\" recently added, but not yet approved comments.\"]}),l&&Object(O.jsx)(Z,{}),this.askWasSearchedFor()&&Object(O.jsxs)(\"div\",{style:{textAlign:\"center\",marginBottom:20},children:[Object(O.jsx)(\"h4\",{children:\"Was this the song you were looking for?\"}),Object(O.jsxs)(\"label\",{className:\"radio-inline\",children:[Object(O.jsx)(\"input\",{type:\"radio\",name:\"wasSearchedFor\",value:\"yes\",disabled:l,onChange:function(t){e.setState({wasSearchedFor:!0},(function(){e.textareaRef.current&&e.textareaRef.current.focus()}))}}),\" \",\"Yes!\"]}),Object(O.jsxs)(\"label\",{className:\"radio-inline\",children:[Object(O.jsx)(\"input\",{type:\"radio\",name:\"wasSearchedFor\",id:\"inlineRadio2\",value:\"no\",disabled:l,onChange:function(t){e.setState({wasSearchedFor:!1},(function(){e.textareaRef.current&&e.textareaRef.current.focus()}))}}),\" \",\"No :(\"]})]}),Object(O.jsx)(\"div\",{className:\"form-group\",children:Object(O.jsx)(\"textarea\",{className:\"form-control\",rows:this.getTextareaRows(this.state.comment),ref:this.textareaRef,value:n,disabled:l,onChange:function(t){return e.setState({comment:t.target.value})},onBlur:function(t){e.state.comment.trim()&&setTimeout((function(){e.dismounted||e.state.canSubmit||e.setState({canSubmit:!0})}),100)}})}),c&&Object(O.jsxs)(\"div\",{className:\"form-inlinexxx\",children:[Object(O.jsxs)(\"div\",{className:\"form-group\",children:[Object(O.jsx)(\"label\",{htmlFor:\"_name\",className:\"sr-only\",children:\"Your name\"}),Object(O.jsx)(\"input\",{type:\"text\",className:\"form-control\",id:\"_name\",placeholder:\"Your name...\",disabled:l,value:s,onChange:function(t){return e.setState({name:t.target.value})}})]}),Object(O.jsxs)(\"div\",{className:\"form-group\",style:{marginBottom:3},children:[Object(O.jsx)(\"label\",{htmlFor:\"_email\",className:\"sr-only\",children:\"Email address\"}),Object(O.jsx)(\"input\",{type:\"email\",className:\"form-control\",id:\"_email\",placeholder:\"Your email address...\",disabled:l,value:a,onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(O.jsx)(\"p\",{children:Object(O.jsxs)(\"small\",{children:[\"Your email will \",Object(O.jsx)(\"b\",{children:\"never be published\"}),\" and\",\" \",Object(O.jsx)(\"b\",{children:\"never be shared\"}),\". Useful to receive reply comments.\"]})})]}),r&&Object(O.jsxs)(\"div\",{className:\"alert-comment alert alert-warning alert-dismissible\",role:\"alert\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function(t){e.setState({warnAboutName:!1})},children:Object(O.jsx)(\"span\",{\"aria-hidden\":\"true\",children:\"\\xd7\"})}),Object(O.jsx)(\"p\",{children:s?Object(O.jsx)(\"b\",{children:\"Please enter your email\"}):Object(O.jsx)(\"b\",{children:\"Please enter your name\"})}),Object(O.jsxs)(\"p\",{children:[\"A real name and email helps the comment be approved.\",Object(O.jsx)(\"br\",{}),\"An email address makes it possible to receive notification on replies to your comment.\"]})]}),Object(O.jsxs)(\"div\",{className:\"row\",children:[Object(O.jsx)(\"div\",{className:\"col-md-8\",children:s&&a&&!c&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(\"p\",{children:[\"Commenting as \",Object(O.jsx)(\"b\",{children:s}),\". Replies sent to \",Object(O.jsx)(\"b\",{children:a}),\".\"]}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function(t){t.preventDefault(),e.setState({showNameEmailInputs:!0})},children:\"Change name\"})})]})}),Object(O.jsx)(\"div\",{className:\"col-md-4\",style:{textAlign:\"right\"},children:Object(O.jsx)(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:!n.trim()||l,children:i?\"Save Changes\":\"Post Comment\"})})]}),!this.state.wasSearchedFor&&Object(O.jsx)(\"p\",{style:{margin:\"20px 0\"},children:Object(O.jsxs)(\"small\",{children:[\"Can't find the song you're looking for?\",\" \",Object(O.jsxs)(\"a\",{href:\"https://www.peterbe.com/plog/blogitem-040601-1\",children:[\"Try posting on \",Object(O.jsx)(\"b\",{children:\"Find song by lyrics\"})]}),\".\"]})})]}):k?Object(O.jsx)(\"i\",{children:\"Must have JavaScript enabled to comment.\"}):null}}]),n}(a.a.PureComponent);function Z(){return Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"i\",{children:\"Please wait....\"})})}var ee=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this.props,t=e.highlit,n=e.highlightComment,s=e.canReply,a=e.replyingComment,r=e.setReplyComment,c=e.comment,o=c.id,i=c.name,l=c.created,u=c.not_approved,m=c.text_rendered;return Object(O.jsxs)(\"div\",{className:t?\"display highlit\":\"display\",children:[s&&Object(O.jsx)(\"p\",{className:\"buttons\",children:Object(O.jsx)(\"button\",{type:\"button\",className:a?\"btn btn-warning btn-sm\":\"btn btn-info btn-sm\",onClick:function(e){e.preventDefault(),r(c)},children:a?\"Close\":\"Reply\"})}),Object(O.jsxs)(\"h5\",{children:[\"By \",Object(O.jsx)(\"b\",{children:i||Object(O.jsx)(\"i\",{children:\"Anonymous\"})})]}),Object(O.jsxs)(\"p\",{className:\"meta\",children:[Object(O.jsxs)(\"a\",{href:\"#c\".concat(o),title:l,onClick:function(e){n(o)},children:[\"Posted \",Object(O.jsx)(B,{date:l,title:l})]}),u&&Object(O.jsx)(\"small\",{children:\"Not yet approved!\"})]}),c.hasOwnProperty(\"was_searched_for\")&&Object(O.jsxs)(\"p\",{children:[Object(O.jsx)(\"i\",{children:\"Was it the song you were looking for?\"}),\" \",Object(O.jsx)(\"b\",{children:c.was_searched_for?\"Yes\":\"No\"}),\" \",c.was_searched_for&&function(){var e=[\"\\ud83c\\udf89\",\"\\ud83c\\udf8a\",\"\\ud83e\\udd73\",\"\\u2728\",\"\\ud83d\\udc4d\\ud83c\\udffc\",\"\\ud83e\\udd70\",\"\\ud83d\\ude0d\",\"\\ud83c\\udf7e\"],t=e[Math.floor(Math.random()*e.length)];return Object(O.jsx)(\"span\",{role:\"img\",\"aria-label\":\"muted\",children:t})}()]}),\"string\"===typeof m?Object(O.jsx)(\"blockquote\",{dangerouslySetInnerHTML:{__html:m}}):Object(O.jsx)(\"blockquote\",{children:m})]})}}]),n}(a.a.PureComponent);n(50);var te=function(e){var t=e.recentComments,n=Object(j.g)().page,a=Object(s.useRef)(!1),r=Object(s.useState)(null),c=Object(i.a)(r,2),l=c[0],u=c[1],m=Object(s.useState)(t||null),h=Object(i.a)(m,2),d=h[0],b=h[1];function p(e){return parseInt(e||\"1\",10)}var g=Object(s.useCallback)((function(){var e=\"/api/comments/recent\",t=p(n);return t>1&&(e+=\"?page=\".concat(t)),x(e).then((function(e){if(!e.ok)return a.current&&u(e);e.json().then((function(e){return a.current&&b(e)}))})).catch((function(e){return a.current&&u(e)}))}),[n]);Object(s.useEffect)((function(){var e=p(n),t=\" - Song Search\";return A({title:e>1?\"Recent Comments (page \".concat(e,\")\").concat(t):\"Recent Comments\".concat(t)}),b(null),a.current=!0,g(n),function(){a.current=!1}}),[n,g]);var f=!d&&!l,v=Object(s.useState)(!1),S=Object(i.a)(v,2),y=S[0],w=S[1];Object(s.useEffect)((function(){f?window.setTimeout((function(){a.current&&w(!0)}),1e3):w(!1)}),[f]);var C=p(n),N=null;return d&&(d.next_page||C>1)&&(N=Object(O.jsx)(se,{next:d.next_page,previous:C-1})),Object(O.jsxs)(\"div\",{className:\"recent-comments\",children:[!l&&Object(O.jsxs)(\"h2\",{children:[\"Recent Comments \",1!==C&&Object(O.jsxs)(\"small\",{children:[\"Page \",C]})]}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Back to the home page\"})}),f&&y&&Object(O.jsx)(T,{text:\"Loading...\"}),l&&!d&&Object(O.jsx)(U,{}),N,d&&Object(O.jsx)(ne,{comments:d.comments,isRoot:!0}),N]})};function ne(e){var t=e.comments,n=e.isRoot,s=null,a=null;return Object(O.jsx)(\"div\",{className:\"comments\",children:t.map((function(e){var t=null;n&&(e.image&&s!==e.song.id&&(t=Object(O.jsx)(o.b,{to:e._url,children:Object(O.jsx)(\"img\",{className:\"pull-right img-thumbnail found\",loading:\"lazy\",src:e.image.thumbnail100||e.image.url,alt:e.song.artist.name})})),s=e.song.id);var r=null;e.geo&&(e.geo.city&&e.geo.country?r=\" (from \".concat(e.geo.city,\", \").concat(e.geo.country,\") \"):e.geo.country&&(r=\" (from \".concat(e.geo.country,\") \")));var c=null;return e.rating&&(a&&(c=e.rating.chronological-a-1),a=e.rating.chronological),Object(O.jsxs)(\"div\",{className:\"comment\",children:[t,n&&Object(O.jsxs)(\"h4\",{children:[\"On\",\" \",Object(O.jsxs)(o.b,{to:e._url,children:[Object(O.jsx)(\"b\",{children:e.song.name}),\" \",Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",e.song.artist.name]})]}),Object(O.jsx)(\"blockquote\",{dangerouslySetInnerHTML:{__html:e.text_rendered}}),n&&Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:e._url,className:\"btn btn-info btn-sm\",children:\"Reply\"})}),Object(O.jsxs)(\"p\",{children:[\"By \",e.name?Object(O.jsx)(\"b\",{children:e.name}):Object(O.jsx)(\"i\",{children:\"Anonymous\"}),r,\"on \",e.approved_human,\" \",e.rating&&Object(O.jsxs)(\"span\",{children:[\"rating:\",Object(O.jsx)(\"code\",{children:e.rating.score}),\"chronological: \",Object(O.jsx)(\"code\",{children:e.rating.chronological}),!!c&&Object(O.jsx)(\"i\",{children:c>0?\" +\".concat(c):c})]})]}),e.replies&&e.replies.length?Object(O.jsx)(ne,{comments:e.replies,isRoot:!1}):null]},e.id)}))})}function se(e){var t=e.previous,n=e.next;return Object(O.jsxs)(\"div\",{className:\"row\",children:[Object(O.jsx)(\"div\",{className:\"col-md-6\",style:{textAlign:\"right\"},children:t?Object(O.jsx)(\"div\",{className:\"load-more\",children:Object(O.jsx)(o.b,{to:1===t?\"/comments\":\"/comments/p\".concat(t),children:\"Previous page\"})}):null}),Object(O.jsx)(\"div\",{className:\"col-md-6\",style:{textAlign:\"left\"},children:n&&Object(O.jsx)(\"div\",{className:\"load-more\",children:Object(O.jsx)(o.b,{to:\"/comments/p\".concat(n),children:\"Next page\"})})})]})}var ae=\"/static/lazyload-thumbnail.png\",re=\"/static/placeholder.png\",ce=\"true\"===Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NO_ADS,oe=[\"Born to be wild\",\"No one ever told me life was kind\",\"But here it comes again, straight thru the heart\",\"I'm an alligator\",\"My mouth, it moves\"];oe.sort((function(){return.5-Math.random()}));(new Date).getTime();var ie=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var s;Object(u.a)(this,n),(s=t.call(this,e)).artistRef=a.a.createRef(),s.languageRef=a.a.createRef(),s.searchRef=a.a.createRef(),s.startSearchFromLocation=function(e){var t=e.match,n=decodeURIComponent(t.params.q),a=new URLSearchParams(e.location.search||\"\"),r=a.get(\"artist\"),c=a.get(\"language\"),o=a.get(\"year\"),i=a.get(\"example\");if(s.state.q!==n){var l={q:n};n.length>s.searchRef.current.maxLength-10&&(l.searchMaxLength=[n.length,s.searchRef.current.maxLength]),(c||o)&&(s.loadSearchAggregates(),l.advancedSearch=!0),c&&(l.searchLanguage=c),o&&(l.searchYear=o),r&&(l.artistName=r,l.advancedSearch=!0),i&&(l.searchExample=i),s.setState(l,(function(){s.startSearch(n,c,o,r,s.state.resultsPageIndex,s.state.searchExample)}))}else A({title:\"\".concat(n,\" - Song Search\")})},s.onFocusSearch=function(){s.searchRef.current.placeholder=\"\",clearInterval(s.placeholderSampleInterval),s.fillerInterval&&clearInterval(s.fillerInterval),s.state.showAutocompleteSuggestions||s.setState({showAutocompleteSuggestions:!0}),s.state.shareSearch&&s.setState({shareSearch:!1}),s._firstFocusSearch||(s._firstFocusSearch=!0,window.innerHeight&&window.innerHeight<600&&s.searchRef.current.scrollIntoView())},s.onBlurSearch=function(e){s.state.q||(s.setNextSamplePlaceholder(),s.startSamplePlaceholderInterval()),setTimeout((function(){s.dismounted||s.setState({showAutocompleteSuggestions:!1})}),300)},s.onFocusArtist=function(e){s.state.showAutocompleteArtistSuggestions||s.setState({showAutocompleteArtistSuggestions:!0})},s.onBlurArtist=function(e){setTimeout((function(){s.dismounted||s.setState({showAutocompleteArtistSuggestions:!1})}),300)},s.sampleSearch=function(e,t){e.preventDefault();var n={q:t.term,searchExample:t.id};(t.language||t.year)&&(s.state.searchLanguages.length&&s.state.searchYears.length||s.loadSearchAggregates()),t.language?(n.searchLanguage=t.language,n.advancedSearch=!0):s.state.searchLanguage&&(n.searchLanguage=\"\"),t.year?(n.searchYear=t.year,n.advancedSearch=!0):s.state.searchYear&&(n.searchYear=\"\"),t.artist?(n.artistName=t.artist,n.advancedSearch=!0):s.state.artistName&&(n.artistName=\"\"),s.setState(n,(function(){s.submitSearch()}))},s.onSubmit=function(e){e.preventDefault(),s.submitSearch()},s._fetchSearchAlternatives=function(){var e=\"/api/search/alternatives?searched=\".concat(s.state.parentSearch);return x(e).then((function(e){if(200===e.status)return e.json().then((function(e){s.dismounted||e&&s.setState({keyPhrases:e.key_phrases})}))}))},s.onChangeSearch=function(e){var t=e.target.value;s.setState({q:t},(function(){s.state.desperateSearch&&s.setState({desperateSearch:!1}),s.state.originalQ&&s.setState({originalQ:\"\"});var e=t.length;if(e>s.searchRef.current.maxLength-10?s.setState({searchMaxLength:[e,s.searchRef.current.maxLength],showAutocompleteSuggestions:!1}):s.state.searchMaxLength&&s.setState({searchMaxLength:null,showAutocompleteSuggestions:!0}),s.state.q.trim()){if(s.autocompleteWaitingFor&&t.trim()===s.autocompleteWaitingFor)return;(e<4||t.endsWith(\" \"))&&e<24?s.fetchAutocompleteSuggestionsThrottled(t,s.state.searchLanguage):e>24?s.fetchAutocompleteSuggestionsDebouncedLong(t,s.state.searchLanguage):e?s.fetchAutocompleteSuggestionsDebounced(t,s.state.searchLanguage):s.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:!0})}else s.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:!0})}))},s.onKeyDownSearch=function(e){var t=s.state.autocompleteSuggestions;if(t){var n=s.state.autocompleteHighlight;if(\"Tab\"===e.key){e.preventDefault();var a=n>-1?t[n]:t[0];a._url||(s.setState({q:a.text+\" \"}),s.fetchAutocompleteSuggestions(a.text,s.state.searchLanguage))}else if(\"ArrowDown\"===e.key&&n<t.length)e.preventDefault(),s.setState({autocompleteHighlight:n+1});else if(\"ArrowUp\"===e.key&&n>-1)s.setState({autocompleteHighlight:n-1});else if(\"Enter\"===e.key&&n>-1){e.preventDefault();var r=s.state.autocompleteSearchSuggestions;if(0===n&&r&&r.total)return void s.submitSearch();if(!t[--n])return console.warn(\"SUGGESTIONS\",t),console.warn(\"HIGHLIGHT\",n),void s.setState({autocompleteSuggestions:null,autocompleteHighlight:-1},(function(){return s.submitSearch()}));t[n]._url?s.setState({redirectTo:{pathname:t[n]._url}}):s.setState({q:t[n].text,autocompleteSuggestions:null,autocompleteHighlight:-1},(function(){return s.submitSearch()}))}}},s.onKeyDownArtistSearch=function(e){var t=s.state.autocompleteArtistSuggestions;if(t){var n=s.state.autocompleteArtistHighlight;\"Tab\"===e.key?(e.preventDefault(),n>-1?(s.setState({artistName:t[n].text}),s.fetchAutocompleteArtistSuggestions(t[n].text)):t.length&&(s.setState({artistName:t[0].text}),s.fetchAutocompleteArtistSuggestions(t[0].text))):\"ArrowDown\"===e.key&&n<t.length?(e.preventDefault(),s.setState({autocompleteArtistHighlight:n+1})):\"ArrowUp\"===e.key&&n>-1?s.setState({autocompleteArtistHighlight:n-1}):\"Enter\"===e.key&&n>-1&&(e.preventDefault(),s.setState({artistName:t[n].text,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1}))}},s.toggleShareSearch=function(e){e.preventDefault(),s.setState({shareSearch:!s.state.shareSearch,advancedSearch:!1})},s.toggleAdvancedSearch=function(e){if(e.preventDefault(),!s.state.advancedSearch){var t=s.state.searchLanguages.filter((function(e){return e.count})),n=s.state.searchYears.filter((function(e){return e.count}));t.length&&n.length||s.loadSearchAggregates()}s.setState({advancedSearch:!s.state.advancedSearch,shareSearch:!1})},s.onChangeLanguage=function(e){e.preventDefault();var t=e.target.value;s.setState({searchLanguage:t})},s.onChangeYear=function(e){e.preventDefault();var t=e.target.value;s.setState({searchYear:t})},s.onChangeArtistName=function(e){e.preventDefault();var t=e.target.value;s.setState({artistName:t},(function(){t.length?s.fetchAutocompleteArtistSuggestions(s.state.artistName.trim()):s.setState({autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1})}))},s.onSelectSuggestion=function(e,t){if(e.preventDefault(),t._url)return s.setState({redirectTo:t._url});var n=t.text;t.append&&(n=function(e,t){var n=e.split(/\\s+/);return n.pop(),n.push(t),n.join(\" \")}(s.state.q,n)),s.setState({q:n,autocompleteSuggestions:null,autocompleteHighlight:-1},(function(){s.submitSearch()}))},s.onSelectSuggestionAll=function(e){e.preventDefault(),s.submitSearch()},s.onSelectArtistSuggestion=function(e,t){e.preventDefault(),s.setState({artistName:t.text,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1},(function(){s.submitSearch()}))},s.onLoadMore=function(e){e.preventDefault(),s.setState({resultsPageIndex:s.state.resultsPageIndex+1},(function(){s.startSearch(s.state.q,s.state.searchLanguage,s.state.searchYear,s.state.artistName,s.state.resultsPageIndex,s.state.searchExample)}))},s.submitPhrase=function(e,t){e.preventDefault();var n={q:t.phrase,originalQ:s.state.q};t.year&&(n.searchYear=t.year),t.language&&(n.searchLanguage=t.language),s.setState(n,(function(){s.submitSearch()}))},s.reloadSearch=function(e){e.preventDefault(),window.location.reload()},s.loadMoreByName=function(e){var t=s.state.by_name_limit;s.setState({by_name_total:0,by_name_limit:0},(function(){var e=\"/api/search?q=\".concat(encodeURIComponent(s.state.q),\"&by_name=\").concat(t);fetch(e).then((function(e){s.dismounted||200===e.status&&e.json().then((function(e){e&&s.setState({by_name:e.by_name,by_name_total:e.by_name_total,by_name_limit:e.by_name_limit})}))}))}))},s.displayYears=function(e){var t=e+9,n=(new Date).getFullYear();return t>n&&(t=n),\"\".concat(e,\"\\u2026\").concat(t)};var r=\"\",c=\"\",o=\"\",i=0,l=null,m=!1,h=null,d=null,j=null,p=null,g=\"\",f=\"\",O=null,v=null,S=null,y=null,w=s.props.results;w&&(s.searched=w.searched,r=w.search,i=w.total,l=w.results,m=w.desperate,h=w.missing,d=w.by_name||null,j=w.by_name_total||null,p=w.by_name_limit||null,o=w.artist,c=w.original||\"\",g=w.language||\"\",f=w.year||\"\",O=w.searched||null,v=w.key_phrases||null,S=w.popularityFactor||null,y=w.search_example||null);var C=Boolean(o||g||f),N=null,_=!1;e.searchExamples&&e.searchExamples.examples&&(N=e.searchExamples.examples,_=!0);var k=null,E=!1;return e.recentComments&&e.recentComments.comments&&e.recentComments.comments.length&&(k=e.recentComments,E=!0),s.state={q:r,originalQ:c,artistName:o,searching:!1,searchError:null,total:i,results:l,resultsPageIndex:0,by_name:d,by_name_total:j,by_name_limit:p,placeholder:oe[0],slowSearch:null,showExamples:_,searchExamples:N,parentSearch:O,desperateSearch:m,missing:h,keyPhrases:v,popularityFactor:S,searchExample:y,showRecentComments:E,recentComments:k,onlyResults:null,searchMaxLength:null,autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:!0,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1,showAutocompleteArtistSuggestions:!0,advancedSearch:C,searchLanguage:g,searchLanguages:[],searchYear:f,searchYears:[],redirectTo:null,shareSearch:!1},s.fetchAutocompleteSuggestionsDebounced=Object(b.a)(800,s.fetchAutocompleteSuggestions),s.fetchAutocompleteSuggestionsDebouncedLong=Object(b.a)(1800,s.fetchAutocompleteSuggestions),s.fetchAutocompleteSuggestionsThrottled=Object(b.b)(1100,s.fetchAutocompleteSuggestions),s._autocompleteSuggestionsCache={},s}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){I(),this.props.match.params.q?this.startSearchFromLocation(this.props):(this.startSamplePlaceholderInterval(),this.state.searchExamples||this.fetchSearchExamples(),this.state.recentComments||this.fetchRecentComments()),this.state.results&&(this.state.desperateSearch||!this.state.total)&&this.state.q.length>10&&this._fetchSearchAlternatives()}},{key:\"componentDidUpdate\",value:function(e){this.props.match.params.q!==e.match.params.q&&(this.props.match.params.q?decodeURIComponent(this.props.match.params.q)!==this.state.q&&this.startSearchFromLocation(this.props):(I(),this.setState({q:\"\",originalQ:\"\",artistName:\"\",searching:!1,total:null,results:null,resultsPageIndex:0,slowSearch:null,showExamples:!1,searchExamples:null,showRecentComments:!1,parentSearch:null,desperateSearch:!1,searchExample:null,missing:null,searchError:null,by_name:null,by_name_total:null,by_name_limit:null,autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1,redirectTo:null,shareSearch:!1}),this.fetchSearchExamples()))}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0,this.stopSamplePlaceholderInterval(),this.fillerInterval&&window.clearInterval(this.fillerInterval),this.slowSearchTimer&&window.clearTimeout(this.slowSearchTimer)}},{key:\"fetchSearchExamples\",value:function(){var e=this;return fetch(\"/api/search/examples\").then((function(t){if(200===t.status)return t.json().then((function(t){e.dismounted||t&&(e.state.results||e.state.searching||e.setState({searchExamples:t.examples,showExamples:!0}))}))}))}},{key:\"fetchRecentComments\",value:function(){var e=this;return fetch(\"/api/comments/recent/home\").then((function(t){if(200===t.status)return t.json().then((function(t){e.dismounted||t&&(e.state.results||e.state.searching||e.setState({recentComments:t,showRecentComments:!0}))}))}))}},{key:\"stopSamplePlaceholderInterval\",value:function(){this.placeholderSampleInterval&&window.clearInterval(this.placeholderSampleInterval)}},{key:\"startSamplePlaceholderInterval\",value:function(){var e=this;this.state.q||(this.currentPlaceholder=0,this.placeholderSampleInterval&&window.clearInterval(this.placeholderSampleInterval),this.placeholderSampleInterval=window.setInterval((function(){e.setNextSamplePlaceholder()}),3e3))}},{key:\"setNextSamplePlaceholder\",value:function(){var e=this;this.fillerInterval&&window.clearInterval(this.fillerInterval);var t=oe[++this.currentPlaceholder%oe.length],n=this.searchRef.current;if(n){var s=0;this.fillerInterval=setInterval((function(){t&&(n.placeholder=t.substring(0,++s),s>=t.length&&(clearInterval(e.fillerInterval),n.placeholder+=\"...\"))}),10)}}},{key:\"submitSearch\",value:function(){var e=this.state.q.trim(),t=this.state.searchLanguage,n=this.state.searchYear,s=this.artistRef.current&&this.artistRef.current.value.trim();if(!s&&this.state.artistName?this.state.advancedSearch||(s=this.state.artistName):s&&!this.state.artistName&&this.setState({artistName:s}),e){var a=\"/q/\".concat(encodeURIComponent(e));t&&\"en\"!==t&&(a+=\"?language=\".concat(t)),n&&(a+=a.includes(\"?\")?\"&\":\"?\",a+=\"year=\".concat(n)),s&&(a+=a.includes(\"?\")?\"&\":\"?\",a+=\"artist=\".concat(encodeURIComponent(s)));var r=this.props.location.pathname;if(this.props.location.search&&(r+=this.props.location.search),a===r)return;this.props.history.push(a),this.startSearch(e,t,n,s),document.querySelector('input[type=\"search\"]').blur(),this.state.autocompleteSuggestions&&this.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:!0}),this.state.autocompleteArtistSuggestions&&this.setState({autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1})}}},{key:\"startSearch\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;A({title:\"Searching... - Song Search\"}),r?this.setState({searching:!0,searchError:null},(function(){t.sendSearch(e,n,s,a,r,c)})):this.setState({searching:!0,searchError:null,results:null,by_name:null,showExamples:!1,showRecentComments:!1,parentSearch:null},(function(){t.sendSearch(e,n,s,a,r,c),t.slowSearchTimer=window.setTimeout((function(){t.state.searchError||t.state.results||t.setState({slowSearch:!0})}),5e3)}))}},{key:\"sendSearch\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=\"/api/search?q=\".concat(encodeURIComponent(e));return n&&(o+=\"&language=\".concat(n)),s&&(o+=\"&year=\".concat(s)),a&&(o+=\"&artist=\".concat(encodeURIComponent(a))),r?(o+=\"&page=\".concat(r+1),o+=\"&searched=\".concat(this.searched)):this.state.originalQ&&(o+=\"&original=\".concat(this.searched)),this.state.desperateSearch&&!this.state.originalQ&&(o+=\"&desperate=true\"),c&&(o+=\"&example=\".concat(c)),x(o).then((function(n){if(200===n.status)return n.json().then((function(n){if(t.slowSearchTimer&&window.clearTimeout(t.slowSearchTimer),!t.dismounted&&n){if(n.error)return t.setState({searchError:n.error,searching:!1,slowSearch:null}),void A({title:\"Sorry, search error\"});t.state.searchError&&t.setState({searchError:null}),A({title:\"\".concat(e,\" - Song Search\")}),r||(t.searched=n.searched);try{localStorage.setItem(\"searched\",\"\".concat(n.searched,\",\").concat((new Date).getTime()))}catch(a){console.warn(\"'localStorage.setItem(\\\"searched\\\")' didn't work\")}var s;r?(s=[],t.state.results.forEach((function(e){return s.push(e)})),n.results.forEach((function(e){return s.push(e)}))):s=n.results,t.setState({desperateSearch:n.desperate,missing:n.missing,popularityFactor:n.popularity_factor,parentSearch:n.searched,searching:!1,results:s,keyPhrases:null,by_name:n.by_name,by_name_total:n.by_name_total,by_name_limit:n.by_name_limit,total:n.total,searchError:null,slowSearch:null},(function(){(t.state.desperateSearch||!t.state.total)&&t.state.q.length>10&&t._fetchSearchAlternatives()}))}}));n.text().then((function(e){A({title:\"Search Error\"}),t.setState({searching:!1,searchError:{status:n.status,text:e},slowSearch:!1})}))}))}},{key:\"fetchAutocompleteSuggestions\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=e.trim(),a=\"/api/search/autocomplete?q=\".concat(encodeURIComponent(e));n&&(s+=n.trim(),a+=\"&language=\".concat(n));var r=this._autocompleteSuggestionsCache[s];return r?Promise.resolve(r).then((function(e){t.setState({autocompleteSuggestions:e.matches,autocompleteSearchSuggestions:e.search_suggestions,autocompleteHighlight:-1,missing:e.missing})})):(this.autocompleteWaitingFor=e,fetch(a).then((function(n){if(200===n.status)return n.json().then((function(n){t.dismounted||e.startsWith(t.autocompleteWaitingFor)&&(t._autocompleteSuggestionsCache[s]=n,t.state.q&&t.setState({autocompleteSuggestions:n.matches,autocompleteSearchSuggestions:n.search_suggestions,autocompleteHighlight:-1}))}))})))}},{key:\"fetchAutocompleteArtistSuggestions\",value:function(e){var t=this,n=\"/api/search/autocomplete?q=\".concat(e,\"&artist=true\");return fetch(n).then((function(e){if(200===e.status)return e.json()})).then((function(e){t.dismounted||e&&t.setState({autocompleteArtistSuggestions:e.matches,autocompleteArtistHighlight:-1})}))}},{key:\"loadSearchAggregates\",value:function(){var e=this;return fetch(\"/api/search/aggregates\").then((function(t){200===t.status&&t.json().then((function(t){e.setState({searchLanguages:t.languages,searchYears:t.years})}))}))}},{key:\"render\",value:function(){var e=this,t=this.state,n=t.redirectTo,s=t.searchYear;if(n)return Object(O.jsx)(j.a,{to:n,push:!0});var a=null,r=null;if(this.state.results){var c=this.state.results;if(this.state.onlyResults){var o=this.state.onlyResults.map((function(e){return e.id}));c=c.filter((function(e){return o.includes(e.id)}))}a=Object(O.jsx)(we,{results:c,searched:this.searched,popularityFactor:this.state.popularityFactor,showYear:Boolean(s)}),this.state.results.length<this.state.total&&(r=Object(O.jsx)(Ie,{location:this.props.location,page:this.state.resultsPageIndex,onLoadMore:this.onLoadMore}))}var i=null;this.state.by_name&&this.state.by_name.length&&(i=Object(O.jsx)(Ee,{results:this.state.by_name,total:this.state.by_name_total,limit:this.state.by_name_limit,loadMoreByName:this.loadMoreByName}));var l=Object(O.jsxs)(\"span\",{className:\"help-block toggles\",children:[this.state.results&&this.state.results.length?Object(O.jsx)(\"button\",{type:\"button\",className:this.state.shareSearch?\"btn btn-default btn-sm active\":\"btn btn-default btn-sm\",onClick:this.toggleShareSearch,children:this.state.shareSearch?\"Hide share search\":\"Share search results\"}):null,Object(O.jsx)(\"button\",{type:\"button\",className:this.state.advancedSearch?\"btn btn-default btn-sm active\":\"btn btn-default btn-sm\",onClick:this.toggleAdvancedSearch,children:this.state.advancedSearch?\"Hide search options\":\"Search options\"})]}),u=null;if(!this.state.advancedSearch){var m=[];if(this.state.searchLanguage&&\"en\"!==this.state.searchLanguage){var h=this.state.searchLanguages.filter((function(t){return t.code===e.state.searchLanguage}))[0].language;m.push(\"Language: \".concat(h))}this.state.searchYear&&m.push(\"Years: \".concat(this.displayYears(parseInt(this.state.searchYear)))),this.state.artistName&&m.push(\"Artist: \".concat(this.state.artistName)),m.length&&(u=Object(O.jsxs)(\"span\",{className:\"help-block advanced-search-status\",children:[Object(O.jsx)(\"b\",{children:\"Search options:\"}),\" \",m.join(\", \")]}))}var d=null;this.state.advancedSearch&&(d=Object(O.jsxs)(\"div\",{className:\"advanced\",children:[Object(O.jsxs)(\"div\",{className:\"form-group\",style:{position:\"relative\"},children:[Object(O.jsx)(\"input\",{type:\"search\",ref:this.artistRef,value:this.state.artistName,className:\"form-control input-lg\",maxLength:100,onFocus:this.onFocusArtist,onBlur:this.onBlurArtist,onChange:this.onChangeArtistName,onKeyDown:this.onKeyDownArtistSearch,\"aria-label\":\"Artist search\",placeholder:\"Artist or band name\"}),this.state.autocompleteArtistSuggestions&&this.state.showAutocompleteArtistSuggestions?Object(O.jsx)(ge,{onSelectSuggestion:this.onSelectArtistSuggestion,highlight:this.state.autocompleteArtistHighlight,suggestions:this.state.autocompleteArtistSuggestions}):null]}),Object(O.jsx)(\"div\",{className:\"form-group\",children:Object(O.jsxs)(\"select\",{ref:this.languageRef,onChange:this.onChangeLanguage,value:this.state.searchLanguage,className:\"form-control\",children:[Object(O.jsx)(\"option\",{value:\"\",children:\"Any language\"}),this.state.searchLanguages.map((function(e){var t=e.language;return 1===e.count?t+=\" (1 song)\":e.count&&(t+=\" (\".concat(e.count.toLocaleString(),\" songs)\")),Object(O.jsx)(\"option\",{value:e.code,children:t},e.code)}))]})}),Object(O.jsx)(\"div\",{className:\"form-group\",children:Object(O.jsxs)(\"select\",{onChange:this.onChangeYear,value:this.state.searchYear,className:\"form-control\",children:[Object(O.jsx)(\"option\",{value:\"\",children:\"Any year\"}),this.state.searchYears.map((function(t){var n=e.displayYears(t.year);return 1===t.count?n+=\" (1 song)\":t.count&&(n+=\" (\".concat(t.count.toLocaleString(),\" songs)\")),Object(O.jsx)(\"option\",{value:t.year,children:n},n)}))]})}),Object(O.jsx)(\"div\",{className:\"form-group text-right\",children:Object(O.jsx)(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Search Now\"})})]}));var b=null;return this.state.results&&this.state.keyPhrases&&this.state.keyPhrases.length&&(b=Object(O.jsx)(de,{nothingFound:!this.state.results.length,phrases:this.state.keyPhrases,submitPhrase:this.submitPhrase})),Object(O.jsxs)(\"div\",{children:[Object(O.jsxs)(\"form\",{onSubmit:this.onSubmit,action:\"/api/search/redirect\",children:[Object(O.jsxs)(\"div\",{className:\"form-group\",style:{position:\"relative\"},children:[Object(O.jsxs)(\"div\",{className:\"input-group input-group-lg\",children:[Object(O.jsx)(\"input\",{type:\"search\",ref:this.searchRef,name:\"q\",autoComplete:\"off\",value:this.state.q,onFocus:this.onFocusSearch,onBlur:this.onBlurSearch,onChange:this.onChangeSearch,onKeyDown:this.onKeyDownSearch,className:\"form-control\",maxLength:150,\"aria-label\":\"Lyrics search\",placeholder:this.state.placeholder}),Object(O.jsx)(\"span\",{className:\"input-group-btn\",children:Object(O.jsx)(\"button\",{className:\"btn btn-default btn-lg\",type:\"submit\",title:\"Click to search\",children:\"Search\"})})]}),this.state.searchMaxLength?Object(O.jsx)(fe,{length:this.state.searchMaxLength[0],maxLength:this.state.searchMaxLength[1]}):null,!(this.state.desperateSearch&&this.state.results&&this.state.results.length)||this.state.showAutocompleteSuggestions&&this.state.autocompleteSuggestions?null:Object(O.jsx)(xe,{}),this.state.desperateSearch||!this.state.missing||!this.state.results||!this.state.results.length||this.state.showAutocompleteSuggestions&&this.state.autocompleteSuggestions?null:Object(O.jsx)(Oe,{missing:this.state.missing}),this.state.autocompleteSuggestions&&this.state.showAutocompleteSuggestions?Object(O.jsx)(je,{q:this.state.q,onSelectSuggestion:this.onSelectSuggestion,onSelectSuggestionAll:this.onSelectSuggestionAll,highlight:this.state.autocompleteHighlight,suggestions:this.state.autocompleteSuggestions,searchSuggestions:this.state.autocompleteSearchSuggestions}):null]}),Object(O.jsx)(me,{results:this.state.results,total:this.state.total,byName:this.state.by_name,onlyResults:this.state.onlyResults}),l,u,this.state.shareSearch?Object(O.jsx)(he,{searched:this.searched}):null,d]}),Object(O.jsx)(\"div\",{id:\"waldo-tag-11815\",children:Object(O.jsxs)(\"script\",{children:['googletag.cmd.push(function() {\\n              googletag.display = \"waldo-tag-11815\";\\n            })',\";\"]})}),this.state.searchError?Object(O.jsx)(ye,{error:this.state.searchError}):null,this.state.showExamples?Object(O.jsx)(ve,{sampleSearch:this.sampleSearch,examples:this.state.searchExamples}):null,this.state.showRecentComments&&this.state.recentComments?Object(O.jsx)(ue,{comments:this.state.recentComments.comments}):null,i,b,a,this.state.searching?Object(O.jsx)(T,{text:\"Searching...\"}):null,r,this.state.slowSearch?Object(O.jsx)(Se,{reloadSearch:this.reloadSearch}):null]})}}]),n}(a.a.Component),le=ie,ue=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this.props.comments;return Object(O.jsxs)(\"div\",{className:\"recent-comments\",style:{marginTop:50},children:[Object(O.jsxs)(\"h4\",{children:[\"Recent Comments (\",Object(O.jsx)(o.b,{to:\"/comments\",children:\"All\"}),\")\"]}),Object(O.jsx)(ne,{comments:e,isRoot:!0}),Object(O.jsx)(\"div\",{className:\"load-more\",children:Object(O.jsx)(o.b,{to:\"/comments\",children:\"More recent comments\"})})]})}}]),n}(a.a.PureComponent),me=a.a.memo((function(e){var t=e.results,n=e.total,s=e.onlyResults,a=e.byName;if(!t)return null;var r=null;if(t){var c=a?a.length:0;r=s?s.length+c:t.length+c}return Object(O.jsxs)(\"p\",{className:\"result-metadata text-right\",children:[Object(O.jsxs)(\"b\",{children:[n>=1e4?\"More than \":\"\",n.toLocaleString(),\" \",1===n?\"song found\":\"songs found\"]}),\" \",r&&r<n?\"(showing \".concat(r,\")\"):null]})})),he=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={copied:!1,failed:!1,hasFocused:!1},e.absurlRef=a.a.createRef(),e}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this,t=window.location.href;return Object(O.jsxs)(\"div\",{className:\"form-group\",style:{marginTop:30},children:[Object(O.jsxs)(\"div\",{className:\"input-group\",children:[Object(O.jsx)(\"label\",{className:\"sr-only\",children:\"URL:\"}),Object(O.jsx)(\"input\",{ref:this.absurlRef,type:\"text\",className:\"form-control\",readOnly:!0,value:t,onFocus:function(){e.state.hasFocused||(e.absurlRef.current.select(),e.setState({hasFocused:!0}))}}),Object(O.jsx)(\"span\",{className:\"input-group-btn\",children:Object(O.jsx)(\"button\",{type:\"button\",className:this.state.copied?\"btn btn-success\":\"btn btn-primary\",title:\"Click to copy to clipboard\",onClick:function(n){n.preventDefault(),e.absurlRef.current.select(),g()(t)?e.setState({copied:!0,failed:!1},(function(){e.props.searched&&!e.copied&&(e.copied=e.props.searched,fetch(\"/api/search/copied/\".concat(e.props.searched),{method:\"POST\"}))})):e.setState({copied:!1,failed:!0})},children:this.state.copied?\"Copied to clipboard\":\"Copy to clipboard\"})})]}),this.state.copied?Object(O.jsx)(\"p\",{children:\"The URL to this search has now been copied to your clipboard so you can paste it anywhere. Thanks!\"}):null]})}}]),n}(a.a.PureComponent),de=a.a.memo((function(e){var t=e.phrases,n=e.submitPhrase,s=e.nothingFound,a=null;return s&&(a=1===t.length?Object(O.jsx)(\"h4\",{children:\"But, try this...\"}):Object(O.jsx)(\"h4\",{children:\"But, try these...\"})),Object(O.jsxs)(\"div\",{className:\"key-phrases\",children:[s?Object(O.jsx)(\"h3\",{children:\"Nothing found\"}):Object(O.jsx)(\"h3\",{children:\"Fuzzy results. Try breaking it up...\"}),a,Object(O.jsx)(\"table\",{className:\"table suggestions table-condensed\",children:Object(O.jsx)(\"tbody\",{children:t.map((function(e){var t=\"/q/\".concat(e.phrase);return e.year&&(t+=\"?year=\".concat(e.year)),Object(O.jsxs)(\"tr\",{children:[Object(O.jsx)(\"td\",{children:Object(O.jsx)(\"a\",{href:t,onClick:function(t){return n(t,e)},children:e.diff_html?Object(O.jsx)(\"span\",{dangerouslySetInnerHTML:{__html:e.diff_html}}):e.phrase})}),Object(O.jsxs)(\"td\",{children:[Object(O.jsx)(\"b\",{children:e.total}),\" \",1===e.total?\"song\":\"songs\"]})]},e.phrase)}))})})]})})),je=a.a.memo((function(e){var t=e.q,n=e.highlight,s=e.suggestions,a=e.searchSuggestions,r=e.onSelectSuggestion,c=e.onSelectSuggestionAll;return s.length?Object(O.jsx)(\"div\",{className:\"autocomplete\",children:Object(O.jsxs)(\"ul\",{children:[a&&t&&a.total?Object(O.jsxs)(\"li\",{onClick:c,className:0===n?\"active search-suggestion\":\"search-suggestion\",children:[a.capped?Object(O.jsxs)(\"a\",{style:{float:\"right\"},href:\"/q/\"+encodeURIComponent(a.term),children:[a.total.toLocaleString(),\" \",a.desperate?\"approximate matches\":\"good matches\"]}):null,Object(O.jsxs)(\"a\",{href:\"/q/\"+encodeURIComponent(a.term),children:[\"Search for \",Object(O.jsx)(\"i\",{children:t})]})]}):null,s.map((function(e,t){var s=t+1===n?\"active\":\"\";return Object(O.jsx)(\"li\",{className:s,onClick:function(t){return r(t,e)},children:e.id?Object(O.jsx)(pe,{song:e}):Object(O.jsx)(be,{text:e.text,html:e.html,found:e.found})},e.id?e.id:e.text)}))]})}):null})),be=a.a.memo((function(e){var t=e.found,n=e.html;return t?Object(O.jsxs)(\"p\",{className:\"search\",children:[Object(O.jsx)(\"small\",{children:t}),Object(O.jsx)(\"span\",{dangerouslySetInnerHTML:{__html:n}})]}):Object(O.jsx)(\"p\",{className:\"search\",dangerouslySetInnerHTML:{__html:n}})})),pe=a.a.memo((function(e){var t=e.song,n=re;return t.image&&(n=t.image.thumbnail100?t.image.thumbnail100:t.image.url),Object(O.jsxs)(\"div\",{className:\"media autocomplete-suggestion-song\",children:[Object(O.jsx)(\"div\",{className:\"media-left\",children:Object(O.jsx)(ke,{url:n,name:t.name})}),Object(O.jsxs)(\"div\",{className:\"media-body\",children:[Object(O.jsxs)(\"h5\",{className:\"artist-name\",children:[Object(O.jsx)(\"b\",{children:t.name}),Object(O.jsx)(\"span\",{className:\"by\",children:\" by \"}),t.artist.name]}),t.fragments.map((function(e,n){return Object(O.jsx)(\"p\",{dangerouslySetInnerHTML:{__html:e}},\"\".concat(t.id,\":\").concat(n))}))]})]})})),ge=a.a.memo((function(e){var t=e.highlight,n=e.suggestions,s=e.onSelectSuggestion;return n.length?Object(O.jsx)(\"div\",{className:\"autocomplete\",children:Object(O.jsx)(\"ul\",{children:n.map((function(e,n){var a=n===t?\"active\":\"\";return Object(O.jsx)(\"li\",{className:a,onClick:function(t){return s(t,e)},children:Object(O.jsxs)(\"div\",{className:\"media\",children:[Object(O.jsx)(\"div\",{className:\"media-left\",children:Object(O.jsx)(ke,{url:e.thumbnail100||e.image||re,name:e.text})}),Object(O.jsxs)(\"div\",{className:\"media-body\",children:[Object(O.jsx)(\"h5\",{className:\"artist-name\",dangerouslySetInnerHTML:{__html:e.html}}),Object(O.jsxs)(\"span\",{className:\"artist-metadata\",children:[e.songs?e.songs:\"0\",\" songs\"]})]})]})},\"\".concat(e.text).concat(n))}))})}):null}));function fe(e){var t=e.length,n=e.maxLength,s=\"help-block maxlength\";return t===n&&(s+=\" danger\"),Object(O.jsxs)(\"span\",{className:s,children:[t,\" of max \",n,\" characters!\"]})}function xe(){return Object(O.jsxs)(\"span\",{className:\"help-block warning\",children:[Object(O.jsx)(\"b\",{children:\"Note!\"}),\" Nothing could be found with that exact search. Showing fuzzy matches.\"]})}function Oe(e){var t=e.missing;return Object(O.jsxs)(\"span\",{className:\"help-block warning\",children:[Object(O.jsx)(\"b\",{children:\"Note!\"}),\" Results found by discarding\",\" \",Object(O.jsx)(\"i\",{style:{textDecoration:\"line-through\"},children:t}),\".\"]})}var ve=a.a.memo((function(e){var t=e.sampleSearch,n=e.examples;return Object(O.jsxs)(\"div\",{className:\"examples\",children:[Object(O.jsx)(\"h4\",{children:\"Successful searches for songs by lyrics\"}),Object(O.jsx)(\"ul\",{children:n.map((function(e){var n=\"/q/\"+encodeURIComponent(e.term);n+=\"?example=\".concat(e.id),e.artist&&(n+=\"&artist=\".concat(encodeURIComponent(e.artist))),e.language&&(n+=\"&language=\".concat(encodeURIComponent(e.language))),e.year&&(n+=\"&year=\".concat(e.year));var s=null,r=[];return e.artist&&r.push([\"artist\",e.artist]),e.language&&r.push([\"language\",e.language_human]),e.year&&r.push([\"year\",e.year]),r.length&&(s=Object(O.jsxs)(\"span\",{children:[\"(\",r.map((function(e,t){return Object(O.jsxs)(a.a.Fragment,{children:[e[0],\" \",Object(O.jsx)(\"b\",{children:e[1]}),t+1<r.length?\", \":\"\"]},e[0])})),\")\"]})),Object(O.jsxs)(\"li\",{children:[Object(O.jsx)(o.b,{to:n,onClick:function(n){return t(n,e)},children:Object(O.jsx)(\"b\",{children:e.term})}),\" \",s,\" \",Object(O.jsxs)(\"i\",{children:[e.total_found,\" found\"]}),Object(O.jsx)(\"br\",{}),e.opened.map((function(e){return Object(O.jsxs)(\"span\",{className:\"opened\",children:[\"clicked on\",\" \",Object(O.jsxs)(o.b,{to:e._url,children:[Object(O.jsx)(\"b\",{children:e.name}),\" by \",Object(O.jsx)(\"b\",{children:e.artist.name})]})]},e.id)}))]},e.id)}))})]})}));function Se(e){var t=e.reloadSearch;return Object(O.jsxs)(\"div\",{className:\"slow-search\",children:[Object(O.jsx)(\"h4\",{children:\"Sorry, search seems to take longer than normal!\"}),Object(O.jsxs)(\"p\",{children:[\"Perhaps it got stuck? \",Object(O.jsx)(\"br\",{}),Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-default btn-sm\",onClick:t,children:\"Reload search\"})]})]})}function ye(e){var t=e.error;return Object(O.jsxs)(\"div\",{className:\"search-error\",children:[Object(O.jsx)(\"h4\",{children:\"Sorry, an error occured\"}),400===t.status?Object(O.jsxs)(\"p\",{children:[\"The query was invalid \",Object(O.jsx)(\"code\",{children:t.text})]}):Object(O.jsx)(\"p\",{children:\"The server basically failed to compute the search\"}),t.status>=500&&Object(O.jsx)(\"p\",{children:\"Perhaps simply try again a little later.\"}),t.status>=500&&Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn-default\",onClick:function(e){window.location.reload(!0)},children:\"Reload to try again\"})})]})}var we=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).firstLoad=!0,e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){k||M(),this.firstLoad=!1}},{key:\"componentDidUpdate\",value:function(e){k||e.results===this.props.results||M()}},{key:\"render\",value:function(){var e=this,t=this.props,n=t.results,s=t.searched,a=t.popularityFactor,r=t.showYear;return Object(O.jsxs)(\"div\",{children:[ce?Object(O.jsx)(\"span\",{id:\"_nocardonads\"}):Object(O.jsx)(\"div\",{id:\"carbonadsouter\"}),Object(O.jsx)(\"div\",{className:\"results\",children:n.map((function(t,c){return Object(O.jsx)(Ce,{result:t,searched:s,expandedByDefault:1===n.length,firstResult:0===c,popularityFactor:a,firstLoad:e.firstLoad,showYear:r},t.id)}))})]})}}]),n}(a.a.PureComponent),Ce=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!0,itunes:null,amazon:null,textHtml:e.props.result.text_html},e.affiliateLookupStarted=[],e.onExpandClick=function(t){t.preventDefault(),e.expand()},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){this.props.expandedByDefault&&this.expand()}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"expand\",value:function(){var e=this,t=this.state.collapsed;this.setState({collapsed:!1}),this.fetchTextHTML().then((function(){if(t&&e.props.searched){var n=\"/api/song/\".concat(e.props.result.id,\"/\");n+=\"expand/\".concat(e.props.searched),fetch(n,{method:\"POST\"}).then((function(e){return e.json()})).then((function(e){}))}}))}},{key:\"fetchTextHTML\",value:function(){var e=this;if(this.state.textHtml)return Promise.resolve();var t=\"/api/song/\".concat(this.props.result.id,\"?text_only=true\");return fetch(t).then((function(e){return e.json()})).then((function(t){e.dismounted||e.setState({textHtml:t.song.text_html})}))}},{key:\"render\",value:function(){var e=this.props,t=e.result,n=(e.popularityFactor,e.firstResult),s=e.firstLoad,a=e.showYear,r=\"result\";this.state.collapsed&&(r+=\" collapsed\");var c,i=t._url;c=t.image?Object(O.jsx)(Ne,{url:t.image.url,className:\"pull-right img-thumbnail album\",name:t.image.name,forceLoad:n||!s}):Object(O.jsx)(Ne,{url:null,className:\"pull-right img-thumbnail\",name:t.artist.name,forceLoad:n||!s});var l=Object(O.jsxs)(\"p\",{className:\"read-more\",children:[Object(O.jsx)(o.b,{to:i,children:\"VIEW SONG\"}),\" \",Object(O.jsx)(o.b,{to:i,onClick:this.onExpandClick,children:\"EXPAND SONG\"})]});if(!this.state.collapsed){var u=null,m=null;try{m=localStorage.getItem(\"searched\")}catch(j){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\")}m&&(u=m.includes(\",\")?parseInt(m.split(\",\")[0],10):parseInt(m,10)),l=Object(O.jsx)(\"div\",{className:\"rest\",children:Object(O.jsxs)(\"div\",{className:\"text\",children:[Object(O.jsx)(\"h3\",{children:\"Full Text\"}),this.state.textHtml?Object(O.jsx)(q,{text:this.state.textHtml}):Object(O.jsx)(\"i\",{children:\"Loading full text...\"}),Object(O.jsx)(z,{comments:null,commentsCount:null,song:t,searchedId:u}),Object(O.jsx)(L,{song:t}),Object(O.jsx)(\"p\",{className:\"load-more\",children:Object(O.jsx)(o.b,{to:i,children:\"GO TO SONG PAGE\"})})]})})}var h,d=Object(O.jsx)(\"b\",{children:t.artist.name});return t.artist.fragment&&(d=Object(O.jsx)(\"b\",{dangerouslySetInnerHTML:{__html:t.artist.fragment}})),h=\"Click to view just this song\",Object(O.jsxs)(\"div\",{className:r,children:[Object(O.jsxs)(\"div\",{className:\"head\",children:[Object(O.jsx)(o.b,{to:i,children:c}),Object(O.jsxs)(\"h2\",{title:h,children:[Object(O.jsx)(o.b,{to:i,children:t.name}),a&&t.year&&Object(O.jsxs)(\"span\",{className:\"year\",children:[\" \",t.year]}),null]}),Object(O.jsxs)(\"h3\",{children:[Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",d]}),t.albums.length?Object(O.jsx)(Ae,{albums:t.albums}):null]}),Object(O.jsx)(\"div\",{className:\"fragments\",children:t.fragments.map((function(e,n){return Object(O.jsx)(\"p\",{dangerouslySetInnerHTML:{__html:e}},\"\".concat(t.id).concat(n))}))}),l]})}}]),n}(a.a.PureComponent),Ne=a.a.memo((function(e){var t=e.url,n=e.name,s=e.forceLoad,a=e.className;return t?Object(O.jsx)(\"img\",{src:t,className:a,title:n,alt:n,loading:s?void 0:\"lazy\"}):Object(O.jsx)(\"img\",{src:re,className:a,title:n,alt:n})}));k||((new Image).src=ae);var _e=new Set;function ke(e){var t=e.url,n=e.name,a=Object(s.useState)(_e.has(t)?t:ae),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(s.useEffect)((function(){var e=null,n=!1;if(c===ae){var s=function(){n||o(t),_e.add(t)};(e=new Image).src=t,e.decode?e.decode().then(s,s):e.onload=s,e.decoding=\"sync\"}return function(){e&&(e.src=\"\"),n=!0}}),[t,c]),t?Object(O.jsx)(\"img\",{className:\"img-rounded\",src:c,alt:n,title:n}):Object(O.jsx)(\"img\",{className:\"img-rounded\",src:ae,alt:n,title:n})}var Ee=a.a.memo((function(e){var t=e.results,n=e.total,s=e.limit,a=e.loadMoreByName;return Object(O.jsxs)(\"div\",{className:\"by-name\",children:[Object(O.jsx)(\"h4\",{children:\"Songs by name\"}),Object(O.jsx)(\"ul\",{children:t.map((function(e){return Object(O.jsx)(\"li\",{children:Object(O.jsxs)(o.b,{to:e._url,children:[Object(O.jsx)(\"b\",{dangerouslySetInnerHTML:{__html:e.fragment}}),\" by\",\" \",Object(O.jsx)(\"b\",{children:e.artist.name})]})},e.id)}))}),n>s?Object(O.jsx)(\"button\",{className:\"btn btn-default btn-sm\",onClick:a,children:n>20?\"Show more songs by name\":\"Show all (\".concat(n,\") songs by name\")}):null]})})),Ae=a.a.memo((function(e){var t=e.albums;return Object(O.jsx)(\"p\",{className:\"albums\",children:t.map((function(e,n){var s=[Object(O.jsx)(\"b\",{children:e.name},e.id)];return e.year&&s.push(\" (\".concat(e.year,\")\")),n+1<t.length&&s.push(\", \"),s}))})})),Ie=a.a.memo((function(e){var t=e.location,n=e.onLoadMore,s=t.pathname+t.search;return Object(O.jsx)(\"div\",{className:\"load-more\",children:Object(O.jsx)(\"a\",{href:s,onClick:n,children:\"LOAD MORE RESULTS\"})})})),Te=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={serverError:null,totals:e.props.totalStats&&e.props.totalStats.totals||null},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e=this;if(A({title:\"About - Song Search\"}),!this.state.totals)return x(\"/api/stats/totals-simple\").then((function(t){if(t.ok)return t.json().then((function(t){t&&e.setState({serverError:null,totals:t.totals})}));e.setState({serverError:t})}))}},{key:\"render\",value:function(){var e=this.state,t=e.serverError,n=e.totals;return Object(O.jsxs)(\"div\",{children:[Object(O.jsxs)(\"p\",{children:[\"Made by Peter Bengtsson\",Object(O.jsx)(\"br\",{}),\"For all inquires email \",Object(O.jsx)(\"a\",{href:\"mailto:info@songsear.ch\",children:\" info@songsear.ch\"})]}),t&&Object(O.jsx)(U,{}),n?Object(O.jsx)(Le,{numbers:n}):null]})}}]),n}(s.Component),Re=Te;function Le(e){var t=e.numbers;return Object(O.jsxs)(\"div\",{className:\"numbers\",children:[Object(O.jsxs)(\"p\",{children:[\"There are currently\",\" \",Object(O.jsxs)(\"b\",{children:[Object(O.jsx)(R,{value:t.songs}),\" songs\"]}),\" \",\"to search amongst\",\" \",Object(O.jsxs)(\"b\",{children:[Object(O.jsx)(R,{value:t.artists}),\" artists\"]}),\" \",\"in\",\" \",Object(O.jsxs)(\"b\",{children:[Object(O.jsx)(R,{value:t.albums}),\" albums\"]}),\".\"]}),Object(O.jsxs)(\"p\",{children:[\"In total\",\" \",Object(O.jsxs)(\"b\",{children:[Object(O.jsx)(R,{value:t.searches}),\" searches\"]}),\" \",\"have been made.\"]})]})}var De=function(){Object(s.useEffect)((function(){document.title=\"Privacy Policy of Song Search\"}));var e=Object(_.a)(\"\".concat(\"\",\"/static/privacy-policy-text.html\"),function(){var e=Object(y.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=6;break}throw new Error(\"\".concat(n.status,\" on \").concat(t));case 6:return e.next=8,n.text();case 8:return e.abrupt(\"return\",e.sent);case 9:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1}),t=e.data;return e.error?Object(O.jsx)(U,{}):Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"h2\",{children:\"Privacy Policy\"}),t?Object(O.jsx)(\"div\",{dangerouslySetInnerHTML:{__html:t}}):Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"i\",{children:\"Loading privacy policy text...\"})})]})},Fe=(n(51),\"true\"===Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NO_ADS),Pe=function(e){return Object(s.useEffect)((function(){void 0===window.cf_async&&(window.cf_async=!1),document.getElementById(\"inject_ad\");var t=Math.floor(999999999*Math.random()),n={artist:e.Artistname,song:e.Songname,adunit_id:100004858,div_id:\"cf_async_\"+t},s=document.createElement(\"div\");s.setAttribute(\"id\",n.div_id),document.getElementById(\"inject_ad\").parentNode.setAttribute(\"id\",\"ad_\"+t),document.getElementById(\"ad_\"+t).appendChild(s);var a=function(){cf.showAsyncAd(n)};if(\"undefined\"!==typeof window.cf)a();else{cf_async=!0;var r=document.createElement(\"script\"),c=document.getElementsByTagName(\"script\")[0];r.async=!0,r.src=\"//srv.tunefindforfans.com/fruits/apricots.js\",r.readyState?r.onreadystatechange=function(){\"loaded\"!=r.readyState&&\"complete\"!=r.readyState||(r.onreadystatechange=null,a())}:r.onload=a,c.parentNode.insertBefore(r,c)}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(\"div\",{id:\"inject_ad\"})})},He=function(e){return Object(s.useEffect)((function(){void 0===window.ddcf_async&&(window.ddcf_async=!1),document.getElementById(\"inject_cf_ad\");var t=Math.floor(999999999*Math.random()),n={artist:e.Artistname,song:e.Songname,adunit_id:100005466,flex:!0,div_id:\"cf_async_add_\"+t},s=document.createElement(\"div\");s.setAttribute(\"id\",n.div_id),document.getElementById(\"inject_cf_ad\").parentNode.setAttribute(\"id\",\"cf_ad_\"+t),document.getElementById(\"cf_ad_\"+t).appendChild(s);var a=function(){cf.showAsyncAd(n)};if(\"undefined\"!==typeof window.cf)a();else{cf_async=!0;var r=document.createElement(\"script\"),c=document.getElementsByTagName(\"script\")[0];r.async=!0,r.src=\"//srv.tunefindforfans.com/fruits/apricots.js\",r.readyState?r.onreadystatechange=function(){\"loaded\"!=r.readyState&&\"complete\"!=r.readyState||(r.onreadystatechange=null,a())}:r.onload=a,c.parentNode.insertBefore(r,c)}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(\"div\",{id:\"inject_cf_ad\"})})},Me=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={song:e.props.song||null,loading:!1,notFound:e.props.songNotFound||!1,serverError:null},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e=this.props.match,t=parseInt(e.params.id,10);this.state.song&&this.state.song.id===t||this.props.songNotFound||this.loadSong(t)}},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"componentDidUpdate\",value:function(e){var t=this;this.props.match.params.id!==e.match.params.id&&this.setState({song:null,loading:!1,notFound:!1,serverError:null},(function(){try{localStorage.removeItem(\"searched\")}catch(e){console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\")}t.loadSong(t.props.match.params.id)}))}},{key:\"loadSong\",value:function(e){var t=this;A({title:\"Loading... - Song Search\"}),k||(this.showLoadingSoon=window.setTimeout((function(){t.dismounted||t.state.serverError||t.state.notFound||t.state.song||t.state.loading||t.setState({loading:!0})}),500));var n=\"/api/song/\".concat(e),s=null;try{s=localStorage.getItem(\"searched\")}catch(r){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\")}if(s){if(s.includes(\",\")){var a=parseInt(s.split(\",\")[1],10);s=((new Date).getTime()-a)/1e3>3600?null:s.split(\",\")[0]}s&&(n+=\"?searched=\".concat(encodeURIComponent(s)))}return x(n).then((function(e){if(!k&&t.showLoadingSoon&&window.clearTimeout(t.showLoadingSoon),400===e.status)return e.json().then((function(e){t.setState({loading:!1}),e.error&&\"redirected\"===e.error?k?t.setState({notFound:!0}):document.location.href=e.new_url:t.setState({serverError:!0})}));if(404===e.status)t.setState({loading:!1,notFound:!0}),A({title:\"Not Found\"});else{if(500!==e.status)return e.json().then((function(e){return e&&!e.error?t.renderResult(e):e&&e.error&&console.log(\"ERROR:\",e.error),e}));t.setState({loading:!1,serverError:!0}),A({title:\"Song loading error :(\"})}}))}},{key:\"renderResult\",value:function(e){var t=\"\".concat(e.song.name,\" lyrics by \").concat(e.song.artist.name);k||A({title:t,image:e.song.image}),this.setState({loading:!1,song:e.song})}},{key:\"render\",value:function(){var e=this.state,t=e.loading,n=e.song,s=e.serverError,a=e.notFound;return Object(O.jsxs)(\"div\",{children:[t&&Object(O.jsx)(T,{text:\"Loading...\"}),n&&Object(O.jsx)(qe,{song:n}),s&&!n&&Object(O.jsx)(U,{}),a&&Object(O.jsx)(Ke,{})]})}}]),n}(a.a.Component);function qe(e){var t,n=e.song;if(!k){var s=null;try{s=localStorage.getItem(\"searched\")}catch(c){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\")}s&&(t=s.includes(\",\")?parseInt(s.split(\",\")[0],10):parseInt(s,10))}var a=null,r=null;return n.comments&&(a=n.comments.comments,r=n.comments.comments_count),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(\"div\",{className:\"header-add\",children:Object(O.jsx)(He,{Songname:n.name,Artistname:n.artist.name})}),Object(O.jsxs)(\"div\",{className:\"result song oka\",children:[Object(O.jsx)(Ye,{song:n}),Object(O.jsx)(q,{song:n.id,text:n.text_html}),!Fe&&Object(O.jsx)(Be,{song:n}),Object(O.jsx)(z,{comments:a,commentsCount:r,song:n,searchedId:t}),Object(O.jsx)(Ue,{song:n}),Object(O.jsx)(L,{song:n}),k?null:Object(O.jsx)(H,{render:function(){return Object(O.jsx)(F,{song:n})}}),k?null:Object(O.jsx)(H,{render:function(){return Object(O.jsx)(P,{song:n})}}),k?null:Object(O.jsx)(We,{song:n})]})]})}function Be(e){var t=e.song;return Object(s.useEffect)((function(){!function(e){var t=e.song,n=e.artist,s=document.getElementById(\"amplifiedouter\");if(s&&!s.querySelector(\"script\")){window.amplified=window.amplified||{init:[]},window.amplified.init.push((function(){amplified.setParams({artist:n,song:t}),amplified.pushAdUnit(100003500),amplified.run()}));var a=document.createElement(\"script\");a.id=\"_amplified_js\",a.src=\"https://srv.clickfuse.com/ads/ads.js\",a.async=!0,s.appendChild(a)}}({song:t.name,artist:t.artist.name})}),[t]),Object(O.jsx)(\"div\",{id:\"amplifiedouter\",children:Object(O.jsx)(\"div\",{id:\"amplified_100003500\"})})}function Ue(e){var t=e.song,n=Object(s.useState)(!1),a=Object(i.a)(n,2),r=a[0],c=a[1],o=Object(s.useState)(!1),l=Object(i.a)(o,2),u=l[0],m=l[1],h=Object(s.useState)(null),d=Object(i.a)(h,2),j=d[0],b=d[1];return Object(s.useEffect)((function(){navigator.share&&c(!0)}),[]),r?Object(O.jsxs)(\"div\",{style:{margin:\"30px 0\",textAlign:\"center\"},children:[Object(O.jsx)(\"button\",{className:\"btn btn-primary\",onClick:function(){var e={title:t.name,text:\"I found '\".concat(t.name,\"' on Song Search!\"),url:window.location.href};try{navigator.share(e).then((function(){m(!0),b(null)})).catch((function(e){b(e)})).finally((function(){fetch(\"/api/song/\".concat(t.id,\"/shared/\"),{method:\"POST\"})}))}catch(n){b(n)}},children:u?\"Thanks!\":\"Share this song\"}),j&&Object(O.jsx)(\"p\",{children:\"Sharing failed or was canceled. Oh well.\"})]}):null}var Ye=a.a.memo((function(e){var t=e.song,n=null;n=t.image?Object(O.jsx)(\"img\",{src:t.image.url,alt:t.image.name,className:\"song-picture\"}):Object(O.jsx)(\"img\",{src:\"/static/placeholder.png\",alt:t.artist.name,width:150,height:150});var s=null;if(t.albums.length){var a=t.albums.map((function(e){return e.year?\"\".concat(e.name,\" (\").concat(e.year,\")\"):e.name})).join(\", \");s=Object(O.jsxs)(\"h3\",{children:[Object(O.jsx)(\"span\",{className:\"by\",children:\"on\"}),\" \",a]})}return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(\"div\",{className:\"text-center last\",children:[n,Object(O.jsx)(\"h2\",{className:\"\",children:t.name}),Object(O.jsxs)(\"h3\",{children:[Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",t.artist.name]}),s,Object(O.jsx)(Pe,{Songname:t.name,Artistname:t.artist.name})]})})})),We=a.a.memo((function(e){var t=e.song,n=Object(s.useState)(null),r=Object(i.a)(n,2),c=r[0],o=r[1],l=Object(s.useState)(!1),u=Object(i.a)(l,2),m=u[0],h=u[1],d=a.a.useRef(!1);Object(s.useEffect)((function(){m&&c&&h(!1)}),[c,m]);var j=Object(s.useRef)();function b(){j.current||(j.current=(new Date).getTime(),function(){var e=\"/api/song/\".concat(t.id,\"/related\");x(e).then((function(e){e.ok&&e.json().then((function(e){e&&e.categories&&o(e.categories)}))}))}())}return Object(s.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]),c?c.length?Object(O.jsx)(\"div\",{className:\"related\",children:c.map((function(e){return Object(O.jsx)(ze,{label:e.label,songs:e.results},e.label)}))}):null:m?null:Object(O.jsx)(N.a,{onEnter:function(){c||m||b()}})}));function ze(e){var t=e.label,n=e.songs;return Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"h4\",{children:t}),Object(O.jsx)(\"ul\",{children:n.map((function(e){return Object(O.jsx)(\"li\",{children:Object(O.jsxs)(o.b,{to:e._url,children:[Object(O.jsx)(\"b\",{children:e.name}),\" \",Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",e.artist.name]})},e.id)}))})]})}function Ke(){return Object(O.jsxs)(\"div\",{className:\"not-found\",children:[Object(O.jsx)(\"h3\",{children:\"Song Not Found\"}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"img\",{alt:\"Skull\",src:\"/static/skull.png\"})}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Try another search\"})})]})}var Ge=Me,Ve=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={error:null,submittedErrorId:null},e}return Object(m.a)(n,[{key:\"componentDidCatch\",value:function(){var e=Object(y.a)(S.a.mark((function e(t,n){var s,a,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=new FormData).append(\"error\",t.toString()),s.append(\"error_info\",JSON.stringify(n)),s.append(\"url\",document.location.href),s.append(\"stack\",t.stack);try{localStorage.getItem(\"searched\")&&s.append(\"searched\",localStorage.getItem(\"searched\")),localStorage.getItem(\"commentEmail\")&&s.append(\"commentEmail\",localStorage.getItem(\"commentEmail\"))}catch(o){console.log(\"Unable to extract localStorage keys\")}return e.prev=6,e.next=9,fetch(\"/api/errorboundary\",{method:\"POST\",body:s});case 9:if(!(a=e.sent).ok){e.next=18;break}return e.next=13,a.json();case 13:r=e.sent,c=r.id,this.setState({submittedErrorId:c}),e.next=20;break;case 18:console.log(\"Bad response trying to store error boundary.\"),console.error(a);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),console.log(\"Unable to send error info to server.\"),console.error(e.t0);case 26:case\"end\":return e.stop()}}),e,this,[[6,22]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){return this.state.error?Object(O.jsxs)(\"div\",{style:{textAlign:\"center\"},children:[Object(O.jsx)(\"h3\",{style:{color:\"#b12704\"},children:\"Application Error\"}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"img\",{alt:\"Skull\",src:\"/static/skull.png\"})}),Object(O.jsxs)(\"p\",{children:[Object(O.jsx)(\"b\",{children:\"Soooo sorry!\"}),Object(O.jsx)(\"br\",{}),\"It appears the application encountered a crash trying to render this page.\",Object(O.jsx)(\"br\",{}),\"Please try again later or \",Object(O.jsx)(\"a\",{href:\"/\",children:\"try another search\"}),\".\"]}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"b\",{children:Object(O.jsx)(\"a\",{href:\"/\",children:\"Return to home page\"})})}),this.state.submittedErrorId&&Object(O.jsxs)(\"p\",{children:[\"Your error has been submitted to our server. \",Object(O.jsx)(\"br\",{}),\"Submission ID: \",Object(O.jsx)(\"code\",{children:this.state.submittedErrorId})]})]}):this.props.children}}],[{key:\"getDerivedStateFromError\",value:function(e){return{error:e}}}]),n}(a.a.Component),Je=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,comment:null,muted:!1,notFound:!1,serverError:null},e}return Object(m.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(y.a)(S.a.mark((function e(){var t,n,s,a,r=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A({title:\"Mute Comment - Song Search\"}),window.setTimeout((function(){var e=r.state,t=e.comment,n=e.loading,s=e.notFound,a=e.serverError;r.dismounted||t||n||s||a||r.setState({loading:!0})}),1e3),t=new FormData,n=this.props.match,t.append(\"oid\",n.params.oid),t.append(\"id\",n.params.id),e.prev=6,e.next=9,fetch(\"/api/comments/mute\",{method:\"POST\",body:t});case 9:s=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),this.setState({serverError:e.t0,loading:!1});case 15:if(!s.ok){e.next=22;break}return e.next=18,s.json();case 18:a=e.sent,this.setState({comment:a.comment,muted:!0,notFound:!1,loading:!1,serverError:null},(function(){A({title:\"Comment Muted - Song Search\"})})),e.next=23;break;case 22:400===s.status?this.setState({comment:null,notFound:!0,loading:!1,serverError:null},(function(){A({title:\"Comment Not Found - Song Search\"})})):this.setState({serverError:s,loading:!1});case 23:case\"end\":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}()},{key:\"componentWillUnmount\",value:function(){this.dismounted=!0}},{key:\"render\",value:function(){var e=this.state,t=e.loading,n=e.comment,s=e.muted,a=e.notFound,r=e.serverError;return t?Object(O.jsx)(T,{text:\"One sec...\"}):r?Object(O.jsx)(U,{}):Object(O.jsxs)(\"div\",{children:[s&&Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"h2\",{children:\"Comment Muted\"}),Object(O.jsx)(\"p\",{children:\"You will not receive any more email notifications to replies on this comment.\"}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Go back to the Home page\"})})]}),a&&Object(O.jsx)($e,{}),n&&Object(O.jsx)(Xe,{comment:n})]})}}]),n}(a.a.Component),Qe=Je;function $e(){return Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"h2\",{children:\"Comment Not Found\"}),Object(O.jsx)(\"p\",{children:\"Sorry, but the instructions to mute this particular comment could not be found.\"}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Go back to the Home page\"})})]})}function Xe(e){var t=e.comment;return Object(O.jsxs)(\"div\",{style:{marginTop:70},children:[t.song&&Object(O.jsxs)(\"h4\",{style:{marginBottom:20},children:[\"Song:\",\" \",Object(O.jsxs)(\"a\",{href:\"\".concat(t.song._url,\"#c\").concat(t.id),children:[Object(O.jsx)(\"b\",{children:t.song.name}),\" \",Object(O.jsx)(\"span\",{className:\"by\",children:\"by\"}),\" \",Object(O.jsx)(\"b\",{children:t.song.artist.name})]})]}),Object(O.jsx)(\"h4\",{children:\"Comment:\"}),Object(O.jsx)(\"blockquote\",{dangerouslySetInnerHTML:{__html:t.text_rendered}}),Object(O.jsxs)(\"p\",{children:[\"Posted \",Object(O.jsx)(B,{date:t.created})]})]})}function Ze(e){var t=e.location;return Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(\"h2\",{children:\"Page Not Found\"}),Object(O.jsxs)(\"h3\",{children:[\"No match for \",Object(O.jsx)(\"code\",{children:t.pathname})]})]})}var et=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:\"render\",value:function(){var e=this.props,t=e.song,n=e.related,s=e.songNotFound,a=e.results,r=e.totalStats,c=e.searchExamples,i=e.recentComments,u=e.recentCommentsHomepage,m=!1;return k?t&&(m=!0):/\\/song\\//.test(window.location.pathname)&&(m=!0),Object(O.jsxs)(\"div\",{children:[Object(O.jsxs)(\"div\",{className:\"container\",children:[Object(O.jsxs)(\"div\",{className:\"page-header\",children:[Object(O.jsx)(\"h1\",{children:Object(O.jsx)(o.b,{to:\"/\",children:\"Song Search\"})}),m?Object(O.jsx)(\"h5\",{className:\"home-link\",children:Object(O.jsx)(o.b,{to:\"/\",children:\"Try another search\"})}):Object(O.jsx)(st,{})]}),Object(O.jsx)(\"div\",{className:\"container children\",children:Object(O.jsx)(Ve,{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:\"/\",render:function(e){return Object(O.jsx)(le,Object(l.a)(Object(l.a)({},e),{},{searchExamples:c,recentComments:u}))}}),Object(O.jsx)(j.b,{path:\"/q/:q\",render:function(e){return Object(O.jsx)(le,Object(l.a)(Object(l.a)({},e),{},{results:a}))}}),Object(O.jsx)(j.b,{path:\"/song/:artist/:name/:id\",render:function(e){return Object(O.jsx)(Ge,Object(l.a)(Object(l.a)({},e),{},{song:t,related:n,songNotFound:s}))}}),Object(O.jsx)(j.b,{path:\"/about\",render:function(e){return Object(O.jsx)(Re,Object(l.a)(Object(l.a)({},e),{},{totalStats:r}))}}),Object(O.jsx)(j.b,{path:\"/privacy\",component:De}),Object(O.jsx)(j.b,{path:\"/comments\",exact:!0,render:function(e){return Object(O.jsx)(te,Object(l.a)(Object(l.a)({},e),{},{recentComments:i}))}}),Object(O.jsx)(j.b,{path:\"/comments/p:page\",render:function(e){return Object(O.jsx)(te,Object(l.a)(Object(l.a)({},e),{},{recentComments:i}))}}),Object(O.jsx)(j.b,{path:\"/mute/:oid/:id\",render:function(e){return Object(O.jsx)(Qe,Object(l.a)({},e))}}),Object(O.jsx)(j.b,{component:Ze})]})})})]}),Object(O.jsx)(\"footer\",{className:\"footer\",children:Object(O.jsx)(\"div\",{className:\"container\",children:Object(O.jsxs)(\"p\",{className:\"text-muted\",children:[Object(O.jsx)(o.b,{to:\"/\",children:\"Home\"}),\" \\u2022 \",Object(O.jsx)(o.b,{to:\"/comments\",children:\"Recent comments\"}),\" \\u2022 \",Object(O.jsx)(o.b,{to:\"/about\",children:\"About this site\"}),\" \\u2022 \",Object(O.jsx)(o.b,{to:\"/privacy\",children:\"Privacy Policy\"}),null]})})})]})}}]),n}(a.a.Component),tt=et,nt=[\"I'm looking for a song that I heard.\",\"I'm looking for a song I don't know the name of.\",\"I'm looking for a song that goes like this.\",\"Looking for a song I don't know the name of.\",\"Find me a song by lyrics.\"];function st(){var e=Object(s.useState)(nt[0]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){var e=!1;return function t(){setTimeout((function(){if(!e){var s=(nt.indexOf(n)+1)%nt.length;a(nt[s]),t()}}),1e4)}(),function(){e=!0}}),[n]),Object(O.jsxs)(\"h5\",{children:[\"\\u201c\",n,\"\\u201d\"]})}!function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=[e[n],e[t]];e[t]=s[0],e[n]=s[1]}}(nt);var at=Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){\"installed\"===n.state&&(navigator.serviceWorker.controller?(console.log(\"New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA.\"),t&&t.onUpdate&&t.onUpdate(e)):(console.log(\"Content is cached for offline use.\"),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error(\"Error during service worker registration:\",e)}))}n(52),n(53),n(54),n(55),n(56),n(57);var ct=document.getElementById(\"root\"),ot=Object(O.jsx)(o.a,{children:Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(tt,{song:window.__song__,related:window.__related__,results:window.__results__,songNotFound:window.__songNotFound__,totalStats:window.__totalStats__,searchExamples:window.__searchExamples__,recentComments:window.__recentComments__,recentCommentsHomepage:window.__recentCommentsHomepage__})})});ct.firstElementChild?\"https://translate.googleusercontent.com\"!==window.origin&&c.a.hydrate(ot,ct):c.a.render(ot,ct),function(e){if(\"serviceWorker\"in navigator){if(new URL(\"\",window.location.href).origin!==window.location.origin)return;window.addEventListener(\"load\",(function(){var t=\"\".concat(\"\",\"/service-worker.js\");at?(!function(e,t){fetch(e,{headers:{\"Service-Worker\":\"script\"}}).then((function(n){var s=n.headers.get(\"content-type\");404===n.status||null!=s&&-1===s.indexOf(\"javascript\")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):rt(e,t)})).catch((function(){console.log(\"No internet connection found. App is running in offline mode.\")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA\")}))):rt(t,e)}))}}()}},[[58,1,2]]]);","name":"static/js/main.8de1a7a5.chunk.js","map":{"version":3,"sources":["static/js/main.8de1a7a5.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","react_router_dom","slicedToArray","objectSpread2","classCallCheck","createClass","inherits","createSuper","react_router","esm","copy_to_clipboard","copy_to_clipboard_default","_cache","cachedFetch","url","options","cached","undefined","response","window","Response","Blob","Promise","resolve","err","console","log","fetch","then","status","ct","headers","get","match","clone","text","content","jsx_runtime","p","regenerator","regenerator_default","asyncToGenerator","lib","lib_default","es","swr_esm","isServer","document","defaultHTMLHeaders","title","image","querySelector","SetHTMLHeaders","_ref","_ref$image","warn","ogtitle","itemtitle","img","ResetHTMLHeaders","Common_Loading","_ref2","Object","className","children","FormattedNumber","_ref3","value","toLocaleString","AmazonRelatedProducts","_ref4","song","_useState","_useState2","result","setResult","_useState3","_useState4","page","setPage","_useState5","_useState6","loadingMore","setLoadingMore","mounted","concat","id","ok","json","items","length","total","map","item","AmazonRelatedItem","asin","ASIN","style","textAlign","onClick","disabled","_ref5","detail_page_url","_ref6","productTypeInfo","ItemAttributes","ProductGroup","Binding","href","URL","target","rel","src","SmallImage","alt","Title","Creator","ListPrice","FormattedPrice","old__AmazonRelatedItem","product_group","binding","loading","image_small","image_medium","contributor","price","release_date","SpotifySnippet","_ref7","_ref7$compact","compact","_useSWR","_ref8","a","mark","_callee","wrap","_context","prev","next","sent","Error","abrupt","stop","_x","apply","arguments","revalidateOnFocus","data","embed_url","width","height","frameBorder","allowtransparency","allow","Common_YouTubeSnippet","_React$PureComponent","YouTubeSnippet","_super","_this","_len","args","Array","_key","call","state","snippet","searched","clicked","onClickThumbnail","event","preventDefault","setState","key","_this2","props","dismounted","media","_this$state","videoId","containerDiv","offsetWidth","allowFullScreen","thumbnail","thumbnails","medium","_containerDiv","high","PureComponent","IntersectionLazy","_ref9","render","_useState7","_useState8","entered","setEntered","onEnter","loadCarbonScript","carbonParent","getElementById","script","createElement","async","appendChild","RenderParagraphs","memo","_ref11","dangerouslySetInnerHTML","__html","CustomTimeAgo","minPeriod","formatter","unit","suffix","epochSeconds","nextFormatter","ServerError","to","Helmet","SUBMITTED_COMMENTS_STORAGE_KEY","Comments_SongComments","SongComments","loadingComments","savingComment","serverError","submissionError","comments","commentsCount","submittedComments","commentSubmitted","commentEdited","commentDeleted","searchedId","replyComment","editComment","csrfToken","highlightComment","highlitComment","hasCommented","loadCSRFToken","csrf_token","catch","error","loadComments","_this$props","search","submittedCommentIds","filter","submission","forEach","includes","comments_count","consolidateSubmittedComments","removeSubmittedComments","recurse","comment","not_approved","submittedComment","newSubmittedComments","sessionStorage","setItem","JSON","stringify","ex","removeItem","setTimeout","submitCommentHandler","_submitCommentHandler","_this$props2","_this$state2","formData","FormData","append","name","email","oid","askedWasSearchedFor","wasSearchedFor","parent","experiment","method","body","localStorage","submitted","querySelectorAll","scrollIntoView","behavior","_this$props3","slice","o","toPush","t0","deleteCommentHandler","_deleteCommentHandler","_callee2","_context2","filteredSubmittedComments","_x2","setEditComment","setReplyComment","clearCommentSubmitted","clearCommentEdited","clearCommentDeleted","submittedCommentStorage","getItem","parse","some","location","hash","re","parseInt","element","prevProps","_this$state3","type","language","artist","ShowCommentDeleted","Comments_ShowComments","ShowCommentSubmitted","role","ShowCommentEdited","ShowSubmissionError","errorMessage","validationErrors","setValidationErrors","isErrorResponse","errors","keys","message","code","toString","_React$PureComponent2","ShowComments","_super2","_this$props4","Comments_ShowCommentsRecursive","allComments","Comments_CommentForm","replyingComment","_React$PureComponent3","ShowCommentsRecursive","_super3","_this3","_len2","_key2","confirmDelete","_this4","_this$props5","canEdit","c","canReply","replies","editingComment","margin","focusOnMount","Comments_DisplayComment","highlit","_React$PureComponent4","CommentForm","_super4","_this5","_len3","_key3","showNameEmailInputs","canSubmit","warnAboutName","textareaRef","createRef","clearComment","preview","submitHandler","_this5$state","_this5$props","trim","askWasSearchedFor","getTextareaRows","minimum","maximum","linebreaks","Math","min","max","_this5$props2","update","_this$state4","current","focus","_this6","_this$state5","_this$props6","onSubmit","ShowSavingStatus","marginBottom","onChange","e","rows","ref","onBlur","htmlFor","placeholder","_React$PureComponent5","DisplayComment","_super5","_this$props7","created","notApproved","text_rendered","date","hasOwnProperty","was_searched_for","emojis","emoji","floor","random","getRandomCelebration","src_RecentComments","recentComments","mountedRef","setServerError","setData","getPage","fetchComments","pageInt","showLoading","setShowLoading","pagination","next_page","Pagination","previous","ShowRecentComments","isRoot","previousSong","previousChronological","imageLink","_url","thumbnail100","geoString","geo","city","country","chronologicalDiff","rating","chronological","approved_human","score","lazyloadThumbnailImage","placeholderImage","NO_ADS","NODE_ENV","PUBLIC_URL","WDS_SOCKET_HOST","WDS_SOCKET_PATH","WDS_SOCKET_PORT","FAST_REFRESH","REACT_APP_NO_ADS","samplePlaceholders","sort","Date","getTime","Home_Home","_React$Component","Home","_props","artistRef","languageRef","searchRef","startSearchFromLocation","q","decodeURIComponent","params","sp","URLSearchParams","year","searchExample","stateUpdate","maxLength","searchMaxLength","loadSearchAggregates","advancedSearch","searchLanguage","searchYear","artistName","startSearch","resultsPageIndex","onFocusSearch","clearInterval","placeholderSampleInterval","fillerInterval","showAutocompleteSuggestions","shareSearch","_firstFocusSearch","innerHeight","onBlurSearch","setNextSamplePlaceholder","startSamplePlaceholderInterval","onFocusArtist","showAutocompleteArtistSuggestions","onBlurArtist","sampleSearch","term","searchLanguages","searchYears","submitSearch","_fetchSearchAlternatives","parentSearch","results","keyPhrases","key_phrases","onChangeSearch","desperateSearch","originalQ","autocompleteWaitingFor","endsWith","fetchAutocompleteSuggestionsThrottled","fetchAutocompleteSuggestionsDebouncedLong","fetchAutocompleteSuggestionsDebounced","autocompleteSuggestions","autocompleteSearchSuggestions","autocompleteHighlight","onKeyDownSearch","suggestions","highlight","suggestion","fetchAutocompleteSuggestions","searchSuggestions","redirectTo","pathname","onKeyDownArtistSearch","autocompleteArtistSuggestions","autocompleteArtistHighlight","fetchAutocompleteArtistSuggestions","toggleShareSearch","toggleAdvancedSearch","withCountsLanguages","x","count","withCountsYears","onChangeLanguage","onChangeYear","onChangeArtistName","onSelectSuggestion","newText","split","pop","join","appendSuggestion","onSelectSuggestionAll","onSelectArtistSuggestion","onLoadMore","submitPhrase","keyPhrase","phrase","reloadSearch","reload","loadMoreByName","previousByNameLimit","by_name_limit","by_name_total","encodeURIComponent","by_name","displayYears","yearEnd","currentYear","getFullYear","_q","_artistName","searchResults","desperate","missing","_searchLanguage","_searchYear","popularityFactor","_searchExample","_results","original","search_example","Boolean","searchExamples","showExamples","examples","showRecentComments","searching","searchError","slowSearch","onlyResults","_autocompleteSuggestionsCache","fetchSearchExamples","fetchRecentComments","stopSamplePlaceholderInterval","slowSearchTimer","clearTimeout","currentPlaceholder","setInterval","el","substring","newURL","currentURL","history","blur","sendSearch","_this7","allResults","popularity_factor","_this8","cacheHash","matches","search_suggestions","startsWith","_this9","_this10","languages","years","_this11","onlyIds","row","Home_Results","showYear","Home_Pagination","byName","SongsByName","limit","searchToggles","advancedSearchStatus","parts","advancedInput","position","onFocus","onKeyDown","ShowAutocompleteArtistSuggestions","each","ShowKeyPhrases","nothingFound","phrases","action","autoComplete","ShowMaxlengthWarning","ShowDesperateSearchWarning","ShowMissingSearchWarning","ShowAutocompleteSuggestions","ShowResultCount","Home_ShareInput","SearchError","ShowExamples","Home_ShowRecentCommentsWrapper","SlowSearch","Component","src_Home","ShowRecentCommentsWrapper","marginTop","countResults","byNameCount","ShareInput","_this12","copied","failed","hasFocused","absurlRef","_this13","absoluteUrl","readOnly","select","subTitle","diff_html","capped","float","s","index","ShowAutocompleteSuggestionSong","ShowAutocompleteSuggestion","html","found","imageUrl","AutocompleteImage","fragments","fragment","i","songs","textDecoration","link","searchMeta","searchMetaStrings","language_human","Fragment","total_found","opened","_ref10","Results","_this14","firstLoad","_this15","Home_Result","expandedByDefault","firstResult","Result","_this16","collapsed","itunes","amazon","textHtml","text_html","affiliateLookupStarted","onExpandClick","expand","_this17","wasCollapsed","fetchTextHTML","recordURL","_this18","songURL","SongImage","forceLoad","rest","tooltipTitle","albums","Albums","_ref12","Image","loadedOnce","Set","_ref13","has","setSrc","preloadImg","cb","add","decode","onload","decoding","_ref15","_ref16","album","_ref17","About_About","_Component","About","totals","totalStats","ShowNumbers","numbers","src_About","artists","searches","src_PrivacyPolicy","Song_NO_ADS","Song_AdTag","cf_async","unique_part","opts","Artistname","Songname","adunit_id","div_id","cf_div","setAttribute","parentNode","cf","showAsyncAd","getElementsByTagName","readyState","onreadystatechange","insertBefore","Song_Songhead","ddcf_async","unique_part_add","arr","flex","cf_add","Song_Song","Song","notFound","songNotFound","loadSong","showLoadingSoon","timestamp","new_url","renderResult","Song_Result","NotFound","RenderSongHead","AmplifiedSnippet","ShareSong","ShowRelated","amplified","init","setParams","pushAdUnit","run","loadAmplifiedScript","showShare","setShowShare","shared","setShared","shareError","setShareError","navigator","share","shareData","finally","albumNames","related","setRelated","_useState9","_useState10","setLoading","useRef","_started","loadRelatedDebounced","categories","loadRelated","category","ShowRelatedGroup","label","src_Song_0","ErrorBoundaries_AppErrorBoundary","AppErrorBoundary","submittedErrorId","_componentDidCatch","errorInfo","stack","color","MuteComment_MuteComment","MuteComment","muted","_componentDidMount","_this2$state","ShowNotFound","ShowCommentData","src_MuteComment","NoMatch","App_App","App","recentCommentsHomepage","onSongPage","test","RotatingSubHeader","exact","path","component","src_App","SUB_HEADERS","quote","setQuote","cycle","nextIndex","indexOf","j","shuffle","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","container","app","StrictMode","__song__","__related__","__results__","__songNotFound__","__totalStats__","__searchExamples__","__recentComments__","__recentCommentsHomepage__","firstElementChild","origin","hydrate","addEventListener","contentType","ready","unregister","checkValidServiceWorker"],"mappings":"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"},"input":"(this[\"webpackJsonpsongsearch-client\"] = this[\"webpackJsonpsongsearch-client\"] || []).push([[0],{\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 55:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 56:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 57:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(26);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 5 modules\nvar createSuper = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/throttle-debounce/esm/index.js\nvar esm = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/copy-to-clipboard/index.js\nvar copy_to_clipboard = __webpack_require__(30);\nvar copy_to_clipboard_default = /*#__PURE__*/__webpack_require__.n(copy_to_clipboard);\n\n// CONCATENATED MODULE: ./src/Cache.js\nvar _cache={};var cachedFetch=function cachedFetch(url,options){var cached=_cache[url];if(cached!==undefined){try{var response=new window.Response(new Blob([cached]));return Promise.resolve(response);}catch(err){// Old browsers. E.g. Firefox 38.\nconsole.log(\"Unable to create new window.Response\",err);}}return fetch(url,options).then(function(response){// let's only store in cache if the content-type is\n// JSON or something non-binary\nif(response.status===200){var ct=response.headers.get(\"Content-Type\");if(ct&&(ct.match(/application\\/json/i)||ct.match(/text\\//i))){// There is a .json() instead of .text() but\n// we're going to store it in _cache as\n// string anyway.\n// If we don't clone the response, it will be\n// consumed by the time it's returned. This\n// way we're being un-intrusive.\nresponse.clone().text().then(function(content){_cache[url]=content;});}}return response;});};\n// EXTERNAL MODULE: ./node_modules/react-countdown/dist/index.es.js\nvar index_es = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/DateTimeDisplay.js\nvar DateTimeDisplay_DateTimeDisplay=function DateTimeDisplay(_ref){var value=_ref.value,type=_ref.type,isDanger=_ref.isDanger;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:isDanger?\"countdown danger\":\"countdown\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:value}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:type})]});};/* harmony default export */ var src_DateTimeDisplay = (DateTimeDisplay_DateTimeDisplay);\n// CONCATENATED MODULE: ./src/useCountdown.js\nvar useCountdown_useCountdown=function useCountdown(targetDate){var countDownDate=new Date(\"March 27, 2022 24:00:00\").getTime();var _useState=Object(react[\"useState\"])(countDownDate-new Date().getTime()),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),countDown=_useState2[0],setCountDown=_useState2[1];Object(react[\"useEffect\"])(function(){var interval=setInterval(function(){setCountDown(countDownDate-new Date().getTime());},1000);return function(){return clearInterval(interval);};},[countDownDate]);return getReturnValues(countDown);};var getReturnValues=function getReturnValues(countDown){// calculate time left\nconsole.log(countDown);var days=Math.floor(countDown/(1000*60*60*24));var hours=Math.floor(countDown%(1000*60*60*24)/(1000*60*60));var minutes=Math.floor(countDown%(1000*60*60)/(1000*60));var seconds=Math.floor(countDown%(1000*60)/1000);return[days,hours,minutes,seconds];};\n// CONCATENATED MODULE: ./src/CountdownTimer.js\nvar CountdownTimer_ExpiredNotice=function ExpiredNotice(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"expired-notice\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"Expired!!!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Please select a future date and time.\"})]});};var CountdownTimer_ShowCounter=function ShowCounter(_ref){var days=_ref.days,hours=_ref.hours,minutes=_ref.minutes,seconds=_ref.seconds;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"show-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"#\",className:\"countdown-link\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_DateTimeDisplay,{value:days,type:\"Days\",isDanger:days<=3}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\":\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_DateTimeDisplay,{value:hours,type:\"Hours\",isDanger:false}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\":\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_DateTimeDisplay,{value:minutes,type:\"Mins\",isDanger:false}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\":\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_DateTimeDisplay,{value:seconds,type:\"Seconds\",isDanger:false})]})});};var CountdownTimer_CountdownTimer=function CountdownTimer(_ref2){var targetDate=_ref2.targetDate;var _useCountdown=useCountdown_useCountdown(targetDate),_useCountdown2=Object(slicedToArray[\"a\" /* default */])(_useCountdown,4),days=_useCountdown2[0],hours=_useCountdown2[1],minutes=_useCountdown2[2],seconds=_useCountdown2[3];if(days+hours+minutes+seconds<=0){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CountdownTimer_ExpiredNotice,{});}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CountdownTimer_ShowCounter,{days:days,hours:hours,minutes:minutes,seconds:seconds});}};/* harmony default export */ var src_CountdownTimer = (CountdownTimer_CountdownTimer);\n// CONCATENATED MODULE: ./src/cont_song_desk.png\n/* harmony default export */ var cont_song_desk = (__webpack_require__.p + \"static/media/cont_song_desk.299b76a7.png\");\n// CONCATENATED MODULE: ./src/cont_song_mob.png\n/* harmony default export */ var cont_song_mob = (__webpack_require__.p + \"static/media/cont_song_mob.a45052cb.png\");\n// CONCATENATED MODULE: ./src/Bannertop.js\nfunction Bannertop(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"deskviews\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"http://contextbomb.com/songsearch\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"deskview\",src:cont_song_desk})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mobileviews\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"http://contextbomb.com/songsearch\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"mobileview\",src:cont_song_mob})})})]});}/* harmony default export */ var src_Bannertop = (Bannertop);\n// CONCATENATED MODULE: ./src/songs_desktop.png\n/* harmony default export */ var songs_desktop = (__webpack_require__.p + \"static/media/songs_desktop.dceb29d3.png\");\n// CONCATENATED MODULE: ./src/songs_mobile.png\n/* harmony default export */ var songs_mobile = (__webpack_require__.p + \"static/media/songs_mobile.6129f571.png\");\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(12);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./node_modules/react-timeago/lib/index.js\nvar lib = __webpack_require__(31);\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./node_modules/react-waypoint/es/index.js\nvar es = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/swr/esm/index.js + 9 modules\nvar swr_esm = __webpack_require__(21);\n\n// CONCATENATED MODULE: ./src/Common.js\nvar PUBLIC_URL= false||\"\";// const itunesAppImage = PUBLIC_URL + \"/static/itunes-app-icon.png\";\nvar skullImage=PUBLIC_URL+\"/static/skull.png\";var isServer=typeof document===\"undefined\";var defaultHTMLHeaders={title:\"Song Search - Find Songs by Lyrics\",image:isServer?null:document.querySelector('meta[itemprop=\"image\"]').content};var SetHTMLHeaders=function SetHTMLHeaders(_ref){var title=_ref.title,_ref$image=_ref.image,image=_ref$image===void 0?null:_ref$image;if(isServer){console.warn(\"SetHTMLHeaders should not be called in server mode\");return;}/* Only set when it's different */if(title!==document.title){document.title=title;}var ogtitle=document.querySelector('meta[property=\"og:title\"]');if(ogtitle.content!==title){ogtitle.content=title;}var itemtitle=document.querySelector('meta[itemprop=\"name\"]');if(itemtitle!==title){itemtitle.content=title;}var img=document.querySelector('meta[itemprop=\"image\"]');if(img.content!==image){img.content=image;}};var ResetHTMLHeaders=function ResetHTMLHeaders(){SetHTMLHeaders(defaultHTMLHeaders);};var Common_Loading=function Loading(_ref2){var text=_ref2.text;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"loading\",title:text,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"cssload-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"cssload-square\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"cssload-square\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"cssload-square\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"cssload-square\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"cssload-square\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:text})]});};function FormattedNumber(_ref3){var value=_ref3.value;return value.toLocaleString();}function AmazonRelatedProducts(_ref4){var song=_ref4.song;var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=Object(react[\"useState\"])(1),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),loadingMore=_useState6[0],setLoadingMore=_useState6[1];Object(react[\"useEffect\"])(function(){if(page>1){setLoadingMore(true);}},[page]);Object(react[\"useEffect\"])(function(){var mounted=true;var url=\"/api/song/\".concat(song.id,\"/amazon?v=5\");if(page>1){url+=\"&page=\".concat(page);}fetch(url).then(function(r){if(!mounted)return;if(r.ok){r.json().then(function(result){setResult(result);setLoadingMore(false);});}});return function(){mounted=false;};},[song,page]);function loadMore(){setPage(page+1);}if(!result||!result.items.length){return null;}var items=result.items,total=result.total;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"amazon-related-products\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Relevant on Amazon.com\"}),items.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AmazonRelatedItem,{item:item},item.asin||item.ASIN);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:\"As an Amazon Associate I earn from qualifying purchases.\"}),total>items.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{textAlign:\"right\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-default btn-sm\",onClick:loadMore,disabled:loadingMore,children:loadingMore?\"Loading...\":\"Load more products...\"})})]});}function AmazonRelatedItem(_ref5){var item=_ref5.item;if(!item.detail_page_url){// Later in 2020, this can be replaced with just `return null`\nreturn old__AmazonRelatedItem({item:item});}var productTypeInfo=item.product_group;if(productTypeInfo&&item.binding&&productTypeInfo!==item.binding){productTypeInfo+=\", \".concat(item.binding);}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media amazon-item\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"media-left media-top\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.detail_page_url,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"media-object\",loading:\"lazy\",src:item.image_small||item.image_medium,alt:\"Product\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media-body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"media-heading\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.detail_page_url,target:\"_blank\",rel:\"noopener noreferrer\",children:item.title})}),item.contributor&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"By \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:item.contributor})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[item.price&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{className:\"price\",children:item.price}),productTypeInfo,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),item.release_date&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"Release date: \",item.release_date]})]})]})]});}function old__AmazonRelatedItem(_ref6){var item=_ref6.item;var productTypeInfo=item.ItemAttributes.ProductGroup;if(productTypeInfo&&item.ItemAttributes.Binding&&productTypeInfo!==item.ItemAttributes.Binding){productTypeInfo+=\", \".concat(item.ItemAttributes.Binding);}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media amazon-item\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"media-left media-top\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.URL,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"media-object\",src:item.SmallImage,alt:\"Product\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media-body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"media-heading\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.URL,target:\"_blank\",rel:\"noopener noreferrer\",children:item.Title})}),item.Creator&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"By \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:item.Creator})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[item.ItemAttributes.ListPrice&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{className:\"price\",children:item.ItemAttributes.ListPrice.FormattedPrice}),productTypeInfo]})]})]});}// export function Affiliates({ song }) {\n//   console.log(\"IS THIS STILL USED?!??!?!?!?!\");\n//   // const [amazon, setAmazon] = React.useState(null);\n//   const [itunes, setItunes] = React.useState(null);\n//   useEffect(() => {\n//     let dismounted = false;\n//     const url = `/api/song/${song.id}/affiliate/itunes`;\n//     cachedFetch(url).then((response) => {\n//       if (response.ok) {\n//         if (dismounted) {\n//           return;\n//         }\n//         response.json().then((results) => {\n//           if (\n//             results.itunes &&\n//             results.itunes.matches &&\n//             results.itunes.matches.length\n//           ) {\n//             setItunes(results.itunes);\n//           }\n//         });\n//       } else {\n//         console.warn(response);\n//       }\n//     });\n//     return () => {\n//       dismounted = true;\n//     };\n//   }, [song]);\n//   if (isServer) {\n//     return null;\n//   }\n//   return (\n//     <>\n//       {/* XXX This causes a double-render even though 'song' hasn't changed!! */}\n//       <AmazonRelatedProducts song={song} />\n//       <ITunesBadge itunes={itunes} />\n//     </>\n//   );\n// }\n// const ITunesBadge = React.memo(({ itunes }) => {\n//   if (!itunes) {\n//     return null;\n//   }\n//   if (!itunes.matches.length) {\n//     return null;\n//   }\n//   const first = itunes.matches[0];\n//   const trackURL = `${first.trackViewUrl}&at=${itunes.token}`;\n//   const trackLink = (\n//     <p>\n//       <a href={trackURL}>\n//         <b>{first.trackName}</b>\n//         {\" by \"}\n//         <b>{first.artistName}</b>\n//         {first.trackPrice &&\n//           first.trackPrice > 0.0 &&\n//           ` ($${first.trackPrice})`}\n//       </a>\n//     </p>\n//   );\n//   const trackIcon = (\n//     <p style={{ float: \"left\", marginBottom: 15 }}>\n//       <a href={trackURL} className=\"app-icon\" title={first.trackName}>\n//         <img src={itunesAppImage} alt=\"iTunes\" />\n//       </a>\n//     </p>\n//   );\n//   let albumLink = null;\n//   if (first.collectionName) {\n//     const collectionURL = `${first.collectionViewUrl}&at=${itunes.token}`;\n//     albumLink = (\n//       <p>\n//         <a href={collectionURL}>\n//           On album <b>{first.collectionName}</b>\n//           {first.collectionPrice &&\n//             first.collectionPrice > 0 &&\n//             ` ($${first.collectionPrice})`}\n//         </a>\n//       </p>\n//     );\n//   }\n//   let preview = null;\n//   if (first.previewUrl) {\n//     preview = (\n//       <div style={{ clear: \"left\", textAlign: \"center\" }}>\n//         <b>iTunes</b> Preview\n//         <br />\n//         <audio controls preload=\"none\" src={first.previewUrl} />\n//       </div>\n//     );\n//   }\n//   return (\n//     <div style={{ marginTop: 30, marginBottom: 20 }}>\n//       <h4>On Apple iTunes</h4>\n//       {trackIcon}\n//       {trackLink}\n//       {albumLink}\n//       {preview}\n//     </div>\n//   );\n// });\nfunction SpotifySnippet(_ref7){var song=_ref7.song,_ref7$compact=_ref7.compact,compact=_ref7$compact===void 0?true:_ref7$compact;var _useSWR=Object(swr_esm[\"a\" /* default */])(\"/api/song/\".concat(song.id,\"/spotify\"),/*#__PURE__*/function(){var _ref8=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(url){var r;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:r=_context.sent;if(r.ok){_context.next=6;break;}if(false){}throw new Error(\"\".concat(r.status,\" on \").concat(url));case 6:_context.next=8;return r.json();case 8:return _context.abrupt(\"return\",_context.sent);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref8.apply(this,arguments);};}(),{revalidateOnFocus:false}),data=_useSWR.data;if(!data){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"spotify\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"On Spotify\\u2122\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{textAlign:\"center\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"iframe\",{src:data.embed_url,width:\"300\",height:compact?80:380,frameBorder:\"0\",allowtransparency:\"true\",allow:\"encrypted-media\"})})]});}var Common_YouTubeSnippet=/*#__PURE__*/function(_React$PureComponent){Object(inherits[\"a\" /* default */])(YouTubeSnippet,_React$PureComponent);var _super=Object(createSuper[\"a\" /* default */])(YouTubeSnippet);function YouTubeSnippet(){var _this;Object(classCallCheck[\"a\" /* default */])(this,YouTubeSnippet);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={snippet:null,searched:false,clicked:false};_this.onClickThumbnail=function(event){event.preventDefault();_this.setState({clicked:true});};return _this;}Object(createClass[\"a\" /* default */])(YouTubeSnippet,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.song.id;var url=\"/api/song/\".concat(id,\"/youtube\");return cachedFetch(url).then(function(r){if(_this2.dismounted){return;}if(r.status!==200){console.warn(r.status,\"loading\",url);}else{r.json().then(function(response){if(response.snippet){_this2.setState({snippet:response.snippet,searched:true});}else{_this2.setState({searched:true});}});}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"render\",value:function render(){var _this$state=this.state,clicked=_this$state.clicked,snippet=_this$state.snippet;if(isServer||snippet===null){return null;}var media;var videoId=snippet.videoId;var href=\"https://www.youtube.com/watch?v=\".concat(videoId);if(clicked){// const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0&amp;showinfo=0`\nvar src=\"https://www.youtube-nocookie.com/embed/\".concat(videoId,\"?rel=0\");var width=335;var height=178;// =335/(16/9)\nvar containerDiv=document.querySelector(\"div.result\");if(containerDiv&&containerDiv.offsetWidth>335){width=560;height=315;}media=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"iframe\",{width:width,height:height,title:snippet.title||\"YouTube Snippet\",src:src,frameBorder:0,allow:\"autoplay; encrypted-media\",allowFullScreen:true});}else{var thumbnail=snippet.thumbnails.medium;var _containerDiv=document.querySelector(\"div.result\");if(_containerDiv&&_containerDiv.offsetWidth>335){thumbnail=snippet.thumbnails.high;}media=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:href,onClick:this.onClickThumbnail,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:thumbnail.url,width:thumbnail.width,height:thumbnail.height,title:\"Click to load video\",alt:\"Video thumbnail\",loading:\"lazy\"})});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"youtube\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h4\",{children:[\"YouTube\\u2122\",\" \",!clicked?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{onClick:this.onClickThumbnail,children:\"Click to load\"}):null]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{textAlign:\"center\"},children:[media,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:href,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Watch on YouTube\\u2122\"})})})]})]});}}]);return YouTubeSnippet;}(react_default.a.PureComponent);function IntersectionLazy(_ref9){var render=_ref9.render;var _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),entered=_useState8[0],setEntered=_useState8[1];function onEnter(){setEntered(true);}if(entered){return render();// return <YouTubeSnippet song={song} />;\n}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Waypoint */],{onEnter:onEnter});}// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\nfunction loadCarbonScript(){var carbonParent=document.getElementById(\"carbonadsouter\");if(carbonParent){if(!carbonParent.querySelector(\"script\")){var script=document.createElement(\"script\");script.id=\"_carbonads_js\";script.src=\"https://cdn.carbonads.com/carbon.js?serve=CK7DCK7W&placement=songsearch\";script.async=true;carbonParent.appendChild(script);}}}function loadAdsenseScript(){var carbonParent=document.getElementById(\"carbonadsouter\");if(carbonParent){if(!carbonParent.querySelector(\"script\")){var script=document.createElement(\"script\");script.id=\"_carbonads_js\";script.src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";script.async=true;script.setAttribute('data-ad-client','ca-pub-8561605615946624');carbonParent.appendChild(script);}}}function loadAmplifiedScript(_ref10){var song=_ref10.song,artist=_ref10.artist;var parent=document.getElementById(\"amplifiedouter\");if(parent){if(!parent.querySelector(\"script\")){window.amplified=window.amplified||{init:[]};window.amplified.init.push(function(){amplified.setParams({artist:artist,song:song});amplified.pushAdUnit(100003500);amplified.run();});var script=document.createElement(\"script\");script.id=\"_amplified_js\";script.src=\"https://srv.clickfuse.com/ads/ads.js\";script.async=true;parent.appendChild(script);}}}var RenderParagraphs=/*#__PURE__*/react_default.a.memo(function(_ref11){var text=_ref11.text;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"blockquote\",{dangerouslySetInnerHTML:{__html:text}});});function CustomTimeAgo(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib_default.a// Since the smallest granularity is 1 min, no point making the\n// setInterval any smaller than this.\n,Object(objectSpread2[\"a\" /* default */])({minPeriod:60,formatter:function formatter(value,unit,suffix,epochSeconds,nextFormatter){if(unit===\"second\"){return\"seconds ago\";}return nextFormatter(value,unit,suffix,epochSeconds);}},props));}function ServerError(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"not-found\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Server Error\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"Skull\",src:skullImage})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Most likely a \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"temporary problem\"}),\" which will go away if you\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"reload this page soon\"}),\".\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Back to the home page\"})})]});}\n// EXTERNAL MODULE: ./src/Comments.css\nvar Comments = __webpack_require__(49);\n\n// EXTERNAL MODULE: ./node_modules/react-helmet/es/Helmet.js\nvar Helmet = __webpack_require__(25);\n\n// CONCATENATED MODULE: ./src/Comments.js\nvar SUBMITTED_COMMENTS_STORAGE_KEY=\"submittedComments\";var Comments_SongComments=/*#__PURE__*/function(_React$PureComponent){Object(inherits[\"a\" /* default */])(SongComments,_React$PureComponent);var _super=Object(createSuper[\"a\" /* default */])(SongComments);function SongComments(){var _this;Object(classCallCheck[\"a\" /* default */])(this,SongComments);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loadingComments:false,savingComment:false,serverError:null,submissionError:null,comments:_this.props.comments||null,commentsCount:_this.props.commentsCount||null,submittedComments:[],commentSubmitted:null,commentEdited:null,commentDeleted:null,searchedId:_this.props.searchedId,replyComment:null,editComment:null,csrfToken:null,highlightComment:null,highlitComment:null,hasCommented:false};_this.loadCSRFToken=function(){var url=\"/api/comments?csrftoken=1\";fetch(url).then(function(r){if(_this.dismounted)return;if(r.ok){return r.json().then(function(result){_this.setState({csrfToken:result.csrf_token});});}else{_this.setState({serverError:r});}}).catch(function(error){if(_this.dismounted)return;_this.setState({serverError:error});});};_this.loadComments=function(){var _this$props=_this.props,song=_this$props.song,search=_this$props.search;var _this$state=_this.state,submittedComments=_this$state.submittedComments,commentEdited=_this$state.commentEdited;var submittedCommentIds=[];var url=\"/api/comments\";if(song){url+=\"?song=\".concat(song.id);}else if(search){url+=\"?search=\".concat(search.id);}else{// throw new Error(\"Don't know how to do this outside of song\");\n}if(submittedComments.length){submittedCommentIds=submittedComments.filter(function(submission){if(song){return submission.song===song.id;}else if(search){return submission.search===search.id;}else{return!submission.song&&!submission.search;}}).map(function(submission){return submission.id;});}submittedCommentIds.forEach(function(id){url+=url.includes(\"?\")?\"&\":\"?\";url+=\"submitted=\".concat(id);});if(commentEdited){// Just to extra-bust the cache\nurl+=url.includes(\"?\")?\"&\":\"?\";url+=\"edited=\".concat(commentEdited.id);}var fetchFunc;if(commentEdited&&submittedCommentIds.length){// Don't use the caching one\nfetchFunc=fetch;}else{fetchFunc=cachedFetch;}fetchFunc(url).then(function(r){if(_this.dismounted)return;_this.setState({loadingComments:false});if(r.ok){return r.json().then(function(result){_this.setState({csrfToken:result.csrf_token,comments:result.comments,commentsCount:result.comments_count,loadingComments:false},_this.consolidateSubmittedComments);});}else{_this.setState({serverError:r,loadingComments:false});}}).catch(function(error){if(_this.dismounted)return;_this.setState({serverError:error,loadingComments:false});});};_this.consolidateSubmittedComments=function(){var comments=_this.state.comments;var submittedComments=_this.state.submittedComments;if(submittedComments.length&&comments[\"\"]&&comments[\"\"].length){var recurse=function recurse(comments){comments.forEach(function(comment){if(!comment.not_approved){// Add to removeSubmittedComments only if this is one of the ones\n// you submitted.\nsubmittedComments.forEach(function(submittedComment){if(submittedComment.id===comment.id){removeSubmittedComments.push(submittedComment.id);}});}if(comments[comment.id]){recurse(comments[comment.id]);}});};// If any of your submitted comments is now approved, we need to remove\n// it from sessionStorage.\nvar removeSubmittedComments=[];recurse(comments[\"\"]);if(removeSubmittedComments.length){var newSubmittedComments=submittedComments.filter(function(submittedComment){return!removeSubmittedComments.includes(submittedComment.id);});_this.setState({submittedComments:newSubmittedComments},function(){if(_this.state.submittedComments.length){// Update\ntry{sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY,JSON.stringify(_this.state.submittedComments));}catch(ex){console.warn(\"'sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY)' did't work\");}}else{// Reset\ntry{sessionStorage.removeItem(SUBMITTED_COMMENTS_STORAGE_KEY);}catch(ex){}}});}}};_this.highlightComment=function(id){var highlitComment=_this.state.highlitComment;if(highlitComment&&highlitComment===id){highlitComment=null;}else{highlitComment=id;}_this.setState({highlitComment:highlitComment},function(){window.setTimeout(function(){if(!_this.dismounted&&_this.state.highlitComment===id){_this.setState({highlitComment:null});}},10*1000);});};_this.submitCommentHandler=function(data){_this.setState({savingComment:true},function(){_this._submitCommentHandler(data).then(function(){_this.setState({savingComment:false});});});};_this._submitCommentHandler=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(data){var response,_this$props2,song,search,_this$state2,submittedComments,csrfToken,formData,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props2=_this.props,song=_this$props2.song,search=_this$props2.search;_this$state2=_this.state,submittedComments=_this$state2.submittedComments,csrfToken=_this$state2.csrfToken;if(csrfToken){_context.next=4;break;}throw new Error(\"No csrfToken prepared\");case 4:formData=new FormData();formData.append(\"csrfmiddlewaretoken\",csrfToken);formData.append(\"text\",data.comment);formData.append(\"name\",data.name);formData.append(\"email\",data.email);if(submittedComments.length){submittedComments.filter(function(submission){if(song){return submission.song===song.id;}else if(search){return submission.search===search.id;}else{return!submission.song&&!submission.search;}}).forEach(function(submission){formData.append(\"submitted\",submission.id);});}if(!data.editComment){_context.next=15;break;}formData.append(\"id\",data.editComment.id);if(data.editComment.oid){_context.next=14;break;}throw new Error(\"Can't edit if you don't have the oid\");case 14:formData.append(\"oid\",data.editComment.oid);case 15:if(data.replyComment){formData.append(\"parent\",data.replyComment.id);}if(data.askedWasSearchedFor){formData.append(\"was_searched_for\",data.wasSearchedFor||false);}if(_this.state.searchedId){formData.append(\"search\",_this.state.searchedId||null);}if(data.parent){formData.append(\"parent\",data.parent||null);}formData.append(\"experiment\",data.experiment||{});if(song){formData.append(\"song\",song.id);}else if(search){formData.append(\"search\",search.id);}else{// throw new Error(\"Don't know how to do this outside of song\");\n}_context.prev=21;_context.next=24;return fetch(\"/api/comments\",{method:\"POST\",body:formData});case 24:response=_context.sent;if(!response.ok){_context.next=37;break;}// If posted a comment because this *was* the song you\n// searched for, let's kill that not to stop asking that question.\nif(_this.state.searchedId){try{localStorage.removeItem(\"searched\");}catch(ex){console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\");}}_context.next=29;return response.json();case 29:result=_context.sent;if(!data.editComment){_context.next=34;break;}return _context.abrupt(\"return\",_this.setState({searchedId:null,commentEdited:result.submitted,submissionError:null,commentSubmitted:null,editComment:null,replyComment:null,comments:result.comments,commentsCount:result.comments_count}));case 34:return _context.abrupt(\"return\",_this.setState({searchedId:null,submissionError:null,commentEdited:null,commentSubmitted:result.submitted,commentDeleted:null,replyComment:null,comments:result.comments,commentsCount:result.comments_count},function(){// Only do this if there is only exactly 1 of these in the DOM.\n// The reason why is that when repeatedly injecting the <SongComments>\n// components in multiple places, you might have different ones\n// for different expanded songs.\nif(document.querySelectorAll(\".alert-comment\").length===1){document.querySelector(\".alert-comment.alert-success\").scrollIntoView({behavior:\"smooth\"});}var commentSubmitted=_this.state.commentSubmitted;var _this$props3=_this.props,song=_this$props3.song,search=_this$props3.search;_this.highlightComment(commentSubmitted.id);var submittedComments=_this.state.submittedComments.slice(0);// If you accidentally double-clicked to submit twice.\n// Or, just wrote the exact same comment twice, the server\n// won't create another record but it will respond as if it worked\n// so we need to check first that we don't already have\n// this 'commentSubmitted.id` already.\n// If you accidentally double-clicked to submit twice.\n// Or, just wrote the exact same comment twice, the server\n// won't create another record but it will respond as if it worked\n// so we need to check first that we don't already have\n// this 'commentSubmitted.id` already.\nif(!submittedComments.map(function(o){return o.id;}).filter(function(id){return id===commentSubmitted.id;}).length){var toPush={id:commentSubmitted.id,oid:commentSubmitted.oid};if(song){toPush.song=song.id;}else if(search){toPush.search=search.id;}submittedComments.push(toPush);}_this.setState({submittedComments:submittedComments,submissionError:null},function(){_this.loadComments();try{sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY,JSON.stringify(_this.state.submittedComments));}catch(ex){}});}));case 35:_context.next=38;break;case 37:return _context.abrupt(\"return\",_this.setState({submissionError:response}));case 38:_context.next=44;break;case 40:_context.prev=40;_context.t0=_context[\"catch\"](21);console.warn(\"Submission failed:\",_context.t0);return _context.abrupt(\"return\",_this.setState({submissionError:_context.t0}));case 44:case\"end\":return _context.stop();}}},_callee,null,[[21,40]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteCommentHandler=function(comment){_this.setState({savingComment:true},function(){_this._deleteCommentHandler(comment).then(function(){_this.setState({savingComment:false});});});};_this._deleteCommentHandler=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(comment){var response,formData,url;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formData=new FormData();if(comment.oid){_context2.next=3;break;}throw new Error(\"Can't edit if you don't have the oid\");case 3:formData.append(\"id\",comment.id);formData.append(\"oid\",comment.oid);url=\"/api/comments/delete\";_context2.prev=6;_context2.next=9;return fetch(url,{method:\"POST\",body:formData});case 9:response=_context2.sent;_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](6);return _context2.abrupt(\"return\",_this.setState({submissionError:_context2.t0}));case 15:if(response.ok){_context2.next=17;break;}return _context2.abrupt(\"return\",_this.setState({submissionError:response}));case 17:return _context2.abrupt(\"return\",_this.setState({commentDeleted:comment,commentEdited:null,editComment:null,submissionError:null},function(){// Before we load comments, remove this one from localStorage\nvar submittedComments=_this.state.submittedComments;var filteredSubmittedComments=submittedComments.filter(function(submission){return submission.id!==comment.id;});_this.setState({submittedComments:filteredSubmittedComments},function(){_this.loadComments();try{sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY,JSON.stringify(_this.state.submittedComments));}catch(ex){}});}));case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[6,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.setEditComment=function(comment){_this.setState({editComment:comment});};_this.setReplyComment=function(comment){if(_this.state.replyComment&&_this.state.replyComment.id===comment.id){_this.setState({replyComment:null,highlitComment:null,commentEdited:null});}else{_this.setState({replyComment:comment,highlitComment:comment.id,commentEdited:null});}};_this.clearCommentSubmitted=function(){_this.setState({commentSubmitted:null});};_this.clearCommentEdited=function(){_this.setState({commentEdited:null});};_this.clearCommentDeleted=function(){_this.setState({commentDeleted:null});};return _this;}Object(createClass[\"a\" /* default */])(SongComments,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// If you're here, you're a browser and no a server rendering.\nvar submittedCommentStorage=\"[]\";try{submittedCommentStorage=sessionStorage.getItem(SUBMITTED_COMMENTS_STORAGE_KEY)||\"[]\";}catch(ex){console.warn(\"'sessionStorage.getItem(SUBMITTED_COMMENTS_STORAGE_KEY)' didn't work\");}var submittedComments=JSON.parse(submittedCommentStorage);if(submittedComments.length){// Definitely load comments. Even if you arrived here with the comments\n// already server-side rendered.\n// Because, this call to loadingComments might be potentially different.\n// If you have commented on this song before, update that in state.\nvar hasCommented=false;var song=this.props.song;if(song){hasCommented=submittedComments.some(function(comment){return comment.song&&comment.song===song.id;});}this.setState({submittedComments:submittedComments,hasCommented:hasCommented,loadingComments:!this.state.comments},this.loadComments);}else{// If the comments were already loaded, we only need the csrfToken.\nif(!this.state.comments){this.setState({loadingComments:true},this.loadComments);}else{// We just need a new csrfToken\nthis.loadCSRFToken();}}if(window.location.hash){var re=/c(\\d+)$/;if(window.location.hash.match(re)){var id=parseInt(window.location.hash.match(re)[1],10);this.setState({highlitComment:id},function(){window.setTimeout(function(){if(!_this2.dismounted){var element=document.querySelector(\"#c\".concat(_this2.state.highlitComment));if(element&&element.scrollIntoView){element.scrollIntoView({behavior:\"smooth\"});}}},1000);window.setTimeout(function(){if(!_this2.dismounted&&_this2.state.highlitComment===id){_this2.setState({highlitComment:null});}},10*1000);});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.song!==this.props.song){this.setState({loadingComments:true,comments:null,commentsCount:null},this.loadComments);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"render\",value:function render(){var song=this.props.song;var _this$state3=this.state,comments=_this$state3.comments,commentsCount=_this$state3.commentsCount,submissionError=_this$state3.submissionError,commentSubmitted=_this$state3.commentSubmitted,commentEdited=_this$state3.commentEdited,commentDeleted=_this$state3.commentDeleted,submittedComments=_this$state3.submittedComments,searchedId=_this$state3.searchedId,editComment=_this$state3.editComment,replyComment=_this$state3.replyComment,savingComment=_this$state3.savingComment,highlitComment=_this$state3.highlitComment,hasCommented=_this$state3.hasCommented,csrfToken=_this$state3.csrfToken;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"comments masters song-comments\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Helmet[\"a\" /* Helmet */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"script\",{type:\"text/javascript\",language:\"javascript\",src:\"https://live.primis.tech/live/liveView.php?s=113482\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h3\",{children:[\"Song Comments \",commentsCount?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"(\",commentsCount,\")\"]}):null,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"On \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:song.name}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",song.artist.name]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowCommentDeleted,{commentDeleted:commentDeleted,clearCommentDeleted:this.clearCommentDeleted}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_ShowComments,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},this.props),{},{submissionError:submissionError,comments:comments,editComment:editComment,replyComment:replyComment,searchedId:searchedId,setEditComment:this.setEditComment,setReplyComment:this.setReplyComment,submitCommentHandler:this.submitCommentHandler,deleteCommentHandler:this.deleteCommentHandler,commentSubmitted:commentSubmitted,commentEdited:commentEdited,submittedComments:submittedComments,savingComment:savingComment,highlitComment:highlitComment,highlightComment:this.highlightComment,clearCommentSubmitted:this.clearCommentSubmitted,clearCommentEdited:this.clearCommentEdited,csrfToken:csrfToken,hasCommented:hasCommented}))]});}}]);return SongComments;}(react_default.a.PureComponent);function ShowCommentSubmitted(_ref3){var commentSubmitted=_ref3.commentSubmitted,clearCommentSubmitted=_ref3.clearCommentSubmitted;if(!commentSubmitted)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"alert-comment alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function onClick(event){clearCommentSubmitted();},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Comment submitted. Thank you!\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"It needs to be moderated before publishing.\"})]});}function ShowCommentEdited(_ref4){var commentEdited=_ref4.commentEdited,clearCommentEdited=_ref4.clearCommentEdited;if(!commentEdited)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function onClick(event){clearCommentEdited();},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Comment edited.\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"You can keep editing it until it gets approved.\"})]});}function ShowCommentDeleted(_ref5){var commentDeleted=_ref5.commentDeleted,clearCommentDeleted=_ref5.clearCommentDeleted;if(!commentDeleted)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"alert-comment alert alert-success alert-dismissible\",role:\"alert\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function onClick(event){clearCommentDeleted();},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Comment removed.\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Feel free to write a new comment.\"})]});}function ShowSubmissionError(_ref6){var submissionError=_ref6.submissionError;var _useState=Object(react[\"useState\"])({}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),validationErrors=_useState2[0],setValidationErrors=_useState2[1];var isErrorResponse=false;if(!isServer){try{isErrorResponse=submissionError instanceof window.Response;}catch(err){// Old browsers. E.g. Firefox 38.\nconsole.log(\"instanceof window.Response did not work:\",err);}}Object(react[\"useEffect\"])(function(){if(!isServer&&isErrorResponse&&submissionError.status===400){submissionError.json().then(function(data){setValidationErrors(data.errors);});}},[submissionError,isErrorResponse]);if(!submissionError)return null;var errorMessage;if(!isServer&&isErrorResponse){if(submissionError.status===400){errorMessage=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Something's not right with the submission\"})}),Object.keys(validationErrors).map(function(key){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[key,\":\"]}),\" \",validationErrors[key].map(function(err){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:err.message}),\" \",err.code?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"(\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:err.code}),\")\"]}):null]},err.message+err.code);})]},key);})]});}else if(submissionError.status>=500){errorMessage=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Server error. Perhaps simply try again a little later.\"});}else{errorMessage=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"The server basically failed to process the submission.\"});}}else{errorMessage=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:submissionError.toString()})});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"search-error\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Sorry, an error occured\"}),errorMessage]});}var Comments_ShowComments=/*#__PURE__*/function(_React$PureComponent2){Object(inherits[\"a\" /* default */])(ShowComments,_React$PureComponent2);var _super2=Object(createSuper[\"a\" /* default */])(ShowComments);function ShowComments(){Object(classCallCheck[\"a\" /* default */])(this,ShowComments);return _super2.apply(this,arguments);}Object(createClass[\"a\" /* default */])(ShowComments,[{key:\"render\",value:function render(){var _this$props4=this.props,comments=_this$props4.comments,replyComment=_this$props4.replyComment,editComment=_this$props4.editComment;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[comments&&comments[\"\"]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_ShowCommentsRecursive,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},this.props),{},{allComments:comments,comments:comments[\"\"]})),!replyComment&&!editComment&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_CommentForm,Object(objectSpread2[\"a\" /* default */])({replyingComment:false},this.props))]});}}]);return ShowComments;}(react_default.a.PureComponent);var Comments_ShowCommentsRecursive=/*#__PURE__*/function(_React$PureComponent3){Object(inherits[\"a\" /* default */])(ShowCommentsRecursive,_React$PureComponent3);var _super3=Object(createSuper[\"a\" /* default */])(ShowCommentsRecursive);function ShowCommentsRecursive(){var _this3;Object(classCallCheck[\"a\" /* default */])(this,ShowCommentsRecursive);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this3=_super3.call.apply(_super3,[this].concat(args));_this3.state={confirmDelete:false};return _this3;}Object(createClass[\"a\" /* default */])(ShowCommentsRecursive,[{key:\"render\",value:function render(){var _this4=this;var confirmDelete=this.state.confirmDelete;var _this$props5=this.props,replyComment=_this$props5.replyComment,editComment=_this$props5.editComment,setEditComment=_this$props5.setEditComment,setReplyComment=_this$props5.setReplyComment,comments=_this$props5.comments,allComments=_this$props5.allComments,submittedComments=_this$props5.submittedComments,deleteCommentHandler=_this$props5.deleteCommentHandler,highlightComment=_this$props5.highlightComment,highlitComment=_this$props5.highlitComment,commentSubmitted=_this$props5.commentSubmitted,clearCommentSubmitted=_this$props5.clearCommentSubmitted,commentEdited=_this$props5.commentEdited,clearCommentEdited=_this$props5.clearCommentEdited,csrfToken=_this$props5.csrfToken;if(!comments.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"comments\",children:comments.map(function(comment){// You're allowed to edit it if it was yours and it's not approved yet.\nvar canEdit=false;if(comment.not_approved){// Take 'editComment' into account\nif(submittedComments.filter(function(c){return c.id===comment.id;}).length){canEdit=true;}}var canReply=!canEdit&&csrfToken;var replies=allComments[comment.id];var editingComment=!!(canEdit&&editComment&&editComment.id===comment.id);var replyingComment=!!(canReply&&replyComment&&replyComment.id===comment.id);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"comment\",id:\"c\".concat(comment.id),children:[commentSubmitted&&commentSubmitted.id===comment.id&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowCommentSubmitted,{commentSubmitted:commentSubmitted,clearCommentSubmitted:clearCommentSubmitted}),commentEdited&&commentEdited.id===comment.id&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowCommentEdited,{commentEdited:commentEdited,clearCommentEdited:clearCommentEdited}),canEdit&&!(editComment&&editComment.id===comment.id)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"buttons\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function onClick(event){event.preventDefault();setEditComment(comment);},children:\"Edit your comment\"})}),confirmDelete&&editComment&&editComment.id===comment.id&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{style:{margin:20,textAlign:\"center\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Are you sure?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(event){event.preventDefault();deleteCommentHandler(comment);},children:\"Yes\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-info\",onClick:function onClick(event){event.preventDefault();_this4.setState({confirmDelete:false});},children:\"No\"})]}),canEdit&&editComment&&editComment.id===comment.id&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"buttons\",children:[!confirmDelete&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-warning btn-sm\",onClick:function onClick(event){event.preventDefault();_this4.setState({confirmDelete:true});},children:\"Remove your comment\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function onClick(event){event.preventDefault();if(confirmDelete){_this4.setState({confirmDelete:false},function(){setEditComment(null);});}else{setEditComment(null);}},children:\"Close edit\"})]}),editComment&&editComment.id===comment.id?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_CommentForm,Object(objectSpread2[\"a\" /* default */])({focusOnMount:true,editingComment:editingComment,replyingComment:false},_this4.props)):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_DisplayComment,{highlightComment:highlightComment,canReply:canReply,replyingComment:replyingComment,setReplyComment:setReplyComment,comment:comment,highlit:highlitComment&&highlitComment===comment.id}),replyComment&&comment.id===replyComment.id&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_CommentForm,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},_this4.props),{},{replyingComment:replyingComment,focusOnMount:true})),replies&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowCommentsRecursive,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},_this4.props),{},{comments:replies}))]},comment.id);})});}}]);return ShowCommentsRecursive;}(react_default.a.PureComponent);var Comments_CommentForm=/*#__PURE__*/function(_React$PureComponent4){Object(inherits[\"a\" /* default */])(CommentForm,_React$PureComponent4);var _super4=Object(createSuper[\"a\" /* default */])(CommentForm);function CommentForm(){var _this5;Object(classCallCheck[\"a\" /* default */])(this,CommentForm);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this5=_super4.call.apply(_super4,[this].concat(args));_this5.state={comment:_this5.props.editComment?_this5.props.editComment.text:\"\",name:\"\",email:\"\",showNameEmailInputs:true,wasSearchedFor:false,canSubmit:false,warnAboutName:false};_this5.textareaRef=/*#__PURE__*/react_default.a.createRef();_this5.clearComment=function(){_this5.setState({comment:\"\",preview:false});};_this5.submitHandler=function(event){event.preventDefault();var _this5$state=_this5.state,comment=_this5$state.comment,name=_this5$state.name,email=_this5$state.email,warnAboutName=_this5$state.warnAboutName,wasSearchedFor=_this5$state.wasSearchedFor;var _this5$props=_this5.props,submitCommentHandler=_this5$props.submitCommentHandler,editComment=_this5$props.editComment,replyComment=_this5$props.replyComment;if(!comment.trim()){return;}try{if(name&&name.trim()){localStorage.setItem(\"commentName\",name.trim());}if(email&&email.trim()){localStorage.setItem(\"commentEmail\",email.trim());}}catch(ex){console.warn(\"'localStorage.stItem(\\\"commentName\\\")' didn't work\");}if((!name||!email)&&!warnAboutName){_this5.setState({warnAboutName:true});}else{if(warnAboutName){_this5.setState({warnAboutName:false});}submitCommentHandler({comment:comment,email:email,name:name,wasSearchedFor:wasSearchedFor,editComment:editComment,replyComment:replyComment,askedWasSearchedFor:_this5.askWasSearchedFor()});}};_this5.getTextareaRows=function(text){var minimum=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var maximum=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16;var linebreaks=(text.match(/\\n/g)||[]).length;return Math.min(maximum,Math.max(minimum,linebreaks+2));};_this5.askWasSearchedFor=function(){var _this5$props2=_this5.props,searchedId=_this5$props2.searchedId,replyingComment=_this5$props2.replyingComment,hasCommented=_this5$props2.hasCommented,editingComment=_this5$props2.editingComment;return!!(searchedId&&!replyingComment&&!editingComment&&!hasCommented);};return _this5;}Object(createClass[\"a\" /* default */])(CommentForm,[{key:\"componentDidMount\",value:function componentDidMount(){var update={};var _this$state4=this.state,canSubmit=_this$state4.canSubmit,name=_this$state4.name,email=_this$state4.email,showNameEmailInputs=_this$state4.showNameEmailInputs;try{name=localStorage.getItem(\"commentName\")||\"\";email=localStorage.getItem(\"commentEmail\")||\"\";}catch(ex){console.warn(\"'localStorage.getItem(\\\"commentName\\\")' didn't work\");}if(name||email){update.name=name;update.email=email;}if(!canSubmit&&(name||email)){update.canSubmit=true;}if(name&&email&&showNameEmailInputs&&!this.props.editComment){update.showNameEmailInputs=false;}if(Object.keys(update).length){this.setState(update);}if(this.props.focusOnMount){// Usually true when doing an edit\nthis.textareaRef.current.focus();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.commentSubmitted!==this.props.commentSubmitted){this.setState({comment:\"\"});}}},{key:\"render\",value:function render(){var _this6=this;var _this$state5=this.state,comment=_this$state5.comment,name=_this$state5.name,email=_this$state5.email,warnAboutName=_this$state5.warnAboutName,showNameEmailInputs=_this$state5.showNameEmailInputs;var _this$props6=this.props,editComment=_this$props6.editComment,savingComment=_this$props6.savingComment,submissionError=_this$props6.submissionError,editingComment=_this$props6.editingComment,csrfToken=_this$props6.csrfToken;if(!csrfToken){if(isServer){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Must have JavaScript enabled to comment.\"});}else{return null;}}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:this.submitHandler,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowSubmissionError,{submissionError:submissionError}),editingComment&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"i\",{children:[\"You can edit \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"your\"}),\" recently added, but not yet approved comments.\"]}),savingComment&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowSavingStatus,{}),this.askWasSearchedFor()&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{textAlign:\"center\",marginBottom:20},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Was this the song you were looking for?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"label\",{className:\"radio-inline\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"radio\",name:\"wasSearchedFor\",value:\"yes\",disabled:savingComment,onChange:function onChange(e){_this6.setState({wasSearchedFor:true},function(){if(_this6.textareaRef.current){_this6.textareaRef.current.focus();}});}}),\" \",\"Yes!\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"label\",{className:\"radio-inline\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"radio\",name:\"wasSearchedFor\",id:\"inlineRadio2\",value:\"no\",disabled:savingComment,onChange:function onChange(e){_this6.setState({wasSearchedFor:false},function(){if(_this6.textareaRef.current){_this6.textareaRef.current.focus();}});}}),\" \",\"No :(\"]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-group\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control\",rows:this.getTextareaRows(this.state.comment),ref:this.textareaRef,value:comment,disabled:savingComment,onChange:function onChange(e){return _this6.setState({comment:e.target.value});},onBlur:function onBlur(event){if(_this6.state.comment.trim()){setTimeout(function(){if(!_this6.dismounted){if(!_this6.state.canSubmit){_this6.setState({canSubmit:true});}}},100);}}})}),showNameEmailInputs&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-inlinexxx\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-group\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"_name\",className:\"sr-only\",children:\"Your name\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control\",id:\"_name\",placeholder:\"Your name...\",disabled:savingComment,value:name,onChange:function onChange(e){return _this6.setState({name:e.target.value});}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-group\",style:{marginBottom:3},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"_email\",className:\"sr-only\",children:\"Email address\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"email\",className:\"form-control\",id:\"_email\",placeholder:\"Your email address...\",disabled:savingComment,value:email,onChange:function onChange(e){return _this6.setState({email:e.target.value});}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"Your email will \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"never be published\"}),\" and\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"never be shared\"}),\". Useful to receive reply comments.\"]})})]}),warnAboutName&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"alert-comment alert alert-warning alert-dismissible\",role:\"alert\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",onClick:function onClick(event){_this6.setState({warnAboutName:false});},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:name?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Please enter your email\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Please enter your name\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"A real name and email helps the comment be approved.\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\"An email address makes it possible to receive notification on replies to your comment.\"]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-md-8\",children:name&&email&&!showNameEmailInputs&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Commenting as \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:name}),\". Replies sent to \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:email}),\".\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-info btn-sm\",onClick:function onClick(event){event.preventDefault();_this6.setState({showNameEmailInputs:true});},children:\"Change name\"})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-md-4\",style:{textAlign:\"right\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:!comment.trim()||savingComment,children:editComment?\"Save Changes\":\"Post Comment\"})})]}),!this.state.wasSearchedFor&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{margin:\"20px 0\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"Can't find the song you're looking for?\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"https://www.peterbe.com/plog/blogitem-040601-1\",children:[\"Try posting on \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Find song by lyrics\"})]}),\".\"]})})]});}}]);return CommentForm;}(react_default.a.PureComponent);function ShowSavingStatus(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Please wait....\"})});}var Comments_DisplayComment=/*#__PURE__*/function(_React$PureComponent5){Object(inherits[\"a\" /* default */])(DisplayComment,_React$PureComponent5);var _super5=Object(createSuper[\"a\" /* default */])(DisplayComment);function DisplayComment(){Object(classCallCheck[\"a\" /* default */])(this,DisplayComment);return _super5.apply(this,arguments);}Object(createClass[\"a\" /* default */])(DisplayComment,[{key:\"render\",value:function render(){var _this$props7=this.props,highlit=_this$props7.highlit,highlightComment=_this$props7.highlightComment,canReply=_this$props7.canReply,replyingComment=_this$props7.replyingComment,setReplyComment=_this$props7.setReplyComment,comment=_this$props7.comment;var id=comment.id,name=comment.name,created=comment.created;var notApproved=comment.not_approved;var text=comment.text_rendered;function getRandomCelebration(){var emojis=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"];var emoji=emojis[Math.floor(Math.random()*emojis.length)];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{role:\"img\",\"aria-label\":\"muted\",children:emoji});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:highlit?\"display highlit\":\"display\",children:[canReply&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"buttons\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:replyingComment?\"btn btn-warning btn-sm\":\"btn btn-info btn-sm\",onClick:function onClick(event){event.preventDefault();setReplyComment(comment);},children:replyingComment?\"Close\":\"Reply\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h5\",{children:[\"By \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:name?name:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Anonymous\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"meta\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"#c\".concat(id),title:created,onClick:function onClick(event){highlightComment(id);},children:[\"Posted \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CustomTimeAgo,{date:created,title:created})]}),notApproved&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:\"Not yet approved!\"})]}),comment.hasOwnProperty(\"was_searched_for\")&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Was it the song you were looking for?\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:comment.was_searched_for?\"Yes\":\"No\"}),\" \",comment.was_searched_for&&getRandomCelebration()]}),typeof text===\"string\"?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"blockquote\",{dangerouslySetInnerHTML:{__html:text}}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"blockquote\",{children:text})]});}}]);return DisplayComment;}(react_default.a.PureComponent);\n// EXTERNAL MODULE: ./src/RecentComments.css\nvar RecentComments = __webpack_require__(50);\n\n// CONCATENATED MODULE: ./src/RecentComments.js\nfunction RecentComments_RecentComments(_ref){var recentComments=_ref.recentComments;var _useParams=Object(react_router[\"g\" /* useParams */])(),page=_useParams.page;var mountedRef=Object(react[\"useRef\"])(false);var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),serverError=_useState2[0],setServerError=_useState2[1];var _useState3=Object(react[\"useState\"])(recentComments||null),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),data=_useState4[0],setData=_useState4[1];function getPage(p){return parseInt(p||\"1\",10);}var fetchComments=Object(react[\"useCallback\"])(function(){var url=\"/api/comments/recent\";var pageInt=getPage(page);if(pageInt>1){url+=\"?page=\".concat(pageInt);}return cachedFetch(url).then(function(r){if(!r.ok){return mountedRef.current&&setServerError(r);}r.json().then(function(data){return mountedRef.current&&setData(data);});}).catch(function(ex){return mountedRef.current&&setServerError(ex);});},[page]);Object(react[\"useEffect\"])(function(){var pageInt=getPage(page);var suffix=\" - Song Search\";SetHTMLHeaders({title:pageInt>1?\"Recent Comments (page \".concat(pageInt,\")\").concat(suffix):\"Recent Comments\".concat(suffix)});setData(null);mountedRef.current=true;fetchComments(page);return function(){mountedRef.current=false;};},[page,fetchComments]);var loading=!data&&!serverError;var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),showLoading=_useState6[0],setShowLoading=_useState6[1];Object(react[\"useEffect\"])(function(){if(loading){window.setTimeout(function(){mountedRef.current&&setShowLoading(true);},1000);}else{setShowLoading(false);}},[loading]);var pageInt=getPage(page);var pagination=null;if(data&&(data.next_page||pageInt>1)){pagination=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pagination,{next:data.next_page,previous:pageInt-1});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"recent-comments\",children:[!serverError&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h2\",{children:[\"Recent Comments \",pageInt!==1&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"small\",{children:[\"Page \",pageInt]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Back to the home page\"})}),loading&&showLoading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Common_Loading,{text:\"Loading...\"}),serverError&&!data&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ServerError,{}),pagination,data&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowRecentComments,{comments:data.comments,isRoot:true}),pagination]});}/* harmony default export */ var src_RecentComments = (RecentComments_RecentComments);function ShowRecentComments(_ref2){var comments=_ref2.comments,isRoot=_ref2.isRoot;var previousSong=null;var previousChronological=null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"comments\",children:comments.map(function(comment){var imageLink=null;if(isRoot){if(comment.image&&previousSong!==comment.song.id){imageLink=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:comment._url,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"pull-right img-thumbnail found\",loading:\"lazy\",src:comment.image.thumbnail100||comment.image.url,alt:comment.song.artist.name})});}previousSong=comment.song.id;}var geoString=null;if(comment.geo){if(comment.geo.city&&comment.geo.country){geoString=\" (from \".concat(comment.geo.city,\", \").concat(comment.geo.country,\") \");}else if(comment.geo.country){geoString=\" (from \".concat(comment.geo.country,\") \");}}var chronologicalDiff=null;if(comment.rating){if(previousChronological){chronologicalDiff=comment.rating.chronological-previousChronological-1;}previousChronological=comment.rating.chronological;}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"comment\",children:[imageLink,isRoot&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h4\",{children:[\"On\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router_dom[\"b\" /* Link */],{to:comment._url,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:comment.song.name}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",comment.song.artist.name]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"blockquote\",{dangerouslySetInnerHTML:{__html:comment.text_rendered}}),isRoot&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:comment._url,className:\"btn btn-info btn-sm\",children:\"Reply\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"By \",comment.name?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:comment.name}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Anonymous\"}),geoString,\"on \",comment.approved_human,\" \",comment.rating&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"rating:\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:comment.rating.score}),\"chronological: \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:comment.rating.chronological}),!!chronologicalDiff&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:chronologicalDiff>0?\" +\".concat(chronologicalDiff):chronologicalDiff})]})]}),comment.replies&&comment.replies.length?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowRecentComments,{comments:comment.replies,isRoot:false}):null]},comment.id);})});}function Pagination(_ref3){var previous=_ref3.previous,next=_ref3.next;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-md-6\",style:{textAlign:\"right\"},children:previous?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"load-more\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:previous===1?\"/comments\":\"/comments/p\".concat(previous),children:\"Previous page\"})}):null}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-md-6\",style:{textAlign:\"left\"},children:next&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"load-more\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/comments/p\".concat(next),children:\"Next page\"})})})]});}\n// CONCATENATED MODULE: ./src/Home.js\n// import { Waypoint } from \"react-waypoint\";\n// if (process.env.PUBLIC_URL === undefined) {\n//   // console.error(\"process.env.PUBLIC_URL should not be undefined\");\n//   throw new Error(\"process.env.PUBLIC_URL should not be undefined\");\n// }\nvar Home_PUBLIC_URL= false||\"\";var lazyloadThumbnailImage=Home_PUBLIC_URL+\"/static/lazyload-thumbnail.png\";var placeholderImage=Home_PUBLIC_URL+\"/static/placeholder.png\";var NO_ADS=Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_NO_ADS===\"true\";var samplePlaceholders=[\"Born to be wild\",\"No one ever told me life was kind\",\"But here it comes again, straight thru the heart\",\"I'm an alligator\",\"My mouth, it moves\"];samplePlaceholders.sort(function(){return 0.5-Math.random();});var appendSuggestion=function appendSuggestion(text,append){var split=text.split(/\\s+/);split.pop();split.push(append);return split.join(\" \");};var Home_Completionist=function Completionist(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"You are good to go!\"});};var THREE_DAYS_IN_MS=3*24*60*60*1000;var NOW_IN_MS=new Date().getTime();var dateTimeAfterThreeDays=NOW_IN_MS+THREE_DAYS_IN_MS;var Home_Home=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Home,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Home);function Home(_props){var _this;Object(classCallCheck[\"a\" /* default */])(this,Home);_this=_super.call(this,_props);_this.artistRef=/*#__PURE__*/react_default.a.createRef();_this.languageRef=/*#__PURE__*/react_default.a.createRef();_this.searchRef=/*#__PURE__*/react_default.a.createRef();_this.startSearchFromLocation=function(props){var match=props.match;var q=decodeURIComponent(match.params.q);var sp=new URLSearchParams(props.location.search||\"\");var artist=sp.get(\"artist\");var language=sp.get(\"language\");var year=sp.get(\"year\");var searchExample=sp.get(\"example\");// XXX should this compare artist and language too?\nif(_this.state.q!==q){var stateUpdate={q:q};if(q.length>_this.searchRef.current.maxLength-10){stateUpdate.searchMaxLength=[q.length,_this.searchRef.current.maxLength];}if(language||year){_this.loadSearchAggregates();stateUpdate.advancedSearch=true;}if(language){stateUpdate.searchLanguage=language;}if(year){stateUpdate.searchYear=year;}if(artist){stateUpdate.artistName=artist;stateUpdate.advancedSearch=true;}if(searchExample){stateUpdate.searchExample=searchExample;}_this.setState(stateUpdate,function(){_this.startSearch(q,language,year,artist,_this.state.resultsPageIndex,_this.state.searchExample);});}else{SetHTMLHeaders({title:\"\".concat(q,\" - Song Search\")});}};_this.onFocusSearch=function(){_this.searchRef.current.placeholder=\"\";clearInterval(_this.placeholderSampleInterval);if(_this.fillerInterval){clearInterval(_this.fillerInterval);}if(!_this.state.showAutocompleteSuggestions){_this.setState({showAutocompleteSuggestions:true});}if(_this.state.shareSearch){_this.setState({shareSearch:false});}if(!_this._firstFocusSearch){_this._firstFocusSearch=true;// If you're on a small screen this is the first time you've focused,\n// the scroll the top of the search input into view.\nif(window.innerHeight&&window.innerHeight<600){_this.searchRef.current.scrollIntoView();}}};_this.onBlurSearch=function(event){if(!_this.state.q){_this.setNextSamplePlaceholder();_this.startSamplePlaceholderInterval();}setTimeout(function(){if(!_this.dismounted){_this.setState({showAutocompleteSuggestions:false});}},300);};_this.onFocusArtist=function(event){if(!_this.state.showAutocompleteArtistSuggestions){_this.setState({showAutocompleteArtistSuggestions:true});}};_this.onBlurArtist=function(event){setTimeout(function(){if(!_this.dismounted){_this.setState({showAutocompleteArtistSuggestions:false});}},300);};_this.sampleSearch=function(event,search){event.preventDefault();var stateUpdate={q:search.term,searchExample:search.id};if(search.language||search.year){if(!_this.state.searchLanguages.length||!_this.state.searchYears.length){_this.loadSearchAggregates();}}if(search.language){stateUpdate.searchLanguage=search.language;stateUpdate.advancedSearch=true;}else if(_this.state.searchLanguage){stateUpdate.searchLanguage=\"\";}if(search.year){stateUpdate.searchYear=search.year;stateUpdate.advancedSearch=true;}else if(_this.state.searchYear){stateUpdate.searchYear=\"\";}if(search.artist){stateUpdate.artistName=search.artist;stateUpdate.advancedSearch=true;}else if(_this.state.artistName){stateUpdate.artistName=\"\";}_this.setState(stateUpdate,function(){_this.submitSearch();});};_this.onSubmit=function(event){event.preventDefault();_this.submitSearch();};_this._fetchSearchAlternatives=function(){var url=\"/api/search/alternatives?searched=\".concat(_this.state.parentSearch);return cachedFetch(url).then(function(r){if(r.status===200){return r.json().then(function(results){if(_this.dismounted){return;}if(!results){return;}_this.setState({keyPhrases:results.key_phrases});});}});};_this.onChangeSearch=function(event){var q=event.target.value;_this.setState({q:q},function(){if(_this.state.desperateSearch){_this.setState({desperateSearch:false});}if(_this.state.originalQ){_this.setState({originalQ:\"\"});}var length=q.length;if(length>_this.searchRef.current.maxLength-10){_this.setState({searchMaxLength:[length,_this.searchRef.current.maxLength],showAutocompleteSuggestions:false});}else if(_this.state.searchMaxLength){_this.setState({searchMaxLength:null,showAutocompleteSuggestions:true});}if(_this.state.q.trim()){if(_this.autocompleteWaitingFor){if(q.trim()===_this.autocompleteWaitingFor){return;}}if((length<4||q.endsWith(\" \"))&&length<24){// the impatient one\n_this.fetchAutocompleteSuggestionsThrottled(q,_this.state.searchLanguage);}else if(length>24){// When what you've typed is really long use the really\n// delayed throttle.\n_this.fetchAutocompleteSuggestionsDebouncedLong(q,_this.state.searchLanguage);}else if(length){_this.fetchAutocompleteSuggestionsDebounced(q,_this.state.searchLanguage);}else{_this.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:true});}}else{_this.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:true});}});};_this.onKeyDownSearch=function(event){var suggestions=_this.state.autocompleteSuggestions;if(suggestions){var highlight=_this.state.autocompleteHighlight;if(event.key===\"Tab\"){event.preventDefault();var suggestion=highlight>-1?suggestions[highlight]:suggestions[0];if(!suggestion._url){_this.setState({q:suggestion.text+\" \"});_this.fetchAutocompleteSuggestions(suggestion.text,_this.state.searchLanguage);}}else if(event.key===\"ArrowDown\"&&highlight<suggestions.length){event.preventDefault();_this.setState({autocompleteHighlight:highlight+1});}else if(event.key===\"ArrowUp\"&&highlight>-1){_this.setState({autocompleteHighlight:highlight-1});}else if(event.key===\"Enter\"){if(highlight>-1){event.preventDefault();var searchSuggestions=_this.state.autocompleteSearchSuggestions;if(highlight===0&&searchSuggestions&&searchSuggestions.total){_this.submitSearch();return;}highlight--;if(!suggestions[highlight]){// Not sure how this can happen\nconsole.warn(\"SUGGESTIONS\",suggestions);console.warn(\"HIGHLIGHT\",highlight);// But bail!\n_this.setState({autocompleteSuggestions:null,autocompleteHighlight:-1},function(){return _this.submitSearch();});return;}if(suggestions[highlight]._url){_this.setState({redirectTo:{pathname:suggestions[highlight]._url}});}else{_this.setState({q:suggestions[highlight].text,autocompleteSuggestions:null,autocompleteHighlight:-1},function(){return _this.submitSearch();});}}}}};_this.onKeyDownArtistSearch=function(event){var suggestions=_this.state.autocompleteArtistSuggestions;if(suggestions){var highlight=_this.state.autocompleteArtistHighlight;if(event.key===\"Tab\"){event.preventDefault();if(highlight>-1){_this.setState({artistName:suggestions[highlight].text});_this.fetchAutocompleteArtistSuggestions(suggestions[highlight].text);}else if(suggestions.length){_this.setState({artistName:suggestions[0].text});_this.fetchAutocompleteArtistSuggestions(suggestions[0].text);}}else if(event.key===\"ArrowDown\"&&highlight<suggestions.length){event.preventDefault();_this.setState({autocompleteArtistHighlight:highlight+1});}else if(event.key===\"ArrowUp\"&&highlight>-1){_this.setState({autocompleteArtistHighlight:highlight-1});}else if(event.key===\"Enter\"){if(highlight>-1){event.preventDefault();_this.setState({artistName:suggestions[highlight].text,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1});}}}};_this.toggleShareSearch=function(event){event.preventDefault();_this.setState({shareSearch:!_this.state.shareSearch,advancedSearch:false});};_this.toggleAdvancedSearch=function(event){event.preventDefault();if(!_this.state.advancedSearch){// it was not enabled before\nvar withCountsLanguages=_this.state.searchLanguages.filter(function(x){return x.count;});var withCountsYears=_this.state.searchYears.filter(function(x){return x.count;});if(!withCountsLanguages.length||!withCountsYears.length){_this.loadSearchAggregates();}}_this.setState({advancedSearch:!_this.state.advancedSearch,shareSearch:false});};_this.onChangeLanguage=function(event){event.preventDefault();var searchLanguage=event.target.value;_this.setState({searchLanguage:searchLanguage});};_this.onChangeYear=function(event){event.preventDefault();var searchYear=event.target.value;_this.setState({searchYear:searchYear});};_this.onChangeArtistName=function(event){event.preventDefault();var artistName=event.target.value;_this.setState({artistName:artistName},function(){if(artistName.length){_this.fetchAutocompleteArtistSuggestions(_this.state.artistName.trim());}else{_this.setState({autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1});}});};_this.onSelectSuggestion=function(event,suggestion){event.preventDefault();if(suggestion._url){return _this.setState({redirectTo:suggestion._url});}var newText=suggestion.text;if(suggestion.append){newText=appendSuggestion(_this.state.q,newText);}_this.setState({q:newText,autocompleteSuggestions:null,autocompleteHighlight:-1},function(){_this.submitSearch();});};_this.onSelectSuggestionAll=function(event){event.preventDefault();_this.submitSearch();};_this.onSelectArtistSuggestion=function(event,suggestion){event.preventDefault();_this.setState({artistName:suggestion.text,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1},function(){_this.submitSearch();});};_this.onLoadMore=function(event){event.preventDefault();_this.setState({resultsPageIndex:_this.state.resultsPageIndex+1},function(){_this.startSearch(_this.state.q,_this.state.searchLanguage,_this.state.searchYear,_this.state.artistName,_this.state.resultsPageIndex,_this.state.searchExample);});};_this.submitPhrase=function(event,keyPhrase){event.preventDefault();var stateUpdate={q:keyPhrase.phrase,originalQ:_this.state.q};if(keyPhrase.year){stateUpdate.searchYear=keyPhrase.year;}if(keyPhrase.language){stateUpdate.searchLanguage=keyPhrase.language;}_this.setState(stateUpdate,function(){_this.submitSearch();});};_this.reloadSearch=function(event){event.preventDefault();window.location.reload();};_this.loadMoreByName=function(event){var previousByNameLimit=_this.state.by_name_limit;_this.setState({by_name_total:0,by_name_limit:0},function(){var url=\"/api/search?q=\".concat(encodeURIComponent(_this.state.q),\"&by_name=\").concat(previousByNameLimit);fetch(url).then(function(r){if(_this.dismounted){return;}if(r.status===200){r.json().then(function(results){if(results){_this.setState({by_name:results.by_name,by_name_total:results.by_name_total,by_name_limit:results.by_name_limit});}});}});});};_this.displayYears=function(year){var yearEnd=year+9;var currentYear=new Date().getFullYear();if(yearEnd>currentYear){yearEnd=currentYear;}return\"\".concat(year,\"\\u2026\").concat(yearEnd);};var _q=\"\";var originalQ=\"\";var _artistName=\"\";var total=0;var searchResults=null;var desperate=false;var missing=null;// let suggestions = null;\nvar by_name=null;var by_name_total=null;var by_name_limit=null;var _searchLanguage=\"\";var _searchYear=\"\";var parentSearch=null;var keyPhrases=null;var popularityFactor=null;var _searchExample=null;var _results=_this.props.results;if(_results){_this.searched=_results.searched;_q=_results.search;total=_results.total;searchResults=_results.results;desperate=_results.desperate;missing=_results.missing;by_name=_results.by_name||null;by_name_total=_results.by_name_total||null;by_name_limit=_results.by_name_limit||null;_artistName=_results.artist;originalQ=_results.original||\"\";_searchLanguage=_results.language||\"\";_searchYear=_results.year||\"\";parentSearch=_results.searched||null;keyPhrases=_results.key_phrases||null;popularityFactor=_results.popularityFactor||null;_searchExample=_results.search_example||null;}var advancedSearch=Boolean(_artistName||_searchLanguage||_searchYear);var searchExamples=null;var showExamples=false;if(_props.searchExamples&&_props.searchExamples.examples){searchExamples=_props.searchExamples.examples;showExamples=true;}var recentComments=null;var showRecentComments=false;if(_props.recentComments&&_props.recentComments.comments&&_props.recentComments.comments.length){recentComments=_props.recentComments;showRecentComments=true;}_this.state={q:_q,originalQ:originalQ,artistName:_artistName,searching:false,searchError:null,total:total,results:searchResults,resultsPageIndex:0,by_name:by_name,by_name_total:by_name_total,by_name_limit:by_name_limit,placeholder:samplePlaceholders[0],slowSearch:null,showExamples:showExamples,searchExamples:searchExamples,parentSearch:parentSearch,desperateSearch:desperate,missing:missing,keyPhrases:keyPhrases,popularityFactor:popularityFactor,searchExample:_searchExample,showRecentComments:showRecentComments,recentComments:recentComments,onlyResults:null,searchMaxLength:null,autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:true,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1,showAutocompleteArtistSuggestions:true,advancedSearch:advancedSearch,searchLanguage:_searchLanguage,searchLanguages:[],searchYear:_searchYear,searchYears:[],redirectTo:null,shareSearch:false};// When you've typed something longer.\n// If you steadily type something every 100ms for a long time\n// without pausing, this won't fire till you stop.\n_this.fetchAutocompleteSuggestionsDebounced=Object(esm[\"a\" /* debounce */])(800,_this.fetchAutocompleteSuggestions);_this.fetchAutocompleteSuggestionsDebouncedLong=Object(esm[\"a\" /* debounce */])(1800,_this.fetchAutocompleteSuggestions);// When you've started typing.\n// Will basically fire without being postponed.\n_this.fetchAutocompleteSuggestionsThrottled=Object(esm[\"b\" /* throttle */])(1100,_this.fetchAutocompleteSuggestions);_this._autocompleteSuggestionsCache={};return _this;}Object(createClass[\"a\" /* default */])(Home,[{key:\"componentDidMount\",value:function componentDidMount(){ResetHTMLHeaders();if(this.props.match.params.q){this.startSearchFromLocation(this.props);}else{this.startSamplePlaceholderInterval();if(!this.state.searchExamples){this.fetchSearchExamples();}if(!this.state.recentComments){this.fetchRecentComments();}}if(this.state.results){if((this.state.desperateSearch||!this.state.total)&&this.state.q.length>10){this._fetchSearchAlternatives();}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.match.params.q!==prevProps.match.params.q){if(!this.props.match.params.q){ResetHTMLHeaders();this.setState({q:\"\",originalQ:\"\",artistName:\"\",searching:false,total:null,results:null,resultsPageIndex:0,slowSearch:null,showExamples:false,searchExamples:null,showRecentComments:false,parentSearch:null,desperateSearch:false,searchExample:null,missing:null,searchError:null,by_name:null,by_name_total:null,by_name_limit:null,autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1,redirectTo:null,shareSearch:false});// this.refs.q.value = \"\";\nthis.fetchSearchExamples();}else if(decodeURIComponent(this.props.match.params.q)!==this.state.q){this.startSearchFromLocation(this.props);}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;this.stopSamplePlaceholderInterval();if(this.fillerInterval){window.clearInterval(this.fillerInterval);}if(this.slowSearchTimer){window.clearTimeout(this.slowSearchTimer);}}},{key:\"fetchSearchExamples\",value:function fetchSearchExamples(){var _this2=this;var url=\"/api/search/examples\";return fetch(url).then(function(r){if(r.status===200){return r.json().then(function(results){if(_this2.dismounted){return;}if(results){if(!_this2.state.results&&!_this2.state.searching){_this2.setState({searchExamples:results.examples,showExamples:true});}}});}});}},{key:\"fetchRecentComments\",value:function fetchRecentComments(){var _this3=this;var url=\"/api/comments/recent/home\";return fetch(url).then(function(r){if(r.status===200){return r.json().then(function(results){if(_this3.dismounted){return;}if(results){if(!_this3.state.results&&!_this3.state.searching){_this3.setState({recentComments:results,showRecentComments:true});}}});}});}},{key:\"stopSamplePlaceholderInterval\",value:function stopSamplePlaceholderInterval(){if(this.placeholderSampleInterval){window.clearInterval(this.placeholderSampleInterval);}}},{key:\"startSamplePlaceholderInterval\",value:function startSamplePlaceholderInterval(){var _this4=this;if(this.state.q){return;}// let el = document.querySelector('input[type=\"search\"]')\n// if (!el || el.value) return\nthis.currentPlaceholder=0;if(this.placeholderSampleInterval){window.clearInterval(this.placeholderSampleInterval);}this.placeholderSampleInterval=window.setInterval(function(){_this4.setNextSamplePlaceholder();},3000);}},{key:\"setNextSamplePlaceholder\",value:function setNextSamplePlaceholder(){var _this5=this;if(this.fillerInterval){window.clearInterval(this.fillerInterval);}var placeholder=samplePlaceholders[++this.currentPlaceholder%samplePlaceholders.length];var el=this.searchRef.current;if(!el)return;var slice=0;this.fillerInterval=setInterval(function(){if(!placeholder){// something's gone wrong\nreturn;}el.placeholder=placeholder.substring(0,++slice);if(slice>=placeholder.length){clearInterval(_this5.fillerInterval);el.placeholder+=\"...\";}},10);}},{key:\"submitSearch\",value:function submitSearch(){var q=this.state.q.trim();// let language = this.languageRef.current && this.languageRef.current.value;\n// if (!language && this.state.searchLanguage) {\n//   language = this.state.searchLanguage;\n// }\nvar language=this.state.searchLanguage;var year=this.state.searchYear;var artistName=this.artistRef.current&&this.artistRef.current.value.trim();if(!artistName&&this.state.artistName){if(!this.state.advancedSearch){artistName=this.state.artistName;}}else if(artistName&&!this.state.artistName){this.setState({artistName:artistName});}if(q){var newURL=\"/q/\".concat(encodeURIComponent(q));// only include the language= if it's set and not 'en'\nif(language&&language!==\"en\"){newURL+=\"?language=\".concat(language);}if(year){newURL+=newURL.includes(\"?\")?\"&\":\"?\";newURL+=\"year=\".concat(year);}if(artistName){newURL+=newURL.includes(\"?\")?\"&\":\"?\";newURL+=\"artist=\".concat(encodeURIComponent(artistName));}var currentURL=this.props.location.pathname;if(this.props.location.search){currentURL+=this.props.location.search;}if(newURL===currentURL){// get out of here\nreturn;}this.props.history.push(newURL);this.startSearch(q,language,year,artistName);// XXX this.searchRef.current.blur()????\ndocument.querySelector('input[type=\"search\"]').blur();if(this.state.autocompleteSuggestions){this.setState({autocompleteSuggestions:null,autocompleteSearchSuggestions:null,autocompleteHighlight:-1,showAutocompleteSuggestions:true});}if(this.state.autocompleteArtistSuggestions){this.setState({autocompleteArtistSuggestions:null,autocompleteArtistHighlight:-1});}}}},{key:\"startSearch\",value:function startSearch(q){var _this6=this;var language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var year=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var artist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var page=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var searchExample=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;SetHTMLHeaders({title:\"Searching... - Song Search\"});// The state change is quite differnet depend on it being\n// the first page or a subsequent page.\nif(page){this.setState({searching:true,searchError:null},function(){_this6.sendSearch(q,language,year,artist,page,searchExample);});}else{this.setState({searching:true,searchError:null,// suggestions: null,\nresults:null,by_name:null,showExamples:false,showRecentComments:false,parentSearch:null},function(){_this6.sendSearch(q,language,year,artist,page,searchExample);_this6.slowSearchTimer=window.setTimeout(function(){if(!_this6.state.searchError&&!_this6.state.results){_this6.setState({slowSearch:true});}},5*1000);});}}},{key:\"sendSearch\",value:function sendSearch(q){var _this7=this;var language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var year=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var artist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var page=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var searchExample=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var url=\"/api/search?q=\".concat(encodeURIComponent(q));if(language){url+=\"&language=\".concat(language);}if(year){url+=\"&year=\".concat(year);}if(artist){url+=\"&artist=\".concat(encodeURIComponent(artist));}if(page){url+=\"&page=\".concat(page+1);url+=\"&searched=\".concat(this.searched);}else if(this.state.originalQ){url+=\"&original=\".concat(this.searched);}if(this.state.desperateSearch&&!this.state.originalQ){url+=\"&desperate=true\";}if(searchExample){url+=\"&example=\".concat(searchExample);}return cachedFetch(url).then(function(r){if(r.status===200){return r.json().then(function(results){if(_this7.slowSearchTimer){window.clearTimeout(_this7.slowSearchTimer);}if(_this7.dismounted){return;}if(!results){return;}if(results.error){_this7.setState({searchError:results.error,searching:false,slowSearch:null});SetHTMLHeaders({title:\"Sorry, search error\"});return;}else if(_this7.state.searchError){_this7.setState({searchError:null});}SetHTMLHeaders({title:\"\".concat(q,\" - Song Search\")});// This is the first time sendSearch is called for\n// this q (and this offset).\n// Decide whether to get suggestions searches...\n// console.log(\n//   'Results:', results.results.length,\n//   'Total:', results.total,\n//   'Limit:', results.limit,\n// )\n// set this so that the onExpandClick can use it\nif(!page){_this7.searched=results.searched;}// set in localStorage for the sake \"Open in a new tab\"\ntry{localStorage.setItem(\"searched\",\"\".concat(results.searched,\",\").concat(new Date().getTime()));}catch(ex){console.warn(\"'localStorage.setItem(\\\"searched\\\")' didn't work\");}var allResults;if(page){allResults=[];_this7.state.results.forEach(function(r){return allResults.push(r);});results.results.forEach(function(r){return allResults.push(r);});}else{allResults=results.results;}_this7.setState({desperateSearch:results.desperate,missing:results.missing,popularityFactor:results.popularity_factor,parentSearch:results.searched,searching:false,results:allResults,keyPhrases:null,by_name:results.by_name,by_name_total:results.by_name_total,by_name_limit:results.by_name_limit,total:results.total,searchError:null,slowSearch:null},function(){if((_this7.state.desperateSearch||!_this7.state.total)&&_this7.state.q.length>10){_this7._fetchSearchAlternatives();}});});}else{r.text().then(function(text){SetHTMLHeaders({title:\"Search Error\"});_this7.setState({searching:false,searchError:{status:r.status,text:text},slowSearch:false});});}});}},{key:\"fetchAutocompleteSuggestions\",value:function fetchAutocompleteSuggestions(q){var _this8=this;var language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var cacheHash=q.trim();var url=\"/api/search/autocomplete?q=\".concat(encodeURIComponent(q));if(language){cacheHash+=language.trim();url+=\"&language=\".concat(language);}var cached=this._autocompleteSuggestionsCache[cacheHash];if(cached){return Promise.resolve(cached).then(function(results){_this8.setState({autocompleteSuggestions:results.matches,autocompleteSearchSuggestions:results.search_suggestions,autocompleteHighlight:-1,missing:results.missing});});}// Store a \"global\" of what the latest q was.\nthis.autocompleteWaitingFor=q;return fetch(url).then(function(r){if(r.status===200){return r.json().then(function(results){if(_this8.dismounted){return;}if(q.startsWith(_this8.autocompleteWaitingFor)){_this8._autocompleteSuggestionsCache[cacheHash]=results;if(_this8.state.q){_this8.setState({autocompleteSuggestions:results.matches,autocompleteSearchSuggestions:results.search_suggestions,autocompleteHighlight:-1});}}});}});}},{key:\"fetchAutocompleteArtistSuggestions\",value:function fetchAutocompleteArtistSuggestions(q){var _this9=this;var url=\"/api/search/autocomplete?q=\".concat(q,\"&artist=true\");return fetch(url).then(function(r){if(r.status===200){return r.json();}}).then(function(results){if(_this9.dismounted){return;}if(results){_this9.setState({autocompleteArtistSuggestions:results.matches,autocompleteArtistHighlight:-1});}});}},{key:\"loadSearchAggregates\",value:// loadSearchLanguages() {\n//   return fetch(\"/api/search/languages\").then(r => {\n//     if (r.status === 200) {\n//       r.json().then(r => {\n//         this.setState({ searchLanguages: r.languages });\n//       });\n//     }\n//   });\n// }\nfunction loadSearchAggregates(){var _this10=this;return fetch(\"/api/search/aggregates\").then(function(r){if(r.status===200){r.json().then(function(r){_this10.setState({searchLanguages:r.languages,searchYears:r.years});});}});}},{key:\"render\",value:function render(){var _this11=this;var _this$state=this.state,redirectTo=_this$state.redirectTo,searchYear=_this$state.searchYear;if(redirectTo){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:redirectTo,push:true});}var results=null;var pagination=null;if(this.state.results){var rows=this.state.results;if(this.state.onlyResults){var onlyIds=this.state.onlyResults.map(function(r){return r.id;});rows=rows.filter(function(row){return onlyIds.includes(row.id);});}results=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Results,{results:rows,searched:this.searched,popularityFactor:this.state.popularityFactor,showYear:Boolean(searchYear)});if(this.state.results.length<this.state.total){pagination=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Pagination,{location:this.props.location,page:this.state.resultsPageIndex,onLoadMore:this.onLoadMore});}}var byName=null;if(this.state.by_name&&this.state.by_name.length){byName=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SongsByName,{results:this.state.by_name,total:this.state.by_name_total,limit:this.state.by_name_limit,loadMoreByName:this.loadMoreByName});}var searchToggles=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"help-block toggles\",children:[this.state.results&&this.state.results.length?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:this.state.shareSearch?\"btn btn-default btn-sm active\":\"btn btn-default btn-sm\",onClick:this.toggleShareSearch,children:this.state.shareSearch?\"Hide share search\":\"Share search results\"}):null,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:this.state.advancedSearch?\"btn btn-default btn-sm active\":\"btn btn-default btn-sm\",onClick:this.toggleAdvancedSearch,children:this.state.advancedSearch?\"Hide search options\":\"Search options\"})]});var advancedSearchStatus=null;if(!this.state.advancedSearch){var parts=[];// if you currently don't have the advanced search options open,\n// show what's currently selected.\nif(this.state.searchLanguage&&this.state.searchLanguage!==\"en\"){var language=this.state.searchLanguages.filter(function(e){return e.code===_this11.state.searchLanguage;})[0].language;parts.push(\"Language: \".concat(language));}if(this.state.searchYear){parts.push(\"Years: \".concat(this.displayYears(parseInt(this.state.searchYear))));}if(this.state.artistName){parts.push(\"Artist: \".concat(this.state.artistName));}if(parts.length){advancedSearchStatus=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"help-block advanced-search-status\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Search options:\"}),\" \",parts.join(\", \")]});}}var advancedInput=null;if(this.state.advancedSearch){advancedInput=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"advanced\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-group\",style:{position:\"relative\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"search\",ref:this.artistRef,value:this.state.artistName,className:\"form-control input-lg\",maxLength:100,onFocus:this.onFocusArtist,onBlur:this.onBlurArtist,onChange:this.onChangeArtistName,onKeyDown:this.onKeyDownArtistSearch,\"aria-label\":\"Artist search\",placeholder:\"Artist or band name\"}),this.state.autocompleteArtistSuggestions&&this.state.showAutocompleteArtistSuggestions?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowAutocompleteArtistSuggestions,{onSelectSuggestion:this.onSelectArtistSuggestion,highlight:this.state.autocompleteArtistHighlight,suggestions:this.state.autocompleteArtistSuggestions}):null]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-group\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{ref:this.languageRef,onChange:this.onChangeLanguage,value:this.state.searchLanguage,className:\"form-control\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"Any language\"}),this.state.searchLanguages.map(function(each){var text=each.language;if(each.count===1){text+=\" (1 song)\";}else if(each.count){text+=\" (\".concat(each.count.toLocaleString(),\" songs)\");}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:each.code,children:text},each.code);})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-group\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{// ref={this.yearRef}\nonChange:this.onChangeYear,value:this.state.searchYear,className:\"form-control\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"Any year\"}),this.state.searchYears.map(function(each){var text=_this11.displayYears(each.year);if(each.count===1){text+=\" (1 song)\";}else if(each.count){text+=\" (\".concat(each.count.toLocaleString(),\" songs)\");}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:each.year,children:text},text);})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-group text-right\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Search Now\"})})]});}var keyPhrases=null;if(this.state.results&&// !this.state.results.length &&\nthis.state.keyPhrases&&this.state.keyPhrases.length){keyPhrases=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowKeyPhrases,{nothingFound:!this.state.results.length,phrases:this.state.keyPhrases,submitPhrase:this.submitPhrase});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:this.onSubmit,action:\"/api/search/redirect\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-group\",style:{position:\"relative\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"input-group input-group-lg\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"search\",ref:this.searchRef,name:\"q\",autoComplete:\"off\",value:this.state.q,onFocus:this.onFocusSearch,onBlur:this.onBlurSearch,onChange:this.onChangeSearch,onKeyDown:this.onKeyDownSearch,className:\"form-control\",maxLength:150,\"aria-label\":\"Lyrics search\",placeholder:this.state.placeholder}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"input-group-btn\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-default btn-lg\",type:\"submit\",title:\"Click to search\",children:\"Search\"})})]}),this.state.searchMaxLength?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowMaxlengthWarning,{length:this.state.searchMaxLength[0],maxLength:this.state.searchMaxLength[1]}):null,this.state.desperateSearch&&this.state.results&&this.state.results.length&&!(this.state.showAutocompleteSuggestions&&this.state.autocompleteSuggestions)?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowDesperateSearchWarning,{}):null,!this.state.desperateSearch&&this.state.missing&&this.state.results&&this.state.results.length&&!(this.state.showAutocompleteSuggestions&&this.state.autocompleteSuggestions)?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowMissingSearchWarning,{missing:this.state.missing}):null,this.state.autocompleteSuggestions&&this.state.showAutocompleteSuggestions?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowAutocompleteSuggestions,{q:this.state.q,onSelectSuggestion:this.onSelectSuggestion,onSelectSuggestionAll:this.onSelectSuggestionAll,highlight:this.state.autocompleteHighlight,suggestions:this.state.autocompleteSuggestions,searchSuggestions:this.state.autocompleteSearchSuggestions}):null]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowResultCount,{results:this.state.results,total:this.state.total,byName:this.state.by_name,onlyResults:this.state.onlyResults}),searchToggles,advancedSearchStatus,this.state.shareSearch?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_ShareInput,{searched:this.searched}):null,advancedInput]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"waldo-tag-11815\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"script\",{children:[\"googletag.cmd.push(function() {\\n              googletag.display = \\\"waldo-tag-11815\\\";\\n            })\",\";\"]})}),this.state.searchError?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SearchError,{error:this.state.searchError}):null,this.state.showExamples?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowExamples,{sampleSearch:this.sampleSearch,examples:this.state.searchExamples}):null,this.state.showRecentComments&&this.state.recentComments?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_ShowRecentCommentsWrapper,{comments:this.state.recentComments.comments}):null,byName,keyPhrases,results,this.state.searching?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Common_Loading,{text:\"Searching...\"}):null,pagination,this.state.slowSearch?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SlowSearch,{reloadSearch:this.reloadSearch}):null]});}}]);return Home;}(react_default.a.Component);/* harmony default export */ var src_Home = (Home_Home);var Home_ShowRecentCommentsWrapper=/*#__PURE__*/function(_React$PureComponent){Object(inherits[\"a\" /* default */])(ShowRecentCommentsWrapper,_React$PureComponent);var _super2=Object(createSuper[\"a\" /* default */])(ShowRecentCommentsWrapper);function ShowRecentCommentsWrapper(){Object(classCallCheck[\"a\" /* default */])(this,ShowRecentCommentsWrapper);return _super2.apply(this,arguments);}Object(createClass[\"a\" /* default */])(ShowRecentCommentsWrapper,[{key:\"render\",value:function render(){var comments=this.props.comments;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"recent-comments\",style:{marginTop:50},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h4\",{children:[\"Recent Comments (\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/comments\",children:\"All\"}),\")\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowRecentComments,{comments:comments,isRoot:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"load-more\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/comments\",children:\"More recent comments\"})})]});}}]);return ShowRecentCommentsWrapper;}(react_default.a.PureComponent);var ShowResultCount=/*#__PURE__*/react_default.a.memo(function(_ref){var results=_ref.results,total=_ref.total,onlyResults=_ref.onlyResults,byName=_ref.byName;if(!results){return null;}var countResults=null;if(results){var byNameCount=byName?byName.length:0;if(onlyResults){countResults=onlyResults.length+byNameCount;}else{countResults=results.length+byNameCount;}}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"result-metadata text-right\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[total>=10000?\"More than \":\"\",total.toLocaleString(),\" \",total===1?\"song found\":\"songs found\"]}),\" \",countResults&&countResults<total?\"(showing \".concat(countResults,\")\"):null]});});var Home_ShareInput=/*#__PURE__*/function(_React$PureComponent2){Object(inherits[\"a\" /* default */])(ShareInput,_React$PureComponent2);var _super3=Object(createSuper[\"a\" /* default */])(ShareInput);function ShareInput(){var _this12;Object(classCallCheck[\"a\" /* default */])(this,ShareInput);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this12=_super3.call.apply(_super3,[this].concat(args));_this12.state={copied:false,failed:false,hasFocused:false};_this12.absurlRef=/*#__PURE__*/react_default.a.createRef();return _this12;}Object(createClass[\"a\" /* default */])(ShareInput,[{key:\"render\",value:function render(){var _this13=this;var absoluteUrl=window.location.href;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form-group\",style:{marginTop:30},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"input-group\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"sr-only\",children:\"URL:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{ref:this.absurlRef,type:\"text\",className:\"form-control\",readOnly:true,value:absoluteUrl,onFocus:function onFocus(){if(!_this13.state.hasFocused){_this13.absurlRef.current.select();_this13.setState({hasFocused:true});}}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"input-group-btn\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:this.state.copied?\"btn btn-success\":\"btn btn-primary\",title:\"Click to copy to clipboard\",onClick:function onClick(event){event.preventDefault();_this13.absurlRef.current.select();if(copy_to_clipboard_default()(absoluteUrl)){_this13.setState({copied:true,failed:false},function(){if(_this13.props.searched&&!_this13.copied){_this13.copied=_this13.props.searched;fetch(\"/api/search/copied/\".concat(_this13.props.searched),{method:\"POST\"});}});}else{_this13.setState({copied:false,failed:true});}},children:this.state.copied?\"Copied to clipboard\":\"Copy to clipboard\"})})]}),this.state.copied?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"The URL to this search has now been copied to your clipboard so you can paste it anywhere. Thanks!\"}):null]});}}]);return ShareInput;}(react_default.a.PureComponent);var ShowKeyPhrases=/*#__PURE__*/react_default.a.memo(function(_ref2){var phrases=_ref2.phrases,submitPhrase=_ref2.submitPhrase,nothingFound=_ref2.nothingFound;var subTitle=null;if(nothingFound){if(phrases.length===1){subTitle=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"But, try this...\"});}else{subTitle=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"But, try these...\"});}}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"key-phrases\",children:[nothingFound?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Nothing found\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Fuzzy results. Try breaking it up...\"}),subTitle,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"table\",{className:\"table suggestions table-condensed\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:phrases.map(function(phrase){var url=\"/q/\".concat(phrase.phrase);if(phrase.year){url+=\"?year=\".concat(phrase.year);}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:url,onClick:function onClick(e){return submitPhrase(e,phrase);},children:phrase.diff_html?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{dangerouslySetInnerHTML:{__html:phrase.diff_html}}):phrase.phrase})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"td\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:phrase.total}),\" \",phrase.total===1?\"song\":\"songs\"]})]},phrase.phrase);})})})]});});var ShowAutocompleteSuggestions=/*#__PURE__*/react_default.a.memo(function(_ref3){var q=_ref3.q,highlight=_ref3.highlight,suggestions=_ref3.suggestions,searchSuggestions=_ref3.searchSuggestions,onSelectSuggestion=_ref3.onSelectSuggestion,onSelectSuggestionAll=_ref3.onSelectSuggestionAll;if(!suggestions.length){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"autocomplete\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{children:[searchSuggestions&&q&&searchSuggestions.total?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"li\",{onClick:onSelectSuggestionAll,className:highlight===0?\"active search-suggestion\":\"search-suggestion\",children:[searchSuggestions.capped?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{style:{float:\"right\"},href:\"/q/\"+encodeURIComponent(searchSuggestions.term),children:[searchSuggestions.total.toLocaleString(),\" \",searchSuggestions.desperate?\"approximate matches\":\"good matches\"]}):null,/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"/q/\"+encodeURIComponent(searchSuggestions.term),children:[\"Search for \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:q})]})]}):null,suggestions.map(function(s,index){var className=index+1===highlight?\"active\":\"\";return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:className,onClick:function onClick(e){return onSelectSuggestion(e,s);},children:s.id?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowAutocompleteSuggestionSong,{song:s}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowAutocompleteSuggestion,{text:s.text,html:s.html,found:s.found})},s.id?s.id:s.text);})]})});});var ShowAutocompleteSuggestion=/*#__PURE__*/react_default.a.memo(function(_ref4){var found=_ref4.found,html=_ref4.html;if(found){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"search\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:found}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{dangerouslySetInnerHTML:{__html:html}})]});}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"search\",dangerouslySetInnerHTML:{__html:html}});}});var ShowAutocompleteSuggestionSong=/*#__PURE__*/react_default.a.memo(function(_ref5){var song=_ref5.song;var imageUrl=placeholderImage;if(song.image){if(song.image.thumbnail100){imageUrl=song.image.thumbnail100;}else{imageUrl=song.image.url;}}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media autocomplete-suggestion-song\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"media-left\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutocompleteImage,{url:imageUrl,name:song.name})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media-body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h5\",{className:\"artist-name\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:song.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\" by \"}),song.artist.name]}),song.fragments.map(function(fragment,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{dangerouslySetInnerHTML:{__html:fragment}},\"\".concat(song.id,\":\").concat(i));})]})]});});var ShowAutocompleteArtistSuggestions=/*#__PURE__*/react_default.a.memo(function(_ref6){var highlight=_ref6.highlight,suggestions=_ref6.suggestions,onSelectSuggestion=_ref6.onSelectSuggestion;if(!suggestions.length){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"autocomplete\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:suggestions.map(function(s,index){var className=index===highlight?\"active\":\"\";return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:className,onClick:function onClick(e){return onSelectSuggestion(e,s);},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"media-left\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutocompleteImage,{url:s.thumbnail100||s.image||placeholderImage,name:s.text})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"media-body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"artist-name\",dangerouslySetInnerHTML:{__html:s.html}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"artist-metadata\",children:[s.songs?s.songs:\"0\",\" songs\"]})]})]})},\"\".concat(s.text).concat(index));})})});});function ShowMaxlengthWarning(_ref7){var length=_ref7.length,maxLength=_ref7.maxLength;var className=\"help-block maxlength\";if(length===maxLength){className+=\" danger\";}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:className,children:[length,\" of max \",maxLength,\" characters!\"]});}function ShowDesperateSearchWarning(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"help-block warning\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Note!\"}),\" Nothing could be found with that exact search. Showing fuzzy matches.\"]});}function ShowMissingSearchWarning(_ref8){var missing=_ref8.missing;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"help-block warning\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Note!\"}),\" Results found by discarding\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{textDecoration:\"line-through\"},children:missing}),\".\"]});}var ShowExamples=/*#__PURE__*/react_default.a.memo(function(_ref9){var sampleSearch=_ref9.sampleSearch,examples=_ref9.examples;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"examples\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Successful searches for songs by lyrics\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:examples.map(function(search){var link=\"/q/\"+encodeURIComponent(search.term);link+=\"?example=\".concat(search.id);if(search.artist){link+=\"&artist=\".concat(encodeURIComponent(search.artist));}if(search.language){link+=\"&language=\".concat(encodeURIComponent(search.language));}if(search.year){link+=\"&year=\".concat(search.year);}var searchMeta=null;var searchMetaStrings=[];if(search.artist){searchMetaStrings.push([\"artist\",search.artist]);}if(search.language){searchMetaStrings.push([\"language\",search.language_human]);}if(search.year){searchMetaStrings.push([\"year\",search.year]);}if(searchMetaStrings.length){searchMeta=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"(\",searchMetaStrings.map(function(n,i){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_default.a.Fragment,{children:[n[0],\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:n[1]}),i+1<searchMetaStrings.length?\", \":\"\"]},n[0]);}),\")\"]});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"li\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:link,onClick:function onClick(e){return sampleSearch(e,search);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:search.term})}),\" \",searchMeta,\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"i\",{children:[search.total_found,\" found\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),search.opened.map(function(song){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"opened\",children:[\"clicked on\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router_dom[\"b\" /* Link */],{to:song._url,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:song.name}),\" by \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:song.artist.name})]})]},song.id);})]},search.id);})})]});});function SlowSearch(_ref10){var reloadSearch=_ref10.reloadSearch;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"slow-search\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Sorry, search seems to take longer than normal!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Perhaps it got stuck? \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-default btn-sm\",onClick:reloadSearch,children:\"Reload search\"})]})]});}function SearchError(_ref11){var error=_ref11.error;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"search-error\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Sorry, an error occured\"}),error.status===400?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"The query was invalid \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:error.text})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"The server basically failed to compute the search\"}),error.status>=500&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Perhaps simply try again a little later.\"}),error.status>=500&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-default\",onClick:function onClick(event){window.location.reload(true);},children:\"Reload to try again\"})})]});}var Home_Results=/*#__PURE__*/function(_React$PureComponent3){Object(inherits[\"a\" /* default */])(Results,_React$PureComponent3);var _super4=Object(createSuper[\"a\" /* default */])(Results);function Results(){var _this14;Object(classCallCheck[\"a\" /* default */])(this,Results);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this14=_super4.call.apply(_super4,[this].concat(args));_this14.firstLoad=true;return _this14;}Object(createClass[\"a\" /* default */])(Results,[{key:\"componentDidMount\",value:function componentDidMount(){if(!isServer){loadCarbonScript();}this.firstLoad=false;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){// Is this if-statement necessary? I mean, isn't componentDidUpdate\n// something that *only* happens with non-SSR rendering??\nif(!isServer&&prevProps.results!==this.props.results){loadCarbonScript();}}},{key:\"render\",value:function render(){var _this15=this;var _this$props=this.props,results=_this$props.results,searched=_this$props.searched,popularityFactor=_this$props.popularityFactor,showYear=_this$props.showYear;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[!NO_ADS?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"carbonadsouter\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{id:\"_nocardonads\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"results\",children:results.map(function(result,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home_Result,{result:result,searched:searched,expandedByDefault:results.length===1,firstResult:index===0,popularityFactor:popularityFactor,firstLoad:_this15.firstLoad,showYear:showYear},result.id);})})]});}}]);return Results;}(react_default.a.PureComponent);var Home_Result=/*#__PURE__*/function(_React$PureComponent4){Object(inherits[\"a\" /* default */])(Result,_React$PureComponent4);var _super5=Object(createSuper[\"a\" /* default */])(Result);function Result(){var _this16;Object(classCallCheck[\"a\" /* default */])(this,Result);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this16=_super5.call.apply(_super5,[this].concat(args));_this16.state={collapsed:true,itunes:null,amazon:null,textHtml:_this16.props.result.text_html};_this16.affiliateLookupStarted=[];_this16.onExpandClick=function(event){event.preventDefault();_this16.expand();};return _this16;}Object(createClass[\"a\" /* default */])(Result,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.expandedByDefault){this.expand();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"expand\",value:function expand(){var _this17=this;var wasCollapsed=this.state.collapsed;this.setState({collapsed:false});this.fetchTextHTML().then(function(){if(wasCollapsed){if(_this17.props.searched){var recordURL=\"/api/song/\".concat(_this17.props.result.id,\"/\");recordURL+=\"expand/\".concat(_this17.props.searched);fetch(recordURL,{method:\"POST\"}).then(function(r){return r.json();}).then(function(result){// nothing to do\n});}}});}},{key:\"fetchTextHTML\",value:function fetchTextHTML(){var _this18=this;if(this.state.textHtml){return Promise.resolve();}else{var url=\"/api/song/\".concat(this.props.result.id,\"?text_only=true\");return fetch(url).then(function(r){return r.json();}).then(function(result){if(_this18.dismounted){return;}_this18.setState({textHtml:result.song.text_html});});}}},{key:\"render\",value:function render(){var _this$props2=this.props,result=_this$props2.result,popularityFactor=_this$props2.popularityFactor,firstResult=_this$props2.firstResult,firstLoad=_this$props2.firstLoad,showYear=_this$props2.showYear;var className=\"result\";if(this.state.collapsed){className+=\" collapsed\";}var songURL=result._url;var image;if(result.image){image=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SongImage,{url:result.image.url,className:\"pull-right img-thumbnail album\",name:result.image.name,forceLoad:firstResult||!firstLoad});}else{image=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SongImage,{url:null,className:\"pull-right img-thumbnail\",name:result.artist.name,forceLoad:firstResult||!firstLoad});}var rest=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"read-more\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:songURL,children:\"VIEW SONG\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:songURL,onClick:this.onExpandClick,children:\"EXPAND SONG\"})]});if(!this.state.collapsed){var searchedId=null;var searched=null;try{searched=localStorage.getItem(\"searched\");}catch(ex){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");}if(searched){if(searched.includes(\",\")){// The new way\nsearchedId=parseInt(searched.split(\",\")[0],10);}else{// The old way!\nsearchedId=parseInt(searched,10);}}rest=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"rest\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Full Text\"}),this.state.textHtml?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RenderParagraphs,{text:this.state.textHtml}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Loading full text...\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_SongComments,{comments:null,commentsCount:null,song:result,searchedId:searchedId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AmazonRelatedProducts,{song:result}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"load-more\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:songURL,children:\"GO TO SONG PAGE\"})})]})});}var artistName=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:result.artist.name});if(result.artist.fragment){artistName=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{dangerouslySetInnerHTML:{__html:result.artist.fragment}});}var tooltipTitle;if(false){ var score; }else{tooltipTitle=\"Click to view just this song\";}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:className,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"head\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:songURL,children:image}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h2\",{title:tooltipTitle,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:songURL,children:result.name}),showYear&&result.year&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"year\",children:[\" \",result.year]}), false?/*#__PURE__*/undefined:null]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h3\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",artistName]}),result.albums.length?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Albums,{albums:result.albums}):null]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"fragments\",children:result.fragments.map(function(fragment,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{dangerouslySetInnerHTML:{__html:fragment}},\"\".concat(result.id).concat(i));})}),rest]});}}]);return Result;}(react_default.a.PureComponent);var SongImage=/*#__PURE__*/react_default.a.memo(function(_ref12){var url=_ref12.url,name=_ref12.name,forceLoad=_ref12.forceLoad,className=_ref12.className;// If the song doesn't haven an image, no point messing around.\nif(!url){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:placeholderImage,className:className,title:name,alt:name});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:url,className:className,title:name,alt:name,loading:forceLoad?undefined:\"lazy\"});});// This assumes that we'll sooner or later need the lazyloadThumbnailImage image\nif(!isServer){new Image().src=lazyloadThumbnailImage;}// Module level \"cache\" of which image URLs have been successfully inserted\n// into the DOM at least once.\n// By knowing these, we can, on repeat URLs, avoid the whole lazy-load\n// image swapping trick.\nvar loadedOnce=new Set();function AutocompleteImage(_ref13){var url=_ref13.url,name=_ref13.name;var _useState=Object(react[\"useState\"])(loadedOnce.has(url)?url:lazyloadThumbnailImage),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),src=_useState2[0],setSrc=_useState2[1];Object(react[\"useEffect\"])(function(){var preloadImg=null;var dismounted=false;if(src===lazyloadThumbnailImage){var cb=function cb(){if(!dismounted){setSrc(url);}loadedOnce.add(url);};// This must come before .decode() otherwise Safari will\n// raise an EncodingError.\n// We need to preload the eventually needed image.\npreloadImg=new Image();preloadImg.src=url;// https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-decode\n// https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decode#Browser_compatibility\npreloadImg.decode?preloadImg.decode().then(cb,cb):preloadImg.onload=cb;// https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decoding\npreloadImg.decoding=\"sync\";}return function(){if(preloadImg){// Immediately undo the preloading since we might not need this image.\n// See https://jsfiddle.net/nw34gLgt/ for demo of this technique.\npreloadImg.src=\"\";}dismounted=true;};},[url,src]);if(!url){// Don't even bother with lazy loading.\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"img-rounded\",src:lazyloadThumbnailImage,alt:name,title:name});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"img-rounded\",src:src,alt:name,title:name});}function ShowSongScore(_ref14){var song=_ref14.song,_ref14$factor=_ref14.factor,factor=_ref14$factor===void 0?20:_ref14$factor;var s=song.score-factor*song.popularity;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"code\",{children:[song.score.toFixed(3),\" = \",s.toFixed(3),\" + \",factor,\"\\xD7\",song.popularity.toFixed(4)]});}var SongsByName=/*#__PURE__*/react_default.a.memo(function(_ref15){var results=_ref15.results,total=_ref15.total,limit=_ref15.limit,loadMoreByName=_ref15.loadMoreByName;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"by-name\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Songs by name\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:results.map(function(s){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router_dom[\"b\" /* Link */],{to:s._url,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{dangerouslySetInnerHTML:{__html:s.fragment}}),\" by\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:s.artist.name})]})},s.id);})}),total>limit?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-default btn-sm\",onClick:loadMoreByName,children:total>20?\"Show more songs by name\":\"Show all (\".concat(total,\") songs by name\")}):null]});});var Albums=/*#__PURE__*/react_default.a.memo(function(_ref16){var albums=_ref16.albums;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"albums\",children:albums.map(function(album,i){var parts=[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:album.name},album.id)];if(album.year){parts.push(\" (\".concat(album.year,\")\"));}if(i+1<albums.length){parts.push(\", \");}return parts;})});});var Home_Pagination=/*#__PURE__*/react_default.a.memo(function(_ref17){var location=_ref17.location,onLoadMore=_ref17.onLoadMore;var currentURL=location.pathname+location.search;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"load-more\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:currentURL,onClick:onLoadMore,children:\"LOAD MORE RESULTS\"})});});\n// CONCATENATED MODULE: ./src/About.js\nvar About_About=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(About,_Component);var _super=Object(createSuper[\"a\" /* default */])(About);function About(){var _this;Object(classCallCheck[\"a\" /* default */])(this,About);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={serverError:null,totals:_this.props.totalStats&&_this.props.totalStats.totals||null};return _this;}Object(createClass[\"a\" /* default */])(About,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;SetHTMLHeaders({title:\"About - Song Search\"});if(!this.state.totals){return cachedFetch(\"/api/stats/totals-simple\").then(function(r){if(r.ok){return r.json().then(function(results){if(results){_this2.setState({serverError:null,totals:results.totals});}});}else{_this2.setState({serverError:r});}});}}},{key:\"render\",value:function render(){var _this$state=this.state,serverError=_this$state.serverError,totals=_this$state.totals;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Made by Peter Bengtsson\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\"For all inquires email \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"mailto:info@songsear.ch\",children:\" info@songsear.ch\"})]}),serverError&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ServerError,{}),totals?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowNumbers,{numbers:totals}):null]});}}]);return About;}(react[\"Component\"]);/* harmony default export */ var src_About = (About_About);function ShowNumbers(_ref){var numbers=_ref.numbers;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"numbers\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"There are currently\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormattedNumber,{value:numbers.songs}),\" songs\"]}),\" \",\"to search amongst\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormattedNumber,{value:numbers.artists}),\" artists\"]}),\" \",\"in\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormattedNumber,{value:numbers.albums}),\" albums\"]}),\".\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"In total\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"b\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FormattedNumber,{value:numbers.searches}),\" searches\"]}),\" \",\"have been made.\"]})]});}\n// CONCATENATED MODULE: ./src/PrivacyPolicy.js\nfunction PrivacyPolicy(){Object(react[\"useEffect\"])(function(){document.title=\"Privacy Policy of Song Search\";});var _useSWR=Object(swr_esm[\"a\" /* default */])(\"\".concat(\"\",\"/static/privacy-policy-text.html\"),/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(url){var r;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:r=_context.sent;if(r.ok){_context.next=6;break;}if(false){}throw new Error(\"\".concat(r.status,\" on \").concat(url));case 6:_context.next=8;return r.text();case 8:return _context.abrupt(\"return\",_context.sent);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),{revalidateOnFocus:false}),data=_useSWR.data,error=_useSWR.error;if(error){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ServerError,{});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Privacy Policy\"}),data?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{dangerouslySetInnerHTML:{__html:data}}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:\"Loading privacy policy text...\"})})]});}/* harmony default export */ var src_PrivacyPolicy = (PrivacyPolicy);\n// EXTERNAL MODULE: ./src/Song.css\nvar src_Song = __webpack_require__(51);\n\n// CONCATENATED MODULE: ./src/Song.js\nvar Song_PUBLIC_URL= false||\"\";var Song_placeholderImage=Song_PUBLIC_URL+\"/static/placeholder.png\";var Song_skullImage=Song_PUBLIC_URL+\"/static/skull.png\";var Song_NO_ADS=Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_NO_ADS===\"true\";var Song_AdTag=function AdTag(props){Object(react[\"useEffect\"])(function(){if(window.cf_async===undefined){window.cf_async=false;}document.getElementById(\"inject_ad\");var unique_part=Math.floor(Math.random()*999999999);var opts={artist:props.Artistname,song:props.Songname,adunit_id:100004858,div_id:\"cf_async_\"+unique_part};var cf_div=document.createElement(\"div\");cf_div.setAttribute(\"id\",opts.div_id);document.getElementById(\"inject_ad\").parentNode.setAttribute(\"id\",\"ad_\"+unique_part);document.getElementById(\"ad_\"+unique_part).appendChild(cf_div);var c=function c(){cf.showAsyncAd(opts);};if(typeof window.cf!==\"undefined\")c();else{cf_async=!0;var r=document.createElement(\"script\"),s=document.getElementsByTagName(\"script\")[0];r.async=!0;r.src=\"//srv.tunefindforfans.com/fruits/apricots.js\";r.readyState?r.onreadystatechange=function(){if(\"loaded\"==r.readyState||\"complete\"==r.readyState)r.onreadystatechange=null,c();}:r.onload=c;s.parentNode.insertBefore(r,s);}},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"inject_ad\"})});};var Song_Songhead=function Songhead(props){Object(react[\"useEffect\"])(function(){if(window.ddcf_async===undefined){window.ddcf_async=false;}document.getElementById(\"inject_cf_ad\");var unique_part_add=Math.floor(Math.random()*999999999);var arr={artist:props.Artistname,song:props.Songname,adunit_id:100005466,flex:true,div_id:\"cf_async_add_\"+unique_part_add};var cf_add=document.createElement(\"div\");cf_add.setAttribute(\"id\",arr.div_id);document.getElementById(\"inject_cf_ad\").parentNode.setAttribute(\"id\",\"cf_ad_\"+unique_part_add);document.getElementById(\"cf_ad_\"+unique_part_add).appendChild(cf_add);var c=function c(){cf.showAsyncAd(arr);};if(typeof window.cf!==\"undefined\")c();else{cf_async=!0;var r=document.createElement(\"script\"),s=document.getElementsByTagName(\"script\")[0];r.async=!0;r.src=\"//srv.tunefindforfans.com/fruits/apricots.js\";r.readyState?r.onreadystatechange=function(){if(\"loaded\"==r.readyState||\"complete\"==r.readyState)r.onreadystatechange=null,c();}:r.onload=c;s.parentNode.insertBefore(r,s);}},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"inject_cf_ad\"})});};var Song_Song=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Song,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Song);function Song(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Song);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={song:_this.props.song||null,loading:false,notFound:_this.props.songNotFound||false,serverError:null};return _this;}Object(createClass[\"a\" /* default */])(Song,[{key:\"componentDidMount\",value:function componentDidMount(){var match=this.props.match;var id=parseInt(match.params.id,10);if(!this.state.song||this.state.song.id!==id){if(!this.props.songNotFound){this.loadSong(id);}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this2=this;if(this.props.match.params.id!==prevProps.match.params.id){this.setState({song:null,loading:false,notFound:false,serverError:null},function(){try{localStorage.removeItem(\"searched\");}catch(ex){console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\");}_this2.loadSong(_this2.props.match.params.id);});}}},{key:\"loadSong\",value:function loadSong(id){var _this3=this;SetHTMLHeaders({title:\"Loading... - Song Search\"});if(!isServer){this.showLoadingSoon=window.setTimeout(function(){if(!_this3.dismounted){if(!_this3.state.serverError&&!_this3.state.notFound&&!_this3.state.song&&!_this3.state.loading){_this3.setState({loading:true});}}},500);}var url=\"/api/song/\".concat(id);var searched=null;try{searched=localStorage.getItem(\"searched\");}catch(ex){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");}if(searched){if(searched.includes(\",\")){// It *used* to be that what was stored in localStorage.searched was just the\n// search ID. Then in April 2019 this changed to become `ID,timestamp`.\n// E.g. '92613,1556152340091'. So, we need to deal with handling both\n// the new and the old.\nvar timestamp=parseInt(searched.split(\",\")[1],10);var age=(new Date().getTime()-timestamp)/1000;if(age>3600){searched=null;}else{searched=searched.split(\",\")[0];}}if(searched){url+=\"?searched=\".concat(encodeURIComponent(searched));}}return cachedFetch(url).then(function(r){if(!isServer&&_this3.showLoadingSoon){window.clearTimeout(_this3.showLoadingSoon);}if(r.status===400){return r.json().then(function(result){_this3.setState({loading:false});if(result.error&&result.error===\"redirected\"){if(isServer){_this3.setState({notFound:true});}else{document.location.href=result.new_url;}}else{// Some other error\n_this3.setState({serverError:true});}});}else if(r.status===404){_this3.setState({loading:false,notFound:true});SetHTMLHeaders({title:\"Not Found\"});}else if(r.status===500){_this3.setState({loading:false,serverError:true});SetHTMLHeaders({title:\"Song loading error :(\"});}else{return r.json().then(function(result){if(result&&!result.error){_this3.renderResult(result);}else if(result&&result.error){console.log(\"ERROR:\",result.error);}// if (searched) {\n//   localStorage.removeItem(\"searched\");\n// }\nreturn result;});}});}},{key:\"renderResult\",value:function renderResult(result){// Make sure this matches server/render.js\nvar title=\"\".concat(result.song.name,\" lyrics by \").concat(result.song.artist.name);if(!isServer){SetHTMLHeaders({title:title,image:result.song.image});}this.setState({loading:false,song:result.song});}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,song=_this$state.song,serverError=_this$state.serverError,notFound=_this$state.notFound;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[loading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Common_Loading,{text:\"Loading...\"}),song&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Song_Result,{song:song}),serverError&&!song&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ServerError,{}),notFound&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotFound,{})]});}}]);return Song;}(react_default.a.Component);function Song_Result(_ref){var song=_ref.song;// useEffect(() => {\n//   // loadCarbonScript();\n// }, []);\nvar searchedId;if(!isServer){var searched=null;try{searched=localStorage.getItem(\"searched\");}catch(ex){console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");}if(searched){if(searched.includes(\",\")){// The new way\nsearchedId=parseInt(searched.split(\",\")[0],10);}else{// The old way!\nsearchedId=parseInt(searched,10);}}}var comments=null;var commentsCount=null;if(song.comments){comments=song.comments.comments;commentsCount=song.comments.comments_count;}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"header-add\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Song_Songhead,{Songname:song.name,Artistname:song.artist.name})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"result song oka\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RenderSongHead,{song:song}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RenderParagraphs,{song:song.id,text:song.text_html}),!Song_NO_ADS&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AmplifiedSnippet,{song:song}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Comments_SongComments,{comments:comments,commentsCount:commentsCount,song:song,searchedId:searchedId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShareSong,{song:song}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AmazonRelatedProducts,{song:song}),!isServer?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IntersectionLazy,{render:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SpotifySnippet,{song:song});}}):null,!isServer?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IntersectionLazy,{render:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Common_YouTubeSnippet,{song:song});}}):null,!isServer?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowRelated,{song:song}):null]})]});}function AmplifiedSnippet(_ref2){var song=_ref2.song;Object(react[\"useEffect\"])(function(){loadAmplifiedScript({song:song.name,artist:song.artist.name});},[song]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"amplifiedouter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"amplified_100003500\"})});}function ShareSong(_ref3){var song=_ref3.song;var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),showShare=_useState2[0],setShowShare=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),shared=_useState4[0],setShared=_useState4[1];var _useState5=Object(react[\"useState\"])(null),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),shareError=_useState6[0],setShareError=_useState6[1];Object(react[\"useEffect\"])(function(){if(navigator.share){setShowShare(true);}},[]);if(!showShare)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{margin:\"30px 0\",textAlign:\"center\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){var shareData={title:song.name,text:\"I found '\".concat(song.name,\"' on Song Search!\"),url:window.location.href};try{navigator.share(shareData).then(function(){setShared(true);setShareError(null);}).catch(function(e){setShareError(e);}).finally(function(){fetch(\"/api/song/\".concat(song.id,\"/shared/\"),{method:\"POST\"});});}catch(err){setShareError(err);}},children:shared?\"Thanks!\":\"Share this song\"}),shareError&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Sharing failed or was canceled. Oh well.\"})]});}// XXX Check if this React.memo works\nvar RenderSongHead=/*#__PURE__*/react_default.a.memo(function(_ref4){var song=_ref4.song;var image=null;if(song.image){image=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:song.image.url,alt:song.image.name,className:\"song-picture\"});}else{image=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:Song_placeholderImage,alt:song.artist.name,width:150,height:150});}var albums=null;if(song.albums.length){var albumNames=song.albums.map(function(a){if(a.year){return\"\".concat(a.name,\" (\").concat(a.year,\")\");}else{return a.name;}}).join(\", \");albums=/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h3\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"on\"}),\" \",albumNames]});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text-center last\",children:[image,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"\",children:song.name}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h3\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",song.artist.name]}),albums,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Song_AdTag,{Songname:song.name,Artistname:song.artist.name})]})});});var ShowRelated=/*#__PURE__*/react_default.a.memo(function(_ref5){var song=_ref5.song;var _useState7=Object(react[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),related=_useState8[0],setRelated=_useState8[1];var _useState9=Object(react[\"useState\"])(false),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var mounted=react_default.a.useRef(false);Object(react[\"useEffect\"])(function(){if(loading&&related){setLoading(false);}},[related,loading]);function loadRelated(){var url=\"/api/song/\".concat(song.id,\"/related\");return cachedFetch(url).then(function(r){if(r.ok){r.json().then(function(result){if(result&&result.categories){setRelated(result.categories);}});}});}var _started=Object(react[\"useRef\"])();function loadRelatedDebounced(){if(!_started.current){_started.current=new Date().getTime();loadRelated();}}function onEnter(){if(!related&&!loading){loadRelatedDebounced();}}Object(react[\"useEffect\"])(function(){mounted.current=true;return function(){mounted.current=false;};},[]);if(related){if(!related.length){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"related\",children:related.map(function(category){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowRelatedGroup,{label:category.label,songs:category.results},category.label);})});}else if(loading){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Waypoint */],{onEnter:onEnter});});function ShowRelatedGroup(_ref6){var label=_ref6.label,songs=_ref6.songs;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:label}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:songs.map(function(song){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router_dom[\"b\" /* Link */],{to:song._url,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:song.name}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",song.artist.name]})},song.id);})})]});}function NotFound(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"not-found\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Song Not Found\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"Skull\",src:Song_skullImage})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Try another search\"})})]});}/* harmony default export */ var src_Song_0 = (Song_Song);\n// CONCATENATED MODULE: ./src/ErrorBoundaries.js\nvar ErrorBoundaries_PUBLIC_URL= false||\"\";var ErrorBoundaries_skullImage=ErrorBoundaries_PUBLIC_URL+\"/static/skull.png\";var ErrorBoundaries_AppErrorBoundary=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(AppErrorBoundary,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(AppErrorBoundary);function AppErrorBoundary(){var _this;Object(classCallCheck[\"a\" /* default */])(this,AppErrorBoundary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:null,submittedErrorId:null};return _this;}Object(createClass[\"a\" /* default */])(AppErrorBoundary,[{key:\"componentDidCatch\",value:function(){var _componentDidCatch=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(error,errorInfo){var formData,response,submission,submittedErrorId;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append(\"error\",error.toString());formData.append(\"error_info\",JSON.stringify(errorInfo));formData.append(\"url\",document.location.href);formData.append(\"stack\",error.stack);try{if(localStorage.getItem(\"searched\")){formData.append(\"searched\",localStorage.getItem(\"searched\"));}if(localStorage.getItem(\"commentEmail\")){formData.append(\"commentEmail\",localStorage.getItem(\"commentEmail\"));}}catch(ex){console.log(\"Unable to extract localStorage keys\");}_context.prev=6;_context.next=9;return fetch(\"/api/errorboundary\",{method:\"POST\",body:formData});case 9:response=_context.sent;if(!response.ok){_context.next=18;break;}_context.next=13;return response.json();case 13:submission=_context.sent;submittedErrorId=submission.id;this.setState({submittedErrorId:submittedErrorId});_context.next=20;break;case 18:console.log(\"Bad response trying to store error boundary.\");console.error(response);case 20:_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](6);console.log(\"Unable to send error info to server.\");console.error(_context.t0);case 26:case\"end\":return _context.stop();}}},_callee,this,[[6,22]]);}));function componentDidCatch(_x,_x2){return _componentDidCatch.apply(this,arguments);}return componentDidCatch;}()},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{style:{color:\"#b12704\"},children:\"Application Error\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"Skull\",src:ErrorBoundaries_skullImage})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Soooo sorry!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\"It appears the application encountered a crash trying to render this page.\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\"Please try again later or \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"/\",children:\"try another search\"}),\".\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"/\",children:\"Return to home page\"})})}),this.state.submittedErrorId&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Your error has been submitted to our server. \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\"Submission ID: \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:this.state.submittedErrorId})]})]});}return this.props.children;}}],[{key:\"getDerivedStateFromError\",value:function getDerivedStateFromError(error){return{error:error};}}]);return AppErrorBoundary;}(react_default.a.Component);\n// CONCATENATED MODULE: ./src/MuteComment.js\nvar MuteComment_MuteComment=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(MuteComment,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(MuteComment);function MuteComment(){var _this;Object(classCallCheck[\"a\" /* default */])(this,MuteComment);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false,comment:null,muted:false,notFound:false,serverError:null};return _this;}Object(createClass[\"a\" /* default */])(MuteComment,[{key:\"componentDidMount\",value:function(){var _componentDidMount=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _this2=this;var formData,match,response,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:SetHTMLHeaders({title:\"Mute Comment - Song Search\"});window.setTimeout(function(){var _this2$state=_this2.state,comment=_this2$state.comment,loading=_this2$state.loading,notFound=_this2$state.notFound,serverError=_this2$state.serverError;if(!_this2.dismounted&&!comment&&!loading&&!notFound&&!serverError){_this2.setState({loading:true});}},1000);formData=new FormData();match=this.props.match;formData.append(\"oid\",match.params.oid);formData.append(\"id\",match.params.id);_context.prev=6;_context.next=9;return fetch(\"/api/comments/mute\",{method:\"POST\",body:formData});case 9:response=_context.sent;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](6);this.setState({serverError:_context.t0,loading:false});case 15:if(!response.ok){_context.next=22;break;}_context.next=18;return response.json();case 18:result=_context.sent;this.setState({comment:result.comment,muted:true,notFound:false,loading:false,serverError:null},function(){SetHTMLHeaders({title:\"Comment Muted - Song Search\"});});_context.next=23;break;case 22:if(response.status===400){this.setState({comment:null,notFound:true,loading:false,serverError:null},function(){SetHTMLHeaders({title:\"Comment Not Found - Song Search\"});});}else{this.setState({serverError:response,loading:false});}case 23:case\"end\":return _context.stop();}}},_callee,this,[[6,12]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,comment=_this$state.comment,muted=_this$state.muted,notFound=_this$state.notFound,serverError=_this$state.serverError;if(loading){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Common_Loading,{text:\"One sec...\"});}if(serverError)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ServerError,{});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[muted&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Comment Muted\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"You will not receive any more email notifications to replies on this comment.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Go back to the Home page\"})})]}),notFound&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowNotFound,{}),comment&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowCommentData,{comment:comment})]});}}]);return MuteComment;}(react_default.a.Component);/* harmony default export */ var src_MuteComment = (MuteComment_MuteComment);function ShowNotFound(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Comment Not Found\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Sorry, but the instructions to mute this particular comment could not be found.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Go back to the Home page\"})})]});}function ShowCommentData(_ref){var comment=_ref.comment;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{marginTop:70},children:[comment.song&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h4\",{style:{marginBottom:20},children:[\"Song:\",\" \",/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"\".concat(comment.song._url,\"#c\").concat(comment.id),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:comment.song.name}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"by\",children:\"by\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:comment.song.artist.name})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Comment:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"blockquote\",{dangerouslySetInnerHTML:{__html:comment.text_rendered}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Posted \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CustomTimeAgo,{date:comment.created})]})]});}\n// CONCATENATED MODULE: ./src/App.js\nfunction NoMatch(_ref){var location=_ref.location;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Page Not Found\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h3\",{children:[\"No match for \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"code\",{children:location.pathname})]})]});}var App_App=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(App,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(App);function App(){Object(classCallCheck[\"a\" /* default */])(this,App);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(App,[{key:\"render\",value:function render(){var _this$props=this.props,song=_this$props.song,related=_this$props.related,songNotFound=_this$props.songNotFound,results=_this$props.results,totalStats=_this$props.totalStats,searchExamples=_this$props.searchExamples,recentComments=_this$props.recentComments,recentCommentsHomepage=_this$props.recentCommentsHomepage;var onSongPage=false;if(isServer){if(song){onSongPage=true;}}else if(/\\/song\\//.test(window.location.pathname)){onSongPage=true;}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"page-header\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Song Search\"})}),onSongPage?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"home-link\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Try another search\"})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RotatingSubHeader,{})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container children\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ErrorBoundaries_AppErrorBoundary,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Home,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{searchExamples:searchExamples,recentComments:recentCommentsHomepage}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/q/:q\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Home,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{results:results}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/song/:artist/:name/:id\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Song_0,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{song:song,related:related,songNotFound:songNotFound}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/about\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_About,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{totalStats:totalStats}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/privacy\",component:src_PrivacyPolicy}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/comments\",exact:true,render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_RecentComments,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{recentComments:recentComments}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/comments/p:page\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_RecentComments,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{recentComments:recentComments}));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/mute/:oid/:id\",render:function render(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_MuteComment,Object(objectSpread2[\"a\" /* default */])({},props));}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{component:NoMatch})]})})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"footer\",{className:\"footer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"text-muted\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Home\"}),\"  \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/comments\",children:\"Recent comments\"}),\"  \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/about\",children:\"About this site\"}),\"  \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/privacy\",children:\"Privacy Policy\"}), false?/*#__PURE__*/undefined:null]})})})]});}}]);return App;}(react_default.a.Component);/* harmony default export */ var src_App = (App_App);var SUB_HEADERS=[\"I'm looking for a song that I heard.\",\"I'm looking for a song I don't know the name of.\",\"I'm looking for a song that goes like this.\",\"Looking for a song I don't know the name of.\",\"Find me a song by lyrics.\"];function shuffle(a){for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var _ref2=[a[j],a[i]];a[i]=_ref2[0];a[j]=_ref2[1];}return a;}shuffle(SUB_HEADERS);function RotatingSubHeader(){var _useState=Object(react[\"useState\"])(SUB_HEADERS[0]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),quote=_useState2[0],setQuote=_useState2[1];Object(react[\"useEffect\"])(function(){var dismounted=false;function cycle(){setTimeout(function(){if(!dismounted){var nextIndex=(SUB_HEADERS.indexOf(quote)+1)%SUB_HEADERS.length;setQuote(SUB_HEADERS[nextIndex]);cycle();}},10000);}cycle();return function(){dismounted=true;};},[quote]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h5\",{children:[\"\\u201C\",quote,\"\\u201D\"]});}\n// CONCATENATED MODULE: ./src/serviceWorkerRegistration.js\n// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.0/8 are considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"\",window.location.href);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"\".concat(\"\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://cra.link/PWA');});}else{// Is not localhost. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;if(installingWorker==null){return;}installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the updated precached content has been fetched,\n// but the previous service worker will still serve the older\n// content until all client tabs are closed.\nconsole.log('New content is available and will be used when all '+'tabs for this page are closed. See https://cra.link/PWA.');// Execute callback\nif(config&&config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config&&config.onSuccess){config.onSuccess(registration);}}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl,{headers:{'Service-Worker':'script'}}).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nvar contentType=response.headers.get('content-type');if(response.status===404||contentType!=null&&contentType.indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();}).catch(function(error){console.error(error.message);});}}\n// EXTERNAL MODULE: ./src/static/bootstrap.css\nvar bootstrap = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src_0 = __webpack_require__(53);\n\n// EXTERNAL MODULE: ./src/App.css\nvar src_App_0 = __webpack_require__(54);\n\n// EXTERNAL MODULE: ./src/Home.css\nvar src_Home_0 = __webpack_require__(55);\n\n// EXTERNAL MODULE: ./src/Common.css\nvar Common = __webpack_require__(56);\n\n// EXTERNAL MODULE: ./src/CarbonAds.css\nvar CarbonAds = __webpack_require__(57);\n\n// CONCATENATED MODULE: ./src/index.js\nvar container=document.getElementById(\"root\");var app=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{song:window.__song__,related:window.__related__,results:window.__results__,songNotFound:window.__songNotFound__,totalStats:window.__totalStats__,searchExamples:window.__searchExamples__,recentComments:window.__recentComments__,recentCommentsHomepage:window.__recentCommentsHomepage__})})});if(container.firstElementChild){if(window.origin!==\"https://translate.googleusercontent.com\"){react_dom_default.a.hydrate(app,container);}}else{react_dom_default.a.render(app,container);}register();\n\n/***/ })\n\n},[[58,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/Comments.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/RecentComments.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/Song.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/static/bootstrap.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/index.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/App.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/Home.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/Common.css","/home/mandeep/Downloads/Song-sorch work/site/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/mandeep/Downloads/Song-sorch work/site/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/mandeep/Downloads/Song-sorch work/site/node_modules/postcss-loader/src/index.js??postcss!/home/mandeep/Downloads/Song-sorch work/site/src/CarbonAds.css","/home/mandeep/Downloads/Song-sorch work/site/src/Cache.js","/home/mandeep/Downloads/Song-sorch work/site/src/DateTimeDisplay.js","/home/mandeep/Downloads/Song-sorch work/site/src/useCountdown.js","/home/mandeep/Downloads/Song-sorch work/site/src/CountdownTimer.js","/home/mandeep/Downloads/Song-sorch work/site/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/mandeep/Downloads/Song-sorch work/site/src/cont_song_desk.png","/home/mandeep/Downloads/Song-sorch work/site/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/mandeep/Downloads/Song-sorch work/site/src/cont_song_mob.png","/home/mandeep/Downloads/Song-sorch work/site/src/Bannertop.js","/home/mandeep/Downloads/Song-sorch work/site/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/mandeep/Downloads/Song-sorch work/site/src/songs_desktop.png","/home/mandeep/Downloads/Song-sorch work/site/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/mandeep/Downloads/Song-sorch work/site/src/songs_mobile.png","/home/mandeep/Downloads/Song-sorch work/site/src/Common.js","/home/mandeep/Downloads/Song-sorch work/site/src/Comments.js","/home/mandeep/Downloads/Song-sorch work/site/src/RecentComments.js","/home/mandeep/Downloads/Song-sorch work/site/src/Home.js","/home/mandeep/Downloads/Song-sorch work/site/src/About.js","/home/mandeep/Downloads/Song-sorch work/site/src/PrivacyPolicy.js","/home/mandeep/Downloads/Song-sorch work/site/src/Song.js","/home/mandeep/Downloads/Song-sorch work/site/src/ErrorBoundaries.js","/home/mandeep/Downloads/Song-sorch work/site/src/MuteComment.js","/home/mandeep/Downloads/Song-sorch work/site/src/App.js","/home/mandeep/Downloads/Song-sorch work/site/src/serviceWorkerRegistration.js","/home/mandeep/Downloads/Song-sorch work/site/src/index.js"],"names":["_cache","cachedFetch","url","options","cached","undefined","response","window","Response","Blob","Promise","resolve","err","console","log","fetch","then","status","ct","headers","get","match","clone","text","content","DateTimeDisplay","value","type","isDanger","useCountdown","targetDate","countDownDate","Date","getTime","useState","countDown","setCountDown","useEffect","interval","setInterval","clearInterval","getReturnValues","days","Math","floor","hours","minutes","seconds","ExpiredNotice","ShowCounter","CountdownTimer","Bannertop","pic","mobileimg","PUBLIC_URL","process","skullImage","isServer","document","defaultHTMLHeaders","title","image","querySelector","SetHTMLHeaders","warn","ogtitle","itemtitle","img","ResetHTMLHeaders","Loading","FormattedNumber","toLocaleString","AmazonRelatedProducts","song","result","setResult","page","setPage","loadingMore","setLoadingMore","mounted","id","r","ok","json","loadMore","items","length","total","map","item","asin","ASIN","textAlign","AmazonRelatedItem","detail_page_url","old__AmazonRelatedItem","productTypeInfo","product_group","binding","image_small","image_medium","contributor","price","release_date","ItemAttributes","ProductGroup","Binding","URL","SmallImage","Title","Creator","ListPrice","FormattedPrice","SpotifySnippet","compact","useSWR","Error","revalidateOnFocus","data","embed_url","YouTubeSnippet","state","snippet","searched","clicked","onClickThumbnail","event","preventDefault","setState","props","dismounted","media","videoId","href","src","width","height","containerDiv","offsetWidth","thumbnail","thumbnails","medium","high","React","PureComponent","IntersectionLazy","render","entered","setEntered","onEnter","loadCarbonScript","carbonParent","getElementById","script","createElement","async","appendChild","loadAdsenseScript","setAttribute","loadAmplifiedScript","artist","parent","amplified","init","push","setParams","pushAdUnit","run","RenderParagraphs","memo","__html","CustomTimeAgo","unit","suffix","epochSeconds","nextFormatter","ServerError","SUBMITTED_COMMENTS_STORAGE_KEY","SongComments","loadingComments","savingComment","serverError","submissionError","comments","commentsCount","submittedComments","commentSubmitted","commentEdited","commentDeleted","searchedId","replyComment","editComment","csrfToken","highlightComment","highlitComment","hasCommented","loadCSRFToken","csrf_token","catch","error","loadComments","search","submittedCommentIds","filter","submission","forEach","includes","fetchFunc","comments_count","consolidateSubmittedComments","recurse","comment","not_approved","submittedComment","removeSubmittedComments","newSubmittedComments","sessionStorage","setItem","JSON","stringify","ex","removeItem","setTimeout","submitCommentHandler","_submitCommentHandler","formData","FormData","append","name","email","oid","askedWasSearchedFor","wasSearchedFor","experiment","method","body","localStorage","submitted","querySelectorAll","scrollIntoView","behavior","slice","o","toPush","deleteCommentHandler","_deleteCommentHandler","filteredSubmittedComments","setEditComment","setReplyComment","clearCommentSubmitted","clearCommentEdited","clearCommentDeleted","submittedCommentStorage","getItem","parse","some","location","hash","re","parseInt","element","prevProps","ShowCommentSubmitted","ShowCommentEdited","ShowCommentDeleted","ShowSubmissionError","validationErrors","setValidationErrors","isErrorResponse","errors","errorMessage","Object","keys","key","message","code","toString","ShowComments","ShowCommentsRecursive","confirmDelete","allComments","canEdit","c","canReply","replies","editingComment","replyingComment","margin","CommentForm","showNameEmailInputs","canSubmit","warnAboutName","textareaRef","createRef","clearComment","preview","submitHandler","trim","askWasSearchedFor","getTextareaRows","minimum","maximum","linebreaks","min","max","update","focusOnMount","current","focus","marginBottom","e","target","ShowSavingStatus","DisplayComment","highlit","created","notApproved","text_rendered","getRandomCelebration","emojis","emoji","random","hasOwnProperty","was_searched_for","RecentComments","recentComments","useParams","mountedRef","useRef","setServerError","setData","getPage","p","fetchComments","useCallback","pageInt","loading","showLoading","setShowLoading","pagination","next_page","ShowRecentComments","isRoot","previousSong","previousChronological","imageLink","_url","thumbnail100","geoString","geo","city","country","chronologicalDiff","rating","chronological","approved_human","score","Pagination","previous","next","lazyloadThumbnailImage","placeholderImage","NO_ADS","REACT_APP_NO_ADS","samplePlaceholders","sort","appendSuggestion","split","pop","join","Completionist","THREE_DAYS_IN_MS","NOW_IN_MS","dateTimeAfterThreeDays","Home","artistRef","languageRef","searchRef","startSearchFromLocation","q","decodeURIComponent","params","sp","URLSearchParams","language","year","searchExample","stateUpdate","maxLength","searchMaxLength","loadSearchAggregates","advancedSearch","searchLanguage","searchYear","artistName","startSearch","resultsPageIndex","onFocusSearch","placeholder","placeholderSampleInterval","fillerInterval","showAutocompleteSuggestions","shareSearch","_firstFocusSearch","innerHeight","onBlurSearch","setNextSamplePlaceholder","startSamplePlaceholderInterval","onFocusArtist","showAutocompleteArtistSuggestions","onBlurArtist","sampleSearch","term","searchLanguages","searchYears","submitSearch","onSubmit","_fetchSearchAlternatives","parentSearch","results","keyPhrases","key_phrases","onChangeSearch","desperateSearch","originalQ","autocompleteWaitingFor","endsWith","fetchAutocompleteSuggestionsThrottled","fetchAutocompleteSuggestionsDebouncedLong","fetchAutocompleteSuggestionsDebounced","autocompleteSuggestions","autocompleteSearchSuggestions","autocompleteHighlight","onKeyDownSearch","suggestions","highlight","suggestion","fetchAutocompleteSuggestions","searchSuggestions","redirectTo","pathname","onKeyDownArtistSearch","autocompleteArtistSuggestions","autocompleteArtistHighlight","fetchAutocompleteArtistSuggestions","toggleShareSearch","toggleAdvancedSearch","withCountsLanguages","x","count","withCountsYears","onChangeLanguage","onChangeYear","onChangeArtistName","onSelectSuggestion","newText","onSelectSuggestionAll","onSelectArtistSuggestion","onLoadMore","submitPhrase","keyPhrase","phrase","reloadSearch","reload","loadMoreByName","previousByNameLimit","by_name_limit","by_name_total","encodeURIComponent","by_name","displayYears","yearEnd","currentYear","getFullYear","searchResults","desperate","missing","popularityFactor","original","search_example","Boolean","searchExamples","showExamples","examples","showRecentComments","searching","searchError","slowSearch","onlyResults","debounce","throttle","_autocompleteSuggestionsCache","fetchSearchExamples","fetchRecentComments","stopSamplePlaceholderInterval","slowSearchTimer","clearTimeout","currentPlaceholder","el","substring","newURL","currentURL","history","blur","sendSearch","allResults","popularity_factor","cacheHash","matches","search_suggestions","startsWith","languages","years","rows","onlyIds","row","byName","searchToggles","advancedSearchStatus","parts","advancedInput","position","each","Component","ShowRecentCommentsWrapper","marginTop","ShowResultCount","countResults","byNameCount","ShareInput","copied","failed","hasFocused","absurlRef","absoluteUrl","select","copy","ShowKeyPhrases","phrases","nothingFound","subTitle","diff_html","ShowAutocompleteSuggestions","capped","float","s","index","className","html","found","ShowAutocompleteSuggestion","ShowAutocompleteSuggestionSong","imageUrl","fragments","fragment","i","ShowAutocompleteArtistSuggestions","songs","ShowMaxlengthWarning","ShowDesperateSearchWarning","ShowMissingSearchWarning","textDecoration","ShowExamples","link","searchMeta","searchMetaStrings","language_human","n","total_found","opened","SlowSearch","SearchError","Results","firstLoad","showYear","Result","collapsed","itunes","amazon","textHtml","text_html","affiliateLookupStarted","onExpandClick","expand","expandedByDefault","wasCollapsed","fetchTextHTML","recordURL","firstResult","songURL","rest","tooltipTitle","albums","SongImage","forceLoad","Image","loadedOnce","Set","AutocompleteImage","has","setSrc","preloadImg","cb","add","decode","onload","decoding","ShowSongScore","factor","popularity","toFixed","SongsByName","limit","Albums","album","About","totals","totalStats","ShowNumbers","numbers","artists","searches","PrivacyPolicy","AdTag","cf_async","unique_part","opts","Artistname","Songname","adunit_id","div_id","cf_div","parentNode","cf","showAsyncAd","getElementsByTagName","readyState","onreadystatechange","insertBefore","Songhead","ddcf_async","unique_part_add","arr","flex","cf_add","Song","notFound","songNotFound","loadSong","showLoadingSoon","timestamp","age","new_url","renderResult","AmplifiedSnippet","ShareSong","showShare","setShowShare","shared","setShared","shareError","setShareError","navigator","share","shareData","finally","RenderSongHead","albumNames","a","ShowRelated","related","setRelated","setLoading","loadRelated","categories","_started","loadRelatedDebounced","category","label","ShowRelatedGroup","NotFound","AppErrorBoundary","submittedErrorId","errorInfo","stack","color","children","MuteComment","muted","ShowNotFound","ShowCommentData","NoMatch","App","recentCommentsHomepage","onSongPage","test","SUB_HEADERS","shuffle","j","RotatingSubHeader","quote","setQuote","cycle","nextIndex","indexOf","isLocalhost","hostname","register","config","publicUrl","origin","addEventListener","swUrl","checkValidServiceWorker","serviceWorker","ready","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","contentType","unregister","container","app","__song__","__related__","__results__","__songNotFound__","__totalStats__","__searchExamples__","__recentComments__","__recentCommentsHomepage__","firstElementChild","ReactDOM","hydrate","serviceWorkerRegistration"],"mappings":";;;;;AAAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,GAAMA,OAAM,CAAG,EAAf,CAEO,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,GAAD,CAAMC,OAAN,CAAkB,CAC3C,GAAMC,OAAM,CAAGJ,MAAM,CAACE,GAAD,CAArB,CACA,GAAIE,MAAM,GAAKC,SAAf,CAA0B,CACxB,GAAI,CACF,GAAMC,SAAQ,CAAG,GAAIC,OAAM,CAACC,QAAX,CAAoB,GAAIC,KAAJ,CAAS,CAACL,MAAD,CAAT,CAApB,CAAjB,CACA,MAAOM,QAAO,CAACC,OAAR,CAAgBL,QAAhB,CAAP,CACD,CAAC,MAAOM,GAAP,CAAY,CACZ;AACAC,OAAO,CAACC,GAAR,CAAY,sCAAZ,CAAoDF,GAApD,EACD,CACF,CAED,MAAOG,MAAK,CAACb,GAAD,CAAMC,OAAN,CAAL,CAAoBa,IAApB,CAAyB,SAAAV,QAAQ,CAAI,CAC1C;AACA;AACA,GAAIA,QAAQ,CAACW,MAAT,GAAoB,GAAxB,CAA6B,CAC3B,GAAMC,GAAE,CAAGZ,QAAQ,CAACa,OAAT,CAAiBC,GAAjB,CAAqB,cAArB,CAAX,CACA,GAAIF,EAAE,GAAKA,EAAE,CAACG,KAAH,CAAS,oBAAT,GAAkCH,EAAE,CAACG,KAAH,CAAS,SAAT,CAAvC,CAAN,CAAmE,CACjE;AACA;AACA;AACA;AACA;AACA;AACAf,QAAQ,CACLgB,KADH,GAEGC,IAFH,GAGGP,IAHH,CAGQ,SAAAQ,OAAO,CAAI,CACfxB,MAAM,CAACE,GAAD,CAAN,CAAcsB,OAAd,CACD,CALH,EAMD,CACF,CACD,MAAOlB,SAAP,CACD,CArBM,CAAP,CAsBD,CAlCM,C;;;;;;;;ACAP,GAAMmB,gCAAe,CAAG,QAAlBA,gBAAkB,MAA+B,IAA5BC,MAA4B,MAA5BA,KAA4B,CAArBC,IAAqB,MAArBA,IAAqB,CAAfC,QAAe,MAAfA,QAAe,CACrD,mBACE,mCAAK,SAAS,CAAEA,QAAQ,CAAG,kBAAH,CAAwB,WAAhD,wBACE,4CAAOF,KAAP,EADF,cAEE,4CAAOC,IAAP,EAFF,GADF,CAMD,CAPD,CASeF,uFAAf,E;;ACTA,GAAMI,0BAAY,CAAG,QAAfA,aAAe,CAACC,UAAD,CAAgB,CACnC,GAAMC,cAAa,CAAG,GAAIC,KAAJ,CAAS,yBAAT,EAAoCC,OAApC,EAAtB,CAEA,cAAkCC,yBAAQ,CACxCH,aAAa,CAAG,GAAIC,KAAJ,GAAWC,OAAX,EADwB,CAA1C,kEAAOE,SAAP,eAAkBC,YAAlB,eAIAC,0BAAS,CAAC,UAAM,CACd,GAAMC,SAAQ,CAAGC,WAAW,CAAC,UAAM,CACjCH,YAAY,CAACL,aAAa,CAAG,GAAIC,KAAJ,GAAWC,OAAX,EAAjB,CAAZ,CACD,CAF2B,CAEzB,IAFyB,CAA5B,CAIA,MAAO,kBAAMO,cAAa,CAACF,QAAD,CAAnB,EAAP,CACD,CANQ,CAMN,CAACP,aAAD,CANM,CAAT,CAQA,MAAOU,gBAAe,CAACN,SAAD,CAAtB,CACD,CAhBD,CAkBA,GAAMM,gBAAe,CAAG,QAAlBA,gBAAkB,CAACN,SAAD,CAAe,CACrC;AACAtB,OAAO,CAACC,GAAR,CAAYqB,SAAZ,EACA,GAAMO,KAAI,CAAGC,IAAI,CAACC,KAAL,CAAWT,SAAS,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAApB,CAAb,CACA,GAAMU,MAAK,CAAGF,IAAI,CAACC,KAAL,CACXT,SAAS,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAV,EAAuC,KAAO,EAAP,CAAY,EAAnD,CADY,CAAd,CAGA,GAAMW,QAAO,CAAGH,IAAI,CAACC,KAAL,CAAYT,SAAS,EAAI,KAAO,EAAP,CAAY,EAAhB,CAAV,EAAkC,KAAO,EAAzC,CAAX,CAAhB,CACA,GAAMY,QAAO,CAAGJ,IAAI,CAACC,KAAL,CAAYT,SAAS,EAAI,KAAO,EAAX,CAAV,CAA4B,IAAvC,CAAhB,CAEA,MAAO,CAACO,IAAD,CAAOG,KAAP,CAAcC,OAAd,CAAuBC,OAAvB,CAAP,CACD,CAXD,C;;AChBA,GAAMC,6BAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,mBACE,mCAAK,SAAS,CAAC,gBAAf,wBACE,0DADF,cAEE,kFAFF,GADF,CAMD,CAPD,CASA,GAAMC,2BAAW,CAAG,QAAdA,YAAc,MAAuC,IAApCP,KAAoC,MAApCA,IAAoC,CAA9BG,KAA8B,MAA9BA,KAA8B,CAAvBC,OAAuB,MAAvBA,OAAuB,CAAdC,OAAc,MAAdA,OAAc,CACzD,mBACE,kCAAK,SAAS,CAAC,cAAf,uBACE,iCAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,gBAAtB,wBACE,2BAAC,mBAAD,EAAiB,KAAK,CAAEL,IAAxB,CAA8B,IAAI,CAAE,MAApC,CAA4C,QAAQ,CAAEA,IAAI,EAAI,CAA9D,EADF,cAEE,iDAFF,cAGE,2BAAC,mBAAD,EAAiB,KAAK,CAAEG,KAAxB,CAA+B,IAAI,CAAE,OAArC,CAA8C,QAAQ,CAAE,KAAxD,EAHF,cAIE,iDAJF,cAKE,2BAAC,mBAAD,EAAiB,KAAK,CAAEC,OAAxB,CAAiC,IAAI,CAAE,MAAvC,CAA+C,QAAQ,CAAE,KAAzD,EALF,cAME,iDANF,cAOE,2BAAC,mBAAD,EAAiB,KAAK,CAAEC,OAAxB,CAAiC,IAAI,CAAE,SAAvC,CAAkD,QAAQ,CAAE,KAA5D,EAPF,GADF,EADF,CAaD,CAdD,CAgBA,GAAMG,8BAAc,CAAG,QAAjBA,eAAiB,OAAoB,IAAjBpB,WAAiB,OAAjBA,UAAiB,CACzC,kBAAwCD,yBAAY,CAACC,UAAD,CAApD,0EAAOY,IAAP,mBAAaG,KAAb,mBAAoBC,OAApB,mBAA6BC,OAA7B,mBAEA,GAAIL,IAAI,CAAGG,KAAP,CAAeC,OAAf,CAAyBC,OAAzB,EAAoC,CAAxC,CAA2C,CACzC,mBAAO,2BAAC,4BAAD,IAAP,CACD,CAFD,IAEO,CACL,mBACE,2BAAC,0BAAD,EACE,IAAI,CAAEL,IADR,CAEE,KAAK,CAAEG,KAFT,CAGE,OAAO,CAAEC,OAHX,CAIE,OAAO,CAAEC,OAJX,EADF,CAQD,CACF,CAfD,CAiBeG,oFAAf,E;;AC9Ce,wEAAuB,6CAA6C,E;;ACApE,uEAAuB,4CAA4C,E;;ACIlF,QAASC,UAAT,EAAoB,CAChB,mBACI,4EACA,kCAAK,SAAS,CAAC,WAAf,uBACA,gCAAG,IAAI,CAAC,mCAAR,uBACE,kCAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAEC,cAA/B,EADF,EADA,EADA,cAMA,kCAAK,SAAS,CAAC,aAAf,uBACA,gCAAG,IAAI,CAAC,mCAAR,uBACE,kCAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEC,aAAjC,EADF,EADA,EANA,GADJ,CAcH,CAEcF,2DAAf,E;;ACrBe,uEAAuB,4CAA4C,E;;ACAnE,sEAAuB,2CAA2C,E;;;;;;;;;;;;;;;;;;;ACQjF,GAAMG,WAAU,CAAGC,MAAA,EAA0B,EAA7C,CACA;AACA,GAAMC,WAAU,CAAGF,UAAU,CAAG,mBAAhC,CAEO,GAAMG,SAAQ,CAAG,MAAOC,SAAP,GAAoB,WAArC,CAEP,GAAMC,mBAAkB,CAAG,CACzBC,KAAK,CAAE,oCADkB,CAEzBC,KAAK,CAAEJ,QAAQ,CACX,IADW,CAEXC,QAAQ,CAACI,aAAT,CAAuB,wBAAvB,EAAiDtC,OAJ5B,CAA3B,CAOO,GAAMuC,eAAc,CAAG,QAAjBA,eAAiB,MAAmC,IAAvBH,MAAuB,MAAvBA,KAAuB,iBAAhBC,KAAgB,CAAhBA,KAAgB,qBAAR,IAAQ,YAC/D,GAAIJ,QAAJ,CAAc,CACZ5C,OAAO,CAACmD,IAAR,CAAa,oDAAb,EACA,OACD,CACD,kCACA,GAAIJ,KAAK,GAAKF,QAAQ,CAACE,KAAvB,CAA8B,CAC5BF,QAAQ,CAACE,KAAT,CAAiBA,KAAjB,CACD,CACD,GAAIK,QAAO,CAAGP,QAAQ,CAACI,aAAT,CAAuB,2BAAvB,CAAd,CACA,GAAIG,OAAO,CAACzC,OAAR,GAAoBoC,KAAxB,CAA+B,CAC7BK,OAAO,CAACzC,OAAR,CAAkBoC,KAAlB,CACD,CAED,GAAIM,UAAS,CAAGR,QAAQ,CAACI,aAAT,CAAuB,uBAAvB,CAAhB,CACA,GAAII,SAAS,GAAKN,KAAlB,CAAyB,CACvBM,SAAS,CAAC1C,OAAV,CAAoBoC,KAApB,CACD,CACD,GAAIO,IAAG,CAAGT,QAAQ,CAACI,aAAT,CAAuB,wBAAvB,CAAV,CACA,GAAIK,GAAG,CAAC3C,OAAJ,GAAgBqC,KAApB,CAA2B,CACzBM,GAAG,CAAC3C,OAAJ,CAAcqC,KAAd,CACD,CACF,CAtBM,CAwBA,GAAMO,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAY,CAC1CL,cAAc,CAACJ,kBAAD,CAAd,CACD,CAFM,CAIA,GAAMU,eAAO,CAAG,QAAVA,QAAU,OAAc,IAAX9C,KAAW,OAAXA,IAAW,CACnC,mBACE,mCAAK,SAAS,CAAC,SAAf,CAAyB,KAAK,CAAEA,IAAhC,wBACE,mCAAK,SAAS,CAAC,iBAAf,wBACE,kCAAK,SAAS,CAAC,gBAAf,EADF,cAEE,kCAAK,SAAS,CAAC,gBAAf,EAFF,cAGE,kCAAK,SAAS,CAAC,gBAAf,EAHF,cAIE,kCAAK,SAAS,CAAC,gBAAf,EAJF,cAKE,kCAAK,SAAS,CAAC,gBAAf,EALF,GADF,cAQE,yCAAIA,IAAJ,EARF,GADF,CAYD,CAbM,CAeA,QAAS+C,gBAAT,OAAoC,IAAT5C,MAAS,OAATA,KAAS,CACzC,MAAOA,MAAK,CAAC6C,cAAN,EAAP,CACD,CAEM,QAASC,sBAAT,OAAyC,IAARC,KAAQ,OAARA,IAAQ,CAC9C,cAA4BvC,yBAAQ,CAAC,IAAD,CAApC,kEAAOwC,MAAP,eAAeC,SAAf,eACA,eAAwBzC,yBAAQ,CAAC,CAAD,CAAhC,mEAAO0C,IAAP,eAAaC,OAAb,eACA,eAAsC3C,yBAAQ,CAAC,KAAD,CAA9C,mEAAO4C,WAAP,eAAoBC,cAApB,eAEA1C,0BAAS,CAAC,UAAM,CACd,GAAIuC,IAAI,CAAG,CAAX,CAAc,CACZG,cAAc,CAAC,IAAD,CAAd,CACD,CACF,CAJQ,CAIN,CAACH,IAAD,CAJM,CAAT,CAMAvC,0BAAS,CAAC,UAAM,CACd,GAAI2C,QAAO,CAAG,IAAd,CACA,GAAI9E,IAAG,qBAAgBuE,IAAI,CAACQ,EAArB,eAAP,CACA,GAAIL,IAAI,CAAG,CAAX,CAAc,CACZ1E,GAAG,kBAAa0E,IAAb,CAAH,CACD,CACD7D,KAAK,CAACb,GAAD,CAAL,CAAWc,IAAX,CAAgB,SAACkE,CAAD,CAAO,CACrB,GAAI,CAACF,OAAL,CAAc,OACd,GAAIE,CAAC,CAACC,EAAN,CAAU,CACRD,CAAC,CAACE,IAAF,GAASpE,IAAT,CAAc,SAAC0D,MAAD,CAAY,CACxBC,SAAS,CAACD,MAAD,CAAT,CACAK,cAAc,CAAC,KAAD,CAAd,CACD,CAHD,EAID,CACF,CARD,EASA,MAAO,WAAM,CACXC,OAAO,CAAG,KAAV,CACD,CAFD,CAGD,CAlBQ,CAkBN,CAACP,IAAD,CAAOG,IAAP,CAlBM,CAAT,CAoBA,QAASS,SAAT,EAAoB,CAClBR,OAAO,CAACD,IAAI,CAAG,CAAR,CAAP,CACD,CAED,GAAI,CAACF,MAAD,EAAW,CAACA,MAAM,CAACY,KAAP,CAAaC,MAA7B,CAAqC,CACnC,MAAO,KAAP,CACD,CACD,GAAQD,MAAR,CAAyBZ,MAAzB,CAAQY,KAAR,CAAeE,KAAf,CAAyBd,MAAzB,CAAec,KAAf,CACA,mBACE,mCAAK,SAAS,CAAC,yBAAf,wBACE,oEADF,CAEGF,KAAK,CAACG,GAAN,CAAU,SAACC,IAAD,qBACT,2BAAC,iBAAD,EAAgD,IAAI,CAAEA,IAAtD,EAAwBA,IAAI,CAACC,IAAL,EAAaD,IAAI,CAACE,IAA1C,CADS,EAAV,CAFH,cAKE,yGALF,CAMGJ,KAAK,CAAGF,KAAK,CAACC,MAAd,eACC,gCAAG,KAAK,CAAE,CAAEM,SAAS,CAAE,OAAb,CAAV,uBACE,qCACE,SAAS,CAAC,wBADZ,CAEE,OAAO,CAAER,QAFX,CAGE,QAAQ,CAAEP,WAHZ,UAKGA,WAAW,CAAG,YAAH,CAAkB,uBALhC,EADF,EAPJ,GADF,CAoBD,CAED,QAASgB,kBAAT,OAAqC,IAARJ,KAAQ,OAARA,IAAQ,CACnC,GAAI,CAACA,IAAI,CAACK,eAAV,CAA2B,CACzB;AACA,MAAOC,uBAAsB,CAAC,CAAEN,IAAI,CAAJA,IAAF,CAAD,CAA7B,CACD,CAED,GAAIO,gBAAe,CAAGP,IAAI,CAACQ,aAA3B,CACA,GAAID,eAAe,EAAIP,IAAI,CAACS,OAAxB,EAAmCF,eAAe,GAAKP,IAAI,CAACS,OAAhE,CAAyE,CACvEF,eAAe,cAASP,IAAI,CAACS,OAAd,CAAf,CACD,CACD,mBACE,mCAAK,SAAS,CAAC,mBAAf,wBACE,kCAAK,SAAS,CAAC,sBAAf,uBACE,gCACE,IAAI,CAAET,IAAI,CAACK,eADb,CAEE,MAAM,CAAC,QAFT,CAGE,GAAG,CAAC,qBAHN,uBAKE,kCACE,SAAS,CAAC,cADZ,CAEE,OAAO,CAAC,MAFV,CAGE,GAAG,CAAEL,IAAI,CAACU,WAAL,EAAoBV,IAAI,CAACW,YAHhC,CAIE,GAAG,CAAC,SAJN,EALF,EADF,EADF,cAeE,mCAAK,SAAS,CAAC,YAAf,wBACE,iCAAI,SAAS,CAAC,eAAd,uBACE,gCACE,IAAI,CAAEX,IAAI,CAACK,eADb,CAEE,MAAM,CAAC,QAFT,CAGE,GAAG,CAAC,qBAHN,UAKGL,IAAI,CAAC9B,KALR,EADF,EADF,CAUG8B,IAAI,CAACY,WAAL,eACC,8DACK,yCAAIZ,IAAI,CAACY,WAAT,EADL,GAXJ,cAeE,2CACGZ,IAAI,CAACa,KAAL,eAAc,gCAAG,SAAS,CAAC,OAAb,UAAsBb,IAAI,CAACa,KAA3B,EADjB,CAEGN,eAFH,cAGE,mCAHF,CAIGP,IAAI,CAACc,YAAL,eAAqB,+DAAqBd,IAAI,CAACc,YAA1B,GAJxB,GAfF,GAfF,GADF,CAwCD,CAED,QAASR,uBAAT,OAA0C,IAARN,KAAQ,OAARA,IAAQ,CACxC,GAAIO,gBAAe,CAAGP,IAAI,CAACe,cAAL,CAAoBC,YAA1C,CACA,GACET,eAAe,EACfP,IAAI,CAACe,cAAL,CAAoBE,OADpB,EAEAV,eAAe,GAAKP,IAAI,CAACe,cAAL,CAAoBE,OAH1C,CAIE,CACAV,eAAe,cAASP,IAAI,CAACe,cAAL,CAAoBE,OAA7B,CAAf,CACD,CACD,mBACE,mCAAK,SAAS,CAAC,mBAAf,wBACE,kCAAK,SAAS,CAAC,sBAAf,uBACE,gCAAG,IAAI,CAAEjB,IAAI,CAACkB,GAAd,CAAmB,MAAM,CAAC,QAA1B,CAAmC,GAAG,CAAC,qBAAvC,uBACE,kCAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAElB,IAAI,CAACmB,UAAxC,CAAoD,GAAG,CAAC,SAAxD,EADF,EADF,EADF,cAME,mCAAK,SAAS,CAAC,YAAf,wBACE,iCAAI,SAAS,CAAC,eAAd,uBACE,gCAAG,IAAI,CAAEnB,IAAI,CAACkB,GAAd,CAAmB,MAAM,CAAC,QAA1B,CAAmC,GAAG,CAAC,qBAAvC,UACGlB,IAAI,CAACoB,KADR,EADF,EADF,CAMGpB,IAAI,CAACqB,OAAL,eACC,8DACK,yCAAIrB,IAAI,CAACqB,OAAT,EADL,GAPJ,cAWE,2CACGrB,IAAI,CAACe,cAAL,CAAoBO,SAApB,eACC,gCAAG,SAAS,CAAC,OAAb,UACGtB,IAAI,CAACe,cAAL,CAAoBO,SAApB,CAA8BC,cADjC,EAFJ,CAMGhB,eANH,GAXF,GANF,GADF,CA6BD,CAED;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEO,QAASiB,eAAT,OAAkD,IAAxBzC,KAAwB,OAAxBA,IAAwB,qBAAlB0C,OAAkB,CAAlBA,OAAkB,wBAAR,IAAQ,eACvD,YAAiBC,kCAAM,qBACR3C,IAAI,CAACQ,EADG,mIAErB,iBAAO/E,GAAP,gJACkBa,MAAK,CAACb,GAAD,CADvB,QACQgF,CADR,kBAEOA,CAAC,CAACC,EAFT,yBA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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","const _cache = {};\n\nexport const cachedFetch = (url, options) => {\n  const cached = _cache[url];\n  if (cached !== undefined) {\n    try {\n      const response = new window.Response(new Blob([cached]));\n      return Promise.resolve(response);\n    } catch (err) {\n      // Old browsers. E.g. Firefox 38.\n      console.log(\"Unable to create new window.Response\", err);\n    }\n  }\n\n  return fetch(url, options).then(response => {\n    // let's only store in cache if the content-type is\n    // JSON or something non-binary\n    if (response.status === 200) {\n      const ct = response.headers.get(\"Content-Type\");\n      if (ct && (ct.match(/application\\/json/i) || ct.match(/text\\//i))) {\n        // There is a .json() instead of .text() but\n        // we're going to store it in _cache as\n        // string anyway.\n        // If we don't clone the response, it will be\n        // consumed by the time it's returned. This\n        // way we're being un-intrusive.\n        response\n          .clone()\n          .text()\n          .then(content => {\n            _cache[url] = content;\n          });\n      }\n    }\n    return response;\n  });\n};\n","import React from \"react\";\n\nconst DateTimeDisplay = ({ value, type, isDanger }) => {\n  return (\n    <div className={isDanger ? \"countdown danger\" : \"countdown\"}>\n      <span>{value}</span>\n      <span>{type}</span>\n    </div>\n  );\n};\n\nexport default DateTimeDisplay;\n","import { useEffect, useState } from \"react\";\n\nconst useCountdown = (targetDate) => {\n  const countDownDate = new Date(\"March 27, 2022 24:00:00\").getTime();\n\n  const [countDown, setCountDown] = useState(\n    countDownDate - new Date().getTime()\n  );\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCountDown(countDownDate - new Date().getTime());\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [countDownDate]);\n\n  return getReturnValues(countDown);\n};\n\nconst getReturnValues = (countDown) => {\n  // calculate time left\n  console.log(countDown);\n  const days = Math.floor(countDown / (1000 * 60 * 60 * 24));\n  const hours = Math.floor(\n    (countDown % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n  );\n  const minutes = Math.floor((countDown % (1000 * 60 * 60)) / (1000 * 60));\n  const seconds = Math.floor((countDown % (1000 * 60)) / 1000);\n\n  return [days, hours, minutes, seconds];\n};\n\nexport { useCountdown };\n","import React from \"react\";\nimport DateTimeDisplay from \"./DateTimeDisplay\";\nimport { useCountdown } from \"./useCountdown\";\n\nconst ExpiredNotice = () => {\n  return (\n    <div className=\"expired-notice\">\n      <span>Expired!!!</span>\n      <p>Please select a future date and time.</p>\n    </div>\n  );\n};\n\nconst ShowCounter = ({ days, hours, minutes, seconds }) => {\n  return (\n    <div className=\"show-counter\">\n      <a href=\"#\" className=\"countdown-link\">\n        <DateTimeDisplay value={days} type={\"Days\"} isDanger={days <= 3} />\n        <span>:</span>\n        <DateTimeDisplay value={hours} type={\"Hours\"} isDanger={false} />\n        <span>:</span>\n        <DateTimeDisplay value={minutes} type={\"Mins\"} isDanger={false} />\n        <span>:</span>\n        <DateTimeDisplay value={seconds} type={\"Seconds\"} isDanger={false} />\n      </a>\n    </div>\n  );\n};\n\nconst CountdownTimer = ({ targetDate }) => {\n  const [days, hours, minutes, seconds] = useCountdown(targetDate);\n\n  if (days + hours + minutes + seconds <= 0) {\n    return <ExpiredNotice />;\n  } else {\n    return (\n      <ShowCounter\n        days={days}\n        hours={hours}\n        minutes={minutes}\n        seconds={seconds}\n      />\n    );\n  }\n};\n\nexport default CountdownTimer;\n","export default __webpack_public_path__ + \"static/media/cont_song_desk.299b76a7.png\";","export default __webpack_public_path__ + \"static/media/cont_song_mob.a45052cb.png\";","import React from \"react\";\r\nimport pic from \"./cont_song_desk.png\";\r\nimport mobileimg from \"./cont_song_mob.png\";\r\n\r\nfunction Bannertop(){\r\n    return(\r\n        <>\r\n        <div className=\"deskviews\">\r\n        <a href=\"http://contextbomb.com/songsearch\">\r\n          <img className=\"deskview\" src={pic} />\r\n        </a>\r\n        </div>\r\n        <div className=\"mobileviews\">\r\n        <a href=\"http://contextbomb.com/songsearch\">\r\n          <img className=\"mobileview\" src={mobileimg} />\r\n        </a>\r\n        </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Bannertop;","export default __webpack_public_path__ + \"static/media/songs_desktop.dceb29d3.png\";","export default __webpack_public_path__ + \"static/media/songs_mobile.6129f571.png\";","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport TimeAgo from \"react-timeago\";\nimport { Waypoint } from \"react-waypoint\";\nimport useSWR from \"swr\";\n\nimport { cachedFetch } from \"./Cache\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\n// const itunesAppImage = PUBLIC_URL + \"/static/itunes-app-icon.png\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nexport const isServer = typeof document === \"undefined\";\n\nconst defaultHTMLHeaders = {\n  title: \"Song Search - Find Songs by Lyrics\",\n  image: isServer\n    ? null\n    : document.querySelector('meta[itemprop=\"image\"]').content\n};\n\nexport const SetHTMLHeaders = function ({ title, image = null }) {\n  if (isServer) {\n    console.warn(\"SetHTMLHeaders should not be called in server mode\");\n    return;\n  }\n  /* Only set when it's different */\n  if (title !== document.title) {\n    document.title = title;\n  }\n  let ogtitle = document.querySelector('meta[property=\"og:title\"]');\n  if (ogtitle.content !== title) {\n    ogtitle.content = title;\n  }\n\n  let itemtitle = document.querySelector('meta[itemprop=\"name\"]');\n  if (itemtitle !== title) {\n    itemtitle.content = title;\n  }\n  let img = document.querySelector('meta[itemprop=\"image\"]');\n  if (img.content !== image) {\n    img.content = image;\n  }\n};\n\nexport const ResetHTMLHeaders = function () {\n  SetHTMLHeaders(defaultHTMLHeaders);\n};\n\nexport const Loading = ({ text }) => {\n  return (\n    <div className=\"loading\" title={text}>\n      <div className=\"cssload-wrapper\">\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n      </div>\n      <p>{text}</p>\n    </div>\n  );\n};\n\nexport function FormattedNumber({ value }) {\n  return value.toLocaleString();\n}\n\nexport function AmazonRelatedProducts({ song }) {\n  const [result, setResult] = useState(null);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n\n  useEffect(() => {\n    if (page > 1) {\n      setLoadingMore(true);\n    }\n  }, [page]);\n\n  useEffect(() => {\n    let mounted = true;\n    let url = `/api/song/${song.id}/amazon?v=5`;\n    if (page > 1) {\n      url += `&page=${page}`;\n    }\n    fetch(url).then((r) => {\n      if (!mounted) return;\n      if (r.ok) {\n        r.json().then((result) => {\n          setResult(result);\n          setLoadingMore(false);\n        });\n      }\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [song, page]);\n\n  function loadMore() {\n    setPage(page + 1);\n  }\n\n  if (!result || !result.items.length) {\n    return null;\n  }\n  const { items, total } = result;\n  return (\n    <div className=\"amazon-related-products\">\n      <h4>Relevant on Amazon.com</h4>\n      {items.map((item) => (\n        <AmazonRelatedItem key={item.asin || item.ASIN} item={item} />\n      ))}\n      <small>As an Amazon Associate I earn from qualifying purchases.</small>\n      {total > items.length && (\n        <p style={{ textAlign: \"right\" }}>\n          <button\n            className=\"btn btn-default btn-sm\"\n            onClick={loadMore}\n            disabled={loadingMore}\n          >\n            {loadingMore ? \"Loading...\" : \"Load more products...\"}\n          </button>\n        </p>\n      )}\n    </div>\n  );\n}\n\nfunction AmazonRelatedItem({ item }) {\n  if (!item.detail_page_url) {\n    // Later in 2020, this can be replaced with just `return null`\n    return old__AmazonRelatedItem({ item });\n  }\n\n  let productTypeInfo = item.product_group;\n  if (productTypeInfo && item.binding && productTypeInfo !== item.binding) {\n    productTypeInfo += `, ${item.binding}`;\n  }\n  return (\n    <div className=\"media amazon-item\">\n      <div className=\"media-left media-top\">\n        <a\n          href={item.detail_page_url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img\n            className=\"media-object\"\n            loading=\"lazy\"\n            src={item.image_small || item.image_medium}\n            alt=\"Product\"\n          />\n        </a>\n      </div>\n      <div className=\"media-body\">\n        <h4 className=\"media-heading\">\n          <a\n            href={item.detail_page_url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {item.title}\n          </a>\n        </h4>\n        {item.contributor && (\n          <p>\n            By <b>{item.contributor}</b>\n          </p>\n        )}\n        <p>\n          {item.price && <b className=\"price\">{item.price}</b>}\n          {productTypeInfo}\n          <br />\n          {item.release_date && <span>Release date: {item.release_date}</span>}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction old__AmazonRelatedItem({ item }) {\n  let productTypeInfo = item.ItemAttributes.ProductGroup;\n  if (\n    productTypeInfo &&\n    item.ItemAttributes.Binding &&\n    productTypeInfo !== item.ItemAttributes.Binding\n  ) {\n    productTypeInfo += `, ${item.ItemAttributes.Binding}`;\n  }\n  return (\n    <div className=\"media amazon-item\">\n      <div className=\"media-left media-top\">\n        <a href={item.URL} target=\"_blank\" rel=\"noopener noreferrer\">\n          <img className=\"media-object\" src={item.SmallImage} alt=\"Product\" />\n        </a>\n      </div>\n      <div className=\"media-body\">\n        <h4 className=\"media-heading\">\n          <a href={item.URL} target=\"_blank\" rel=\"noopener noreferrer\">\n            {item.Title}\n          </a>\n        </h4>\n        {item.Creator && (\n          <p>\n            By <b>{item.Creator}</b>\n          </p>\n        )}\n        <p>\n          {item.ItemAttributes.ListPrice && (\n            <b className=\"price\">\n              {item.ItemAttributes.ListPrice.FormattedPrice}\n            </b>\n          )}\n          {productTypeInfo}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// export function Affiliates({ song }) {\n//   console.log(\"IS THIS STILL USED?!??!?!?!?!\");\n//   // const [amazon, setAmazon] = React.useState(null);\n//   const [itunes, setItunes] = React.useState(null);\n\n//   useEffect(() => {\n//     let dismounted = false;\n//     const url = `/api/song/${song.id}/affiliate/itunes`;\n//     cachedFetch(url).then((response) => {\n//       if (response.ok) {\n//         if (dismounted) {\n//           return;\n//         }\n//         response.json().then((results) => {\n//           if (\n//             results.itunes &&\n//             results.itunes.matches &&\n//             results.itunes.matches.length\n//           ) {\n//             setItunes(results.itunes);\n//           }\n//         });\n//       } else {\n//         console.warn(response);\n//       }\n//     });\n//     return () => {\n//       dismounted = true;\n//     };\n//   }, [song]);\n\n//   if (isServer) {\n//     return null;\n//   }\n//   return (\n//     <>\n//       {/* XXX This causes a double-render even though 'song' hasn't changed!! */}\n//       <AmazonRelatedProducts song={song} />\n//       <ITunesBadge itunes={itunes} />\n//     </>\n//   );\n// }\n\n// const ITunesBadge = React.memo(({ itunes }) => {\n//   if (!itunes) {\n//     return null;\n//   }\n//   if (!itunes.matches.length) {\n//     return null;\n//   }\n\n//   const first = itunes.matches[0];\n//   const trackURL = `${first.trackViewUrl}&at=${itunes.token}`;\n//   const trackLink = (\n//     <p>\n//       <a href={trackURL}>\n//         <b>{first.trackName}</b>\n//         {\" by \"}\n//         <b>{first.artistName}</b>\n//         {first.trackPrice &&\n//           first.trackPrice > 0.0 &&\n//           ` ($${first.trackPrice})`}\n//       </a>\n//     </p>\n//   );\n\n//   const trackIcon = (\n//     <p style={{ float: \"left\", marginBottom: 15 }}>\n//       <a href={trackURL} className=\"app-icon\" title={first.trackName}>\n//         <img src={itunesAppImage} alt=\"iTunes\" />\n//       </a>\n//     </p>\n//   );\n\n//   let albumLink = null;\n//   if (first.collectionName) {\n//     const collectionURL = `${first.collectionViewUrl}&at=${itunes.token}`;\n//     albumLink = (\n//       <p>\n//         <a href={collectionURL}>\n//           On album <b>{first.collectionName}</b>\n//           {first.collectionPrice &&\n//             first.collectionPrice > 0 &&\n//             ` ($${first.collectionPrice})`}\n//         </a>\n//       </p>\n//     );\n//   }\n\n//   let preview = null;\n//   if (first.previewUrl) {\n//     preview = (\n//       <div style={{ clear: \"left\", textAlign: \"center\" }}>\n//         <b>iTunes</b> Preview\n//         <br />\n//         <audio controls preload=\"none\" src={first.previewUrl} />\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <div style={{ marginTop: 30, marginBottom: 20 }}>\n//       <h4>On Apple iTunes</h4>\n//       {trackIcon}\n//       {trackLink}\n//       {albumLink}\n//       {preview}\n//     </div>\n//   );\n// });\n\nexport function SpotifySnippet({ song, compact = true }) {\n  const { data } = useSWR(\n    `/api/song/${song.id}/spotify`,\n    async (url) => {\n      const r = await fetch(url);\n      if (!r.ok) {\n        if (process.env.NODE_ENV === \"development\") {\n          console.warn(`${r.status} on ${url}`);\n        }\n        throw new Error(`${r.status} on ${url}`);\n      }\n      return await r.json();\n    },\n    { revalidateOnFocus: false }\n  );\n  if (!data) {\n    return null;\n  }\n  return (\n    <div className=\"spotify\">\n      <h4>On Spotify</h4>\n      <div style={{ textAlign: \"center\" }}>\n        {/* https://developer.spotify.com/documentation/widgets/generate/embed/ */}\n        <iframe\n          src={data.embed_url}\n          width=\"300\"\n          height={compact ? 80 : 380}\n          frameBorder=\"0\"\n          allowtransparency=\"true\"\n          allow=\"encrypted-media\"\n        ></iframe>\n      </div>\n    </div>\n  );\n}\n\nexport class YouTubeSnippet extends React.PureComponent {\n  state = {\n    snippet: null,\n    searched: false,\n    clicked: false\n  };\n\n  componentDidMount() {\n    const id = this.props.song.id;\n    let url = `/api/song/${id}/youtube`;\n    return cachedFetch(url).then((r) => {\n      if (this.dismounted) {\n        return;\n      }\n      if (r.status !== 200) {\n        console.warn(r.status, \"loading\", url);\n      } else {\n        r.json().then((response) => {\n          if (response.snippet) {\n            this.setState({ snippet: response.snippet, searched: true });\n          } else {\n            this.setState({ searched: true });\n          }\n        });\n      }\n    });\n  }\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  onClickThumbnail = (event) => {\n    event.preventDefault();\n    this.setState({ clicked: true });\n  };\n\n  render() {\n    const { clicked, snippet } = this.state;\n    if (isServer || snippet === null) {\n      return null;\n    }\n    let media;\n    const videoId = snippet.videoId;\n    const href = `https://www.youtube.com/watch?v=${videoId}`;\n    if (clicked) {\n      // const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0&amp;showinfo=0`\n      const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0`;\n      let width = 335;\n      let height = 178; // =335/(16/9)\n      const containerDiv = document.querySelector(\"div.result\");\n      if (containerDiv && containerDiv.offsetWidth > 335) {\n        width = 560;\n        height = 315;\n      }\n      media = (\n        <iframe\n          width={width}\n          height={height}\n          title={snippet.title || \"YouTube Snippet\"}\n          src={src}\n          frameBorder={0}\n          allow=\"autoplay; encrypted-media\"\n          allowFullScreen\n        />\n      );\n    } else {\n      let thumbnail = snippet.thumbnails.medium;\n      const containerDiv = document.querySelector(\"div.result\");\n      if (containerDiv && containerDiv.offsetWidth > 335) {\n        thumbnail = snippet.thumbnails.high;\n      }\n      media = (\n        <a href={href} onClick={this.onClickThumbnail}>\n          <img\n            src={thumbnail.url}\n            width={thumbnail.width}\n            height={thumbnail.height}\n            title=\"Click to load video\"\n            alt=\"Video thumbnail\"\n            loading=\"lazy\"\n          />\n        </a>\n      );\n    }\n    return (\n      <div className=\"youtube\">\n        <h4>\n          YouTube{\" \"}\n          {!clicked ? (\n            <small onClick={this.onClickThumbnail}>Click to load</small>\n          ) : null}\n        </h4>\n        <div style={{ textAlign: \"center\" }}>\n          {media}\n          <p>\n            <small>\n              <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n                Watch on YouTube\n              </a>\n            </small>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function IntersectionLazy({ render }) {\n  const [entered, setEntered] = useState(false);\n  function onEnter() {\n    setEntered(true);\n  }\n  if (entered) {\n    return render();\n    // return <YouTubeSnippet song={song} />;\n  }\n  return <Waypoint onEnter={onEnter} />;\n}\n\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n\nexport function loadCarbonScript() {\n  const carbonParent = document.getElementById(\"carbonadsouter\");\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      const script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src =\n        \"https://cdn.carbonads.com/carbon.js?serve=CK7DCK7W&placement=songsearch\";\n      script.async = true;\n      carbonParent.appendChild(script);\n    }\n  }\n}\n\nexport function loadAdsenseScript() {\n  const carbonParent = document.getElementById(\"carbonadsouter\");\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      const script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src =\n        \"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";\n      script.async = true;\n      script.setAttribute('data-ad-client', 'ca-pub-8561605615946624');\n      carbonParent.appendChild(script);\n    }\n  }\n}\n\nexport function loadAmplifiedScript({ song, artist }) {\n  const parent = document.getElementById(\"amplifiedouter\");\n  if (parent) {\n    if (!parent.querySelector(\"script\")) {\n      window.amplified = window.amplified || { init: [] };\n      window.amplified.init.push(() => {\n        amplified.setParams({\n          artist,\n          song\n        });\n        amplified.pushAdUnit(100003500);\n        amplified.run();\n      });\n      const script = document.createElement(\"script\");\n      script.id = \"_amplified_js\";\n      script.src = \"https://srv.clickfuse.com/ads/ads.js\";\n      script.async = true;\n      parent.appendChild(script);\n    }\n  }\n}\n\nexport const RenderParagraphs = React.memo(({ text }) => {\n  return <blockquote dangerouslySetInnerHTML={{ __html: text }} />;\n});\n\nexport function CustomTimeAgo(props) {\n  return (\n    <TimeAgo\n      // Since the smallest granularity is 1 min, no point making the\n      // setInterval any smaller than this.\n      minPeriod={60}\n      formatter={(value, unit, suffix, epochSeconds, nextFormatter) => {\n        if (unit === \"second\") {\n          return \"seconds ago\";\n        }\n        return nextFormatter(value, unit, suffix, epochSeconds);\n      }}\n      {...props}\n    />\n  );\n}\n\nexport function ServerError() {\n  return (\n    <div className=\"not-found\">\n      <h3>Server Error</h3>\n      <p>\n        <img alt=\"Skull\" src={skullImage} />\n      </p>\n      <p>\n        Most likely a <b>temporary problem</b> which will go away if you{\" \"}\n        <b>reload this page soon</b>.\n      </p>\n      <p>\n        <Link to=\"/\">Back to the home page</Link>\n      </p>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { cachedFetch } from \"./Cache\";\nimport { CustomTimeAgo, isServer } from \"./Common\";\nimport \"./Comments.css\";\nimport { Helmet } from \"react-helmet\";  \n\n\nconst SUBMITTED_COMMENTS_STORAGE_KEY = \"submittedComments\";\n\nexport class SongComments extends React.PureComponent {\n  state = {\n    loadingComments: false,\n    savingComment: false,\n    serverError: null,\n    submissionError: null,\n    comments: this.props.comments || null,\n    commentsCount: this.props.commentsCount || null,\n    submittedComments: [],\n    commentSubmitted: null,\n    commentEdited: null,\n    commentDeleted: null,\n    searchedId: this.props.searchedId,\n    replyComment: null,\n    editComment: null,\n    csrfToken: null,\n    highlightComment: null,\n    highlitComment: null,\n    hasCommented: false\n  };\n\n  componentDidMount() {\n    // If you're here, you're a browser and no a server rendering.\n    let submittedCommentStorage = \"[]\";\n    try {\n      submittedCommentStorage =\n        sessionStorage.getItem(SUBMITTED_COMMENTS_STORAGE_KEY) || \"[]\";\n    } catch (ex) {\n      console.warn(\n        \"'sessionStorage.getItem(SUBMITTED_COMMENTS_STORAGE_KEY)' didn't work\"\n      );\n    }\n    const submittedComments = JSON.parse(submittedCommentStorage);\n    if (submittedComments.length) {\n      // Definitely load comments. Even if you arrived here with the comments\n      // already server-side rendered.\n      // Because, this call to loadingComments might be potentially different.\n\n      // If you have commented on this song before, update that in state.\n      let hasCommented = false;\n      const { song } = this.props;\n      if (song) {\n        hasCommented = submittedComments.some(\n          (comment) => comment.song && comment.song === song.id\n        );\n      }\n\n      this.setState(\n        {\n          submittedComments,\n          hasCommented,\n          loadingComments: !this.state.comments\n        },\n        this.loadComments\n      );\n    } else {\n      // If the comments were already loaded, we only need the csrfToken.\n      if (!this.state.comments) {\n        this.setState({ loadingComments: true }, this.loadComments);\n      } else {\n        // We just need a new csrfToken\n        this.loadCSRFToken();\n      }\n    }\n\n    if (window.location.hash) {\n      const re = /c(\\d+)$/;\n      if (window.location.hash.match(re)) {\n        const id = parseInt(window.location.hash.match(re)[1], 10);\n        this.setState({ highlitComment: id }, () => {\n          window.setTimeout(() => {\n            if (!this.dismounted) {\n              const element = document.querySelector(\n                `#c${this.state.highlitComment}`\n              );\n              if (element && element.scrollIntoView) {\n                element.scrollIntoView({\n                  behavior: \"smooth\"\n                });\n              }\n            }\n          }, 1000);\n\n          window.setTimeout(() => {\n            if (!this.dismounted && this.state.highlitComment === id) {\n              this.setState({ highlitComment: null });\n            }\n          }, 10 * 1000);\n        });\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.song !== this.props.song) {\n      this.setState(\n        { loadingComments: true, comments: null, commentsCount: null },\n        this.loadComments\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  loadCSRFToken = () => {\n    let url = \"/api/comments?csrftoken=1\";\n    fetch(url)\n      .then((r) => {\n        if (this.dismounted) return;\n        if (r.ok) {\n          return r.json().then((result) => {\n            this.setState({\n              csrfToken: result.csrf_token\n            });\n          });\n        } else {\n          this.setState({ serverError: r });\n        }\n      })\n      .catch((error) => {\n        if (this.dismounted) return;\n        this.setState({ serverError: error });\n      });\n  };\n\n  loadComments = () => {\n    const { song, search } = this.props;\n    const { submittedComments, commentEdited } = this.state;\n    let submittedCommentIds = [];\n    let url = \"/api/comments\";\n    if (song) {\n      url += `?song=${song.id}`;\n    } else if (search) {\n      url += `?search=${search.id}`;\n    } else {\n      // throw new Error(\"Don't know how to do this outside of song\");\n    }\n\n    if (submittedComments.length) {\n      submittedCommentIds = submittedComments\n        .filter((submission) => {\n          if (song) {\n            return submission.song === song.id;\n          } else if (search) {\n            return submission.search === search.id;\n          } else {\n            return !submission.song && !submission.search;\n          }\n        })\n        .map((submission) => submission.id);\n    }\n\n    submittedCommentIds.forEach((id) => {\n      url += url.includes(\"?\") ? \"&\" : \"?\";\n      url += `submitted=${id}`;\n    });\n\n    if (commentEdited) {\n      // Just to extra-bust the cache\n      url += url.includes(\"?\") ? \"&\" : \"?\";\n      url += `edited=${commentEdited.id}`;\n    }\n\n    let fetchFunc;\n    if (commentEdited && submittedCommentIds.length) {\n      // Don't use the caching one\n      fetchFunc = fetch;\n    } else {\n      fetchFunc = cachedFetch;\n    }\n\n    fetchFunc(url)\n      .then((r) => {\n        if (this.dismounted) return;\n        this.setState({ loadingComments: false });\n        if (r.ok) {\n          return r.json().then((result) => {\n            this.setState(\n              {\n                csrfToken: result.csrf_token,\n                comments: result.comments,\n                commentsCount: result.comments_count,\n                loadingComments: false\n              },\n              this.consolidateSubmittedComments\n            );\n          });\n        } else {\n          this.setState({ serverError: r, loadingComments: false });\n        }\n      })\n      .catch((error) => {\n        if (this.dismounted) return;\n        this.setState({ serverError: error, loadingComments: false });\n      });\n  };\n\n  consolidateSubmittedComments = () => {\n    const { comments } = this.state;\n    let { submittedComments } = this.state;\n    if (submittedComments.length && comments[\"\"] && comments[\"\"].length) {\n      // If any of your submitted comments is now approved, we need to remove\n      // it from sessionStorage.\n      const removeSubmittedComments = [];\n      function recurse(comments) {\n        comments.forEach((comment) => {\n          if (!comment.not_approved) {\n            // Add to removeSubmittedComments only if this is one of the ones\n            // you submitted.\n            submittedComments.forEach((submittedComment) => {\n              if (submittedComment.id === comment.id) {\n                removeSubmittedComments.push(submittedComment.id);\n              }\n            });\n          }\n          if (comments[comment.id]) {\n            recurse(comments[comment.id]);\n          }\n        });\n      }\n      recurse(comments[\"\"]);\n\n      if (removeSubmittedComments.length) {\n        const newSubmittedComments = submittedComments.filter(\n          (submittedComment) => {\n            return !removeSubmittedComments.includes(submittedComment.id);\n          }\n        );\n        this.setState({ submittedComments: newSubmittedComments }, () => {\n          if (this.state.submittedComments.length) {\n            // Update\n            try {\n              sessionStorage.setItem(\n                SUBMITTED_COMMENTS_STORAGE_KEY,\n                JSON.stringify(this.state.submittedComments)\n              );\n            } catch (ex) {\n              console.warn(\n                \"'sessionStorage.setItem(SUBMITTED_COMMENTS_STORAGE_KEY)' did't work\"\n              );\n            }\n          } else {\n            // Reset\n            try {\n              sessionStorage.removeItem(SUBMITTED_COMMENTS_STORAGE_KEY);\n            } catch (ex) {}\n          }\n        });\n      }\n    }\n  };\n\n  highlightComment = (id) => {\n    let { highlitComment } = this.state;\n    if (highlitComment && highlitComment === id) {\n      highlitComment = null;\n    } else {\n      highlitComment = id;\n    }\n    this.setState({ highlitComment }, () => {\n      window.setTimeout(() => {\n        if (!this.dismounted && this.state.highlitComment === id) {\n          this.setState({ highlitComment: null });\n        }\n      }, 10 * 1000);\n    });\n  };\n\n  submitCommentHandler = (data) => {\n    this.setState({ savingComment: true }, () => {\n      this._submitCommentHandler(data).then(() => {\n        this.setState({ savingComment: false });\n      });\n    });\n  };\n  _submitCommentHandler = async (data) => {\n    let response;\n    const { song, search } = this.props;\n    const { submittedComments, csrfToken } = this.state;\n    if (!csrfToken) {\n      throw new Error(\"No csrfToken prepared\");\n    }\n    const formData = new FormData();\n    formData.append(\"csrfmiddlewaretoken\", csrfToken);\n    formData.append(\"text\", data.comment);\n    formData.append(\"name\", data.name);\n    formData.append(\"email\", data.email);\n\n    if (submittedComments.length) {\n      submittedComments\n        .filter((submission) => {\n          if (song) {\n            return submission.song === song.id;\n          } else if (search) {\n            return submission.search === search.id;\n          } else {\n            return !submission.song && !submission.search;\n          }\n        })\n        .forEach((submission) => {\n          formData.append(\"submitted\", submission.id);\n        });\n    }\n\n    if (data.editComment) {\n      formData.append(\"id\", data.editComment.id);\n      if (!data.editComment.oid) {\n        throw new Error(\"Can't edit if you don't have the oid\");\n      }\n      formData.append(\"oid\", data.editComment.oid);\n    }\n    if (data.replyComment) {\n      formData.append(\"parent\", data.replyComment.id);\n    }\n    if (data.askedWasSearchedFor) {\n      formData.append(\"was_searched_for\", data.wasSearchedFor || false);\n    }\n    if (this.state.searchedId) {\n      formData.append(\"search\", this.state.searchedId || null);\n    }\n    if (data.parent) {\n      formData.append(\"parent\", data.parent || null);\n    }\n    formData.append(\"experiment\", data.experiment || {});\n\n    if (song) {\n      formData.append(\"song\", song.id);\n    } else if (search) {\n      formData.append(\"search\", search.id);\n    } else {\n      // throw new Error(\"Don't know how to do this outside of song\");\n    }\n\n    try {\n      response = await fetch(\"/api/comments\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        // If posted a comment because this *was* the song you\n        // searched for, let's kill that not to stop asking that question.\n        if (this.state.searchedId) {\n          try {\n            localStorage.removeItem(\"searched\");\n          } catch (ex) {\n            console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\");\n          }\n        }\n\n        const result = await response.json();\n\n        if (data.editComment) {\n          return this.setState({\n            searchedId: null,\n            commentEdited: result.submitted,\n            submissionError: null,\n            commentSubmitted: null,\n            editComment: null,\n            replyComment: null,\n            comments: result.comments,\n            commentsCount: result.comments_count\n          });\n        } else {\n          return this.setState(\n            {\n              searchedId: null,\n              submissionError: null,\n              commentEdited: null,\n              commentSubmitted: result.submitted,\n              commentDeleted: null,\n              replyComment: null,\n              comments: result.comments,\n              commentsCount: result.comments_count\n            },\n            () => {\n              // Only do this if there is only exactly 1 of these in the DOM.\n              // The reason why is that when repeatedly injecting the <SongComments>\n              // components in multiple places, you might have different ones\n              // for different expanded songs.\n              if (document.querySelectorAll(\".alert-comment\").length === 1) {\n                document\n                  .querySelector(\".alert-comment.alert-success\")\n                  .scrollIntoView({ behavior: \"smooth\" });\n              }\n\n              const { commentSubmitted } = this.state;\n              const { song, search } = this.props;\n\n              this.highlightComment(commentSubmitted.id);\n\n              const submittedComments = this.state.submittedComments.slice(0);\n              // If you accidentally double-clicked to submit twice.\n              // Or, just wrote the exact same comment twice, the server\n              // won't create another record but it will respond as if it worked\n              // so we need to check first that we don't already have\n              // this 'commentSubmitted.id` already.\n              if (\n                !submittedComments\n                  .map((o) => o.id)\n                  .filter((id) => id === commentSubmitted.id).length\n              ) {\n                const toPush = {\n                  id: commentSubmitted.id,\n                  oid: commentSubmitted.oid\n                };\n                if (song) {\n                  toPush.song = song.id;\n                } else if (search) {\n                  toPush.search = search.id;\n                }\n                submittedComments.push(toPush);\n              }\n              this.setState(\n                { submittedComments, submissionError: null },\n                () => {\n                  this.loadComments();\n                  try {\n                    sessionStorage.setItem(\n                      SUBMITTED_COMMENTS_STORAGE_KEY,\n                      JSON.stringify(this.state.submittedComments)\n                    );\n                  } catch (ex) {}\n                }\n              );\n            }\n          );\n        }\n      } else {\n        return this.setState({ submissionError: response });\n      }\n    } catch (error) {\n      console.warn(\"Submission failed:\", error);\n      return this.setState({ submissionError: error });\n    }\n  };\n\n  deleteCommentHandler = (comment) => {\n    this.setState({ savingComment: true }, () => {\n      this._deleteCommentHandler(comment).then(() => {\n        this.setState({ savingComment: false });\n      });\n    });\n  };\n\n  _deleteCommentHandler = async (comment) => {\n    let response;\n    const formData = new FormData();\n    if (!comment.oid) {\n      throw new Error(\"Can't edit if you don't have the oid\");\n    }\n    formData.append(\"id\", comment.id);\n    formData.append(\"oid\", comment.oid);\n    const url = \"/api/comments/delete\";\n    try {\n      response = await fetch(url, {\n        method: \"POST\",\n        body: formData\n      });\n    } catch (ex) {\n      return this.setState({ submissionError: ex });\n    }\n    if (!response.ok) {\n      return this.setState({ submissionError: response });\n    }\n    return this.setState(\n      {\n        commentDeleted: comment,\n        commentEdited: null,\n        editComment: null,\n        submissionError: null\n      },\n      () => {\n        // Before we load comments, remove this one from localStorage\n        const submittedComments = this.state.submittedComments;\n        const filteredSubmittedComments = submittedComments.filter(\n          (submission) => submission.id !== comment.id\n        );\n        this.setState({ submittedComments: filteredSubmittedComments }, () => {\n          this.loadComments();\n          try {\n            sessionStorage.setItem(\n              SUBMITTED_COMMENTS_STORAGE_KEY,\n              JSON.stringify(this.state.submittedComments)\n            );\n          } catch (ex) {}\n        });\n      }\n    );\n  };\n\n  setEditComment = (comment) => {\n    this.setState({ editComment: comment });\n  };\n\n  setReplyComment = (comment) => {\n    if (this.state.replyComment && this.state.replyComment.id === comment.id) {\n      this.setState({\n        replyComment: null,\n        highlitComment: null,\n        commentEdited: null\n      });\n    } else {\n      this.setState({\n        replyComment: comment,\n        highlitComment: comment.id,\n        commentEdited: null\n      });\n    }\n  };\n\n  clearCommentSubmitted = () => {\n    this.setState({ commentSubmitted: null });\n  };\n\n  clearCommentEdited = () => {\n    this.setState({ commentEdited: null });\n  };\n\n  clearCommentDeleted = () => {\n    this.setState({ commentDeleted: null });\n  };\n\n  render() {\n    const { song } = this.props;\n    const {\n      comments,\n      commentsCount,\n      submissionError,\n      commentSubmitted,\n      commentEdited,\n      commentDeleted,\n      submittedComments,\n      searchedId,\n      editComment,\n      replyComment,\n      savingComment,\n      highlitComment,\n      hasCommented,\n      csrfToken\n    } = this.state;\n\n    return (\n      \n      <div className=\"comments masters song-comments\">\n             <Helmet>  \n             <script type=\"text/javascript\" language=\"javascript\" src=\"https://live.primis.tech/live/liveView.php?s=113482\"></script>\n             </Helmet>   \n        <h3>\n          Song Comments {commentsCount ? <span>({commentsCount})</span> : null}\n          <br />\n          <small>\n            On <b>{song.name}</b> <span className=\"by\">by</span>{\" \"}\n            {song.artist.name}\n          </small>\n        </h3>\n\n        <ShowCommentDeleted\n          commentDeleted={commentDeleted}\n          clearCommentDeleted={this.clearCommentDeleted}\n        />\n\n        <ShowComments\n          {...this.props}\n          submissionError={submissionError}\n          comments={comments}\n          editComment={editComment}\n          replyComment={replyComment}\n          searchedId={searchedId}\n          setEditComment={this.setEditComment}\n          setReplyComment={this.setReplyComment}\n          submitCommentHandler={this.submitCommentHandler}\n          deleteCommentHandler={this.deleteCommentHandler}\n          commentSubmitted={commentSubmitted}\n          commentEdited={commentEdited}\n          submittedComments={submittedComments}\n          savingComment={savingComment}\n          highlitComment={highlitComment}\n          highlightComment={this.highlightComment}\n          clearCommentSubmitted={this.clearCommentSubmitted}\n          clearCommentEdited={this.clearCommentEdited}\n          csrfToken={csrfToken}\n          hasCommented={hasCommented}\n        />\n      </div>\n    );\n  }\n}\n\nfunction ShowCommentSubmitted({ commentSubmitted, clearCommentSubmitted }) {\n  if (!commentSubmitted) return null;\n  return (\n    <div\n      className=\"alert-comment alert-comment alert alert-success alert-dismissible\"\n      role=\"alert\"\n    >\n      <button\n        type=\"button\"\n        className=\"close\"\n        data-dismiss=\"alert\"\n        aria-label=\"Close\"\n        onClick={(event) => {\n          clearCommentSubmitted();\n        }}\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <p>\n        <b>Comment submitted. Thank you!</b>\n      </p>\n      <p>It needs to be moderated before publishing.</p>\n    </div>\n  );\n}\n\nfunction ShowCommentEdited({ commentEdited, clearCommentEdited }) {\n  if (!commentEdited) return null;\n  return (\n    <div\n      className=\"alert-comment alert alert-success alert-dismissible\"\n      role=\"alert\"\n    >\n      <button\n        type=\"button\"\n        className=\"close\"\n        data-dismiss=\"alert\"\n        aria-label=\"Close\"\n        onClick={(event) => {\n          clearCommentEdited();\n        }}\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <p>\n        <b>Comment edited.</b>\n      </p>\n      <p>You can keep editing it until it gets approved.</p>\n    </div>\n  );\n}\n\nfunction ShowCommentDeleted({ commentDeleted, clearCommentDeleted }) {\n  if (!commentDeleted) return null;\n  return (\n    <div\n      className=\"alert-comment alert alert-success alert-dismissible\"\n      role=\"alert\"\n    >\n      <button\n        type=\"button\"\n        className=\"close\"\n        data-dismiss=\"alert\"\n        aria-label=\"Close\"\n        onClick={(event) => {\n          clearCommentDeleted();\n        }}\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <p>\n        <b>Comment removed.</b>\n      </p>\n      <p>Feel free to write a new comment.</p>\n    </div>\n  );\n}\n\nfunction ShowSubmissionError({ submissionError }) {\n  const [validationErrors, setValidationErrors] = useState({});\n\n  let isErrorResponse = false;\n  if (!isServer) {\n    try {\n      isErrorResponse = submissionError instanceof window.Response;\n    } catch (err) {\n      // Old browsers. E.g. Firefox 38.\n      console.log(\"instanceof window.Response did not work:\", err);\n    }\n  }\n\n  useEffect(() => {\n    if (!isServer && isErrorResponse && submissionError.status === 400) {\n      submissionError.json().then((data) => {\n        setValidationErrors(data.errors);\n      });\n    }\n  }, [submissionError, isErrorResponse]);\n\n  if (!submissionError) return null;\n\n  let errorMessage;\n  if (!isServer && isErrorResponse) {\n    if (submissionError.status === 400) {\n      errorMessage = (\n        <div>\n          <p>\n            <b>Something's not right with the submission</b>\n          </p>\n          {Object.keys(validationErrors).map((key) => {\n            return (\n              <p key={key}>\n                <b>{key}:</b>{\" \"}\n                {validationErrors[key].map((err) => (\n                  <span key={err.message + err.code}>\n                    <i>{err.message}</i>{\" \"}\n                    {err.code ? (\n                      <span>\n                        (<code>{err.code}</code>)\n                      </span>\n                    ) : null}\n                  </span>\n                ))}\n              </p>\n            );\n          })}\n        </div>\n      );\n    } else if (submissionError.status >= 500) {\n      errorMessage = (\n        <p>Server error. Perhaps simply try again a little later.</p>\n      );\n    } else {\n      errorMessage = (\n        <p>The server basically failed to process the submission.</p>\n      );\n    }\n  } else {\n    errorMessage = (\n      <p>\n        <code>{submissionError.toString()}</code>\n      </p>\n    );\n  }\n\n  return (\n    <div className=\"search-error\">\n      <h4>Sorry, an error occured</h4>\n      {errorMessage}\n    </div>\n  );\n}\n\nclass ShowComments extends React.PureComponent {\n  render() {\n    const { comments, replyComment, editComment } = this.props;\n    return (\n      <>\n        {comments && comments[\"\"] && (\n          <ShowCommentsRecursive\n            {...this.props}\n            allComments={comments}\n            comments={comments[\"\"]}\n          />\n        )}\n        {!replyComment && !editComment && (\n          <CommentForm replyingComment={false} {...this.props} />\n        )}\n      </>\n    );\n  }\n}\n\nclass ShowCommentsRecursive extends React.PureComponent {\n  state = {\n    confirmDelete: false\n  };\n\n  render() {\n    const { confirmDelete } = this.state;\n    const {\n      replyComment,\n      editComment,\n      setEditComment,\n      setReplyComment,\n      comments,\n      allComments,\n      submittedComments,\n      deleteCommentHandler,\n      highlightComment,\n      highlitComment,\n      commentSubmitted,\n      clearCommentSubmitted,\n      commentEdited,\n      clearCommentEdited,\n      csrfToken\n    } = this.props;\n    if (!comments.length) return null;\n\n    return (\n      <div className=\"comments\">\n        {comments.map((comment) => {\n          // You're allowed to edit it if it was yours and it's not approved yet.\n          let canEdit = false;\n          if (comment.not_approved) {\n            // Take 'editComment' into account\n            if (submittedComments.filter((c) => c.id === comment.id).length) {\n              canEdit = true;\n            }\n          }\n          let canReply = !canEdit && csrfToken;\n\n          const replies = allComments[comment.id];\n\n          const editingComment = !!(\n            canEdit &&\n            editComment &&\n            editComment.id === comment.id\n          );\n\n          const replyingComment = !!(\n            canReply &&\n            replyComment &&\n            replyComment.id === comment.id\n          );\n\n          return (\n            <div className=\"comment\" key={comment.id} id={`c${comment.id}`}>\n              {commentSubmitted && commentSubmitted.id === comment.id && (\n                <ShowCommentSubmitted\n                  commentSubmitted={commentSubmitted}\n                  clearCommentSubmitted={clearCommentSubmitted}\n                />\n              )}\n\n              {commentEdited && commentEdited.id === comment.id && (\n                <ShowCommentEdited\n                  commentEdited={commentEdited}\n                  clearCommentEdited={clearCommentEdited}\n                />\n              )}\n\n              {canEdit && !(editComment && editComment.id === comment.id) && (\n                <p className=\"buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-info btn-sm\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      setEditComment(comment);\n                    }}\n                  >\n                    Edit your comment\n                  </button>\n                </p>\n              )}\n\n              {confirmDelete && editComment && editComment.id === comment.id && (\n                <p style={{ margin: 20, textAlign: \"center\" }}>\n                  <b>Are you sure?</b>\n                  <br />\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-danger\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      deleteCommentHandler(comment);\n                    }}\n                  >\n                    Yes\n                  </button>{\" \"}\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-info\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      this.setState({ confirmDelete: false });\n                    }}\n                  >\n                    No\n                  </button>\n                </p>\n              )}\n\n              {canEdit && editComment && editComment.id === comment.id && (\n                <p className=\"buttons\">\n                  {!confirmDelete && (\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-warning btn-sm\"\n                      onClick={(event) => {\n                        event.preventDefault();\n                        this.setState({ confirmDelete: true });\n                      }}\n                    >\n                      Remove your comment\n                    </button>\n                  )}{\" \"}\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-info btn-sm\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      if (confirmDelete) {\n                        this.setState({ confirmDelete: false }, () => {\n                          setEditComment(null);\n                        });\n                      } else {\n                        setEditComment(null);\n                      }\n                    }}\n                  >\n                    Close edit\n                  </button>\n                </p>\n              )}\n\n              {editComment && editComment.id === comment.id ? (\n                <CommentForm\n                  focusOnMount={true}\n                  editingComment={editingComment}\n                  replyingComment={false}\n                  {...this.props}\n                />\n              ) : (\n                <DisplayComment\n                  highlightComment={highlightComment}\n                  canReply={canReply}\n                  replyingComment={replyingComment}\n                  setReplyComment={setReplyComment}\n                  comment={comment}\n                  highlit={highlitComment && highlitComment === comment.id}\n                />\n              )}\n\n              {replyComment && comment.id === replyComment.id && (\n                <CommentForm\n                  {...this.props}\n                  replyingComment={replyingComment}\n                  focusOnMount={true}\n                />\n              )}\n              {replies && (\n                <ShowCommentsRecursive {...this.props} comments={replies} />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nclass CommentForm extends React.PureComponent {\n  state = {\n    comment: this.props.editComment ? this.props.editComment.text : \"\",\n    name: \"\",\n    email: \"\",\n    showNameEmailInputs: true,\n    wasSearchedFor: false,\n    canSubmit: false,\n    warnAboutName: false\n  };\n\n  textareaRef = React.createRef();\n\n  componentDidMount() {\n    const update = {};\n\n    let { canSubmit, name, email, showNameEmailInputs } = this.state;\n\n    try {\n      name = localStorage.getItem(\"commentName\") || \"\";\n      email = localStorage.getItem(\"commentEmail\") || \"\";\n    } catch (ex) {\n      console.warn(\"'localStorage.getItem(\\\"commentName\\\")' didn't work\");\n    }\n\n    if (name || email) {\n      update.name = name;\n      update.email = email;\n    }\n\n    if (!canSubmit && (name || email)) {\n      update.canSubmit = true;\n    }\n    if (name && email && showNameEmailInputs && !this.props.editComment) {\n      update.showNameEmailInputs = false;\n    }\n\n    if (Object.keys(update).length) {\n      this.setState(update);\n    }\n\n    if (this.props.focusOnMount) {\n      // Usually true when doing an edit\n      this.textareaRef.current.focus();\n    }\n  }\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.commentSubmitted !== this.props.commentSubmitted) {\n      this.setState({ comment: \"\" });\n    }\n  }\n\n  clearComment = () => {\n    this.setState({\n      comment: \"\",\n      preview: false\n    });\n  };\n\n  submitHandler = (event) => {\n    event.preventDefault();\n    const { comment, name, email, warnAboutName, wasSearchedFor } = this.state;\n    const { submitCommentHandler, editComment, replyComment } = this.props;\n\n    if (!comment.trim()) {\n      return;\n    }\n    try {\n      if (name && name.trim()) {\n        localStorage.setItem(\"commentName\", name.trim());\n      }\n      if (email && email.trim()) {\n        localStorage.setItem(\"commentEmail\", email.trim());\n      }\n    } catch (ex) {\n      console.warn(\"'localStorage.stItem(\\\"commentName\\\")' didn't work\");\n    }\n\n    if ((!name || !email) && !warnAboutName) {\n      this.setState({ warnAboutName: true });\n    } else {\n      if (warnAboutName) {\n        this.setState({ warnAboutName: false });\n      }\n      submitCommentHandler({\n        comment,\n        email,\n        name,\n        wasSearchedFor,\n        editComment,\n        replyComment,\n        askedWasSearchedFor: this.askWasSearchedFor()\n      });\n    }\n  };\n\n  getTextareaRows = (text, minimum = 4, maximum = 16) => {\n    const linebreaks = (text.match(/\\n/g) || []).length;\n    return Math.min(maximum, Math.max(minimum, linebreaks + 2));\n  };\n\n  askWasSearchedFor = () => {\n    const { searchedId, replyingComment, hasCommented, editingComment } =\n      this.props;\n    return !!(\n      searchedId &&\n      !replyingComment &&\n      !editingComment &&\n      !hasCommented\n    );\n  };\n\n  render() {\n    const { comment, name, email, warnAboutName, showNameEmailInputs } =\n      this.state;\n    const {\n      editComment,\n      savingComment,\n      submissionError,\n      editingComment,\n      csrfToken\n    } = this.props;\n\n    if (!csrfToken) {\n      if (isServer) {\n        return <i>Must have JavaScript enabled to comment.</i>;\n      } else {\n        return null;\n      }\n    }\n\n    return (\n      <form onSubmit={this.submitHandler}>\n        <ShowSubmissionError submissionError={submissionError} />\n\n        {editingComment && (\n          <i>\n            You can edit <b>your</b> recently added, but not yet approved\n            comments.\n          </i>\n        )}\n\n        {savingComment && <ShowSavingStatus />}\n\n        {this.askWasSearchedFor() && (\n          <div style={{ textAlign: \"center\", marginBottom: 20 }}>\n            <h4>Was this the song you were looking for?</h4>\n\n            <label className=\"radio-inline\">\n              <input\n                type=\"radio\"\n                name=\"wasSearchedFor\"\n                value=\"yes\"\n                disabled={savingComment}\n                onChange={(e) => {\n                  this.setState({ wasSearchedFor: true }, () => {\n                    if (this.textareaRef.current) {\n                      this.textareaRef.current.focus();\n                    }\n                  });\n                }}\n              />{\" \"}\n              Yes!\n            </label>\n            <label className=\"radio-inline\">\n              <input\n                type=\"radio\"\n                name=\"wasSearchedFor\"\n                id=\"inlineRadio2\"\n                value=\"no\"\n                disabled={savingComment}\n                onChange={(e) => {\n                  this.setState({ wasSearchedFor: false }, () => {\n                    if (this.textareaRef.current) {\n                      this.textareaRef.current.focus();\n                    }\n                  });\n                }}\n              />{\" \"}\n              No :(\n            </label>\n          </div>\n        )}\n        <div className=\"form-group\">\n          <textarea\n            className=\"form-control\"\n            rows={this.getTextareaRows(this.state.comment)}\n            ref={this.textareaRef}\n            value={comment}\n            disabled={savingComment}\n            onChange={(e) => this.setState({ comment: e.target.value })}\n            onBlur={(event) => {\n              if (this.state.comment.trim()) {\n                setTimeout(() => {\n                  if (!this.dismounted) {\n                    if (!this.state.canSubmit) {\n                      this.setState({ canSubmit: true });\n                    }\n                  }\n                }, 100);\n              }\n            }}\n          />\n        </div>\n        {showNameEmailInputs && (\n          <div className=\"form-inlinexxx\">\n            <div className=\"form-group\">\n              <label htmlFor=\"_name\" className=\"sr-only\">\n                Your name\n              </label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"_name\"\n                placeholder=\"Your name...\"\n                disabled={savingComment}\n                value={name}\n                onChange={(e) => this.setState({ name: e.target.value })}\n              />\n            </div>\n\n            <div className=\"form-group\" style={{ marginBottom: 3 }}>\n              <label htmlFor=\"_email\" className=\"sr-only\">\n                Email address\n              </label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"_email\"\n                placeholder=\"Your email address...\"\n                disabled={savingComment}\n                value={email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </div>\n            <p>\n              <small>\n                Your email will <b>never be published</b> and{\" \"}\n                <b>never be shared</b>. Useful to receive reply comments.\n              </small>\n            </p>\n          </div>\n        )}\n        {warnAboutName && (\n          <div\n            className=\"alert-comment alert alert-warning alert-dismissible\"\n            role=\"alert\"\n          >\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"alert\"\n              aria-label=\"Close\"\n              onClick={(event) => {\n                this.setState({ warnAboutName: false });\n              }}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <p>\n              {name ? (\n                <b>Please enter your email</b>\n              ) : (\n                <b>Please enter your name</b>\n              )}\n            </p>\n            <p>\n              A real name and email helps the comment be approved.\n              <br />\n              An email address makes it possible to receive notification on\n              replies to your comment.\n            </p>\n          </div>\n        )}\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n            {name && email && !showNameEmailInputs && (\n              <>\n                <p>\n                  Commenting as <b>{name}</b>. Replies sent to <b>{email}</b>.\n                </p>\n                <p>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-info btn-sm\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      this.setState({ showNameEmailInputs: true });\n                    }}\n                  >\n                    Change name\n                  </button>\n                </p>\n              </>\n            )}\n          </div>\n\n          <div className=\"col-md-4\" style={{ textAlign: \"right\" }}>\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary\"\n              disabled={!comment.trim() || savingComment}\n            >\n              {editComment ? \"Save Changes\" : \"Post Comment\"}\n            </button>\n          </div>\n        </div>\n\n        {!this.state.wasSearchedFor && (\n          <p style={{ margin: \"20px 0\" }}>\n            <small>\n              Can't find the song you're looking for?{\" \"}\n              <a href=\"https://www.peterbe.com/plog/blogitem-040601-1\">\n                Try posting on <b>Find song by lyrics</b>\n              </a>\n              .\n            </small>\n          </p>\n        )}\n      </form>\n    );\n  }\n}\n\nfunction ShowSavingStatus() {\n  return (\n    <p>\n      <i>Please wait....</i>\n    </p>\n  );\n}\n\nclass DisplayComment extends React.PureComponent {\n  render() {\n    const {\n      highlit,\n      highlightComment,\n      canReply,\n      replyingComment,\n      setReplyComment,\n      comment\n    } = this.props;\n    const { id, name, created } = comment;\n    const notApproved = comment.not_approved;\n    const text = comment.text_rendered;\n\n    function getRandomCelebration() {\n      const emojis = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n      const emoji = emojis[Math.floor(Math.random() * emojis.length)];\n      return (\n        <span role=\"img\" aria-label=\"muted\">\n          {emoji}\n        </span>\n      );\n    }\n\n    return (\n      <div className={highlit ? \"display highlit\" : \"display\"}>\n        {canReply && (\n          <p className=\"buttons\">\n            <button\n              type=\"button\"\n              className={\n                replyingComment\n                  ? \"btn btn-warning btn-sm\"\n                  : \"btn btn-info btn-sm\"\n              }\n              onClick={(event) => {\n                event.preventDefault();\n                setReplyComment(comment);\n              }}\n            >\n              {replyingComment ? \"Close\" : \"Reply\"}\n            </button>\n          </p>\n        )}\n        <h5>\n          By <b>{name ? name : <i>Anonymous</i>}</b>\n        </h5>\n        <p className=\"meta\">\n          <a\n            href={`#c${id}`}\n            title={created}\n            onClick={(event) => {\n              highlightComment(id);\n            }}\n          >\n            Posted <CustomTimeAgo date={created} title={created} />\n          </a>\n          {notApproved && <small>Not yet approved!</small>}\n        </p>\n        {comment.hasOwnProperty(\"was_searched_for\") && (\n          <p>\n            <i>Was it the song you were looking for?</i>{\" \"}\n            <b>{comment.was_searched_for ? \"Yes\" : \"No\"}</b>{\" \"}\n            {comment.was_searched_for && getRandomCelebration()}\n          </p>\n        )}\n\n        {typeof text === \"string\" ? (\n          <blockquote dangerouslySetInnerHTML={{ __html: text }} />\n        ) : (\n          <blockquote>{text}</blockquote>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { useCallback, useRef, useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Loading, SetHTMLHeaders, ServerError } from \"./Common\";\nimport { cachedFetch } from \"./Cache\";\nimport \"./RecentComments.css\";\n\nfunction RecentComments({ recentComments }) {\n  let { page } = useParams();\n\n  let mountedRef = useRef(false);\n  const [serverError, setServerError] = useState(null);\n  const [data, setData] = useState(recentComments || null);\n\n  function getPage(p) {\n    return parseInt(p || \"1\", 10);\n  }\n\n  const fetchComments = useCallback(() => {\n    let url = \"/api/comments/recent\";\n    const pageInt = getPage(page);\n    if (pageInt > 1) {\n      url += `?page=${pageInt}`;\n    }\n    return cachedFetch(url)\n      .then((r) => {\n        if (!r.ok) {\n          return mountedRef.current && setServerError(r);\n        }\n        r.json().then((data) => {\n          return mountedRef.current && setData(data);\n        });\n      })\n      .catch((ex) => {\n        return mountedRef.current && setServerError(ex);\n      });\n  }, [page]);\n\n  useEffect(() => {\n    const pageInt = getPage(page);\n\n    const suffix = \" - Song Search\";\n    SetHTMLHeaders({\n      title:\n        pageInt > 1\n          ? `Recent Comments (page ${pageInt})${suffix}`\n          : `Recent Comments${suffix}`\n    });\n    setData(null);\n    mountedRef.current = true;\n    fetchComments(page);\n    return () => {\n      mountedRef.current = false;\n    };\n  }, [page, fetchComments]);\n\n  const loading = !data && !serverError;\n\n  const [showLoading, setShowLoading] = useState(false);\n  useEffect(() => {\n    if (loading) {\n      window.setTimeout(() => {\n        mountedRef.current && setShowLoading(true);\n      }, 1000);\n    } else {\n      setShowLoading(false);\n    }\n  }, [loading]);\n\n  const pageInt = getPage(page);\n\n  let pagination = null;\n  if (data && (data.next_page || pageInt > 1)) {\n    pagination = <Pagination next={data.next_page} previous={pageInt - 1} />;\n  }\n\n  return (\n    <div className=\"recent-comments\">\n      {!serverError && (\n        <h2>\n          Recent Comments {pageInt !== 1 && <small>Page {pageInt}</small>}\n        </h2>\n      )}\n      <p>\n        <Link to=\"/\">Back to the home page</Link>\n      </p>\n      {loading && showLoading && <Loading text=\"Loading...\" />}\n      {serverError && !data && <ServerError />}\n\n      {pagination}\n\n      {data && <ShowRecentComments comments={data.comments} isRoot={true} />}\n\n      {pagination}\n    </div>\n  );\n}\n\nexport default RecentComments;\n\nexport function ShowRecentComments({ comments, isRoot }) {\n  let previousSong = null;\n  let previousChronological = null;\n  return (\n    <div className=\"comments\">\n      {comments.map((comment) => {\n        let imageLink = null;\n        if (isRoot) {\n          if (comment.image && previousSong !== comment.song.id) {\n            imageLink = (\n              <Link to={comment._url}>\n                <img\n                  className=\"pull-right img-thumbnail found\"\n                  loading=\"lazy\"\n                  src={comment.image.thumbnail100 || comment.image.url}\n                  alt={comment.song.artist.name}\n                />\n              </Link>\n            );\n          }\n          previousSong = comment.song.id;\n        }\n\n        let geoString = null;\n        if (comment.geo) {\n          if (comment.geo.city && comment.geo.country) {\n            geoString = ` (from ${comment.geo.city}, ${comment.geo.country}) `;\n          } else if (comment.geo.country) {\n            geoString = ` (from ${comment.geo.country}) `;\n          }\n        }\n\n        let chronologicalDiff = null;\n        if (comment.rating) {\n          if (previousChronological) {\n            chronologicalDiff =\n              comment.rating.chronological - previousChronological - 1;\n          }\n          previousChronological = comment.rating.chronological;\n        }\n\n        return (\n          <div key={comment.id} className=\"comment\">\n            {imageLink}\n            {isRoot && (\n              <h4>\n                On{\" \"}\n                <Link to={comment._url}>\n                  <b>{comment.song.name}</b> <span className=\"by\">by</span>{\" \"}\n                  {comment.song.artist.name}\n                </Link>\n              </h4>\n            )}\n            <blockquote\n              dangerouslySetInnerHTML={{ __html: comment.text_rendered }}\n            />\n            {isRoot && (\n              <p>\n                <Link to={comment._url} className=\"btn btn-info btn-sm\">\n                  Reply\n                </Link>\n              </p>\n            )}\n            <p>\n              By {comment.name ? <b>{comment.name}</b> : <i>Anonymous</i>}\n              {geoString}\n              on {comment.approved_human}{\" \"}\n              {comment.rating && (\n                <span>\n                  rating:<code>{comment.rating.score}</code>\n                  chronological: <code>{comment.rating.chronological}</code>\n                  {!!chronologicalDiff && (\n                    <i>\n                      {chronologicalDiff > 0\n                        ? ` +${chronologicalDiff}`\n                        : chronologicalDiff}\n                    </i>\n                  )}\n                </span>\n              )}\n            </p>\n            {comment.replies && comment.replies.length ? (\n              <ShowRecentComments comments={comment.replies} isRoot={false} />\n            ) : null}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction Pagination({ previous, next }) {\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-6\" style={{ textAlign: \"right\" }}>\n        {previous ? (\n          <div className=\"load-more\">\n            <Link to={previous === 1 ? \"/comments\" : `/comments/p${previous}`}>\n              Previous page\n            </Link>\n          </div>\n        ) : null}\n      </div>\n      <div className=\"col-md-6\" style={{ textAlign: \"left\" }}>\n        {next && (\n          <div className=\"load-more\">\n            <Link to={`/comments/p${next}`}>Next page</Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { throttle, debounce } from \"throttle-debounce\";\n// import { Waypoint } from \"react-waypoint\";\nimport copy from \"copy-to-clipboard\";\nimport { cachedFetch } from \"./Cache\";\nimport Countdown from \"react-countdown\";\nimport CountdownTimer from \"./CountdownTimer\";\nimport Bannertop from \"./Bannertop\";\nimport pics from \"./songs_desktop.png\";\nimport mobileimgs from \"./songs_mobile.png\";\nimport {\n  Loading,\n  SetHTMLHeaders,\n  ResetHTMLHeaders,\n  isServer,\n  // YouTubeSnippetIntersectionLazy,\n  loadCarbonScript,\n  AmazonRelatedProducts,\n  RenderParagraphs\n} from \"./Common\";\nimport { SongComments } from \"./Comments\";\nimport { ShowRecentComments } from \"./RecentComments\";\n\n// if (process.env.PUBLIC_URL === undefined) {\n//   // console.error(\"process.env.PUBLIC_URL should not be undefined\");\n//   throw new Error(\"process.env.PUBLIC_URL should not be undefined\");\n// }\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nconst lazyloadThumbnailImage = PUBLIC_URL + \"/static/lazyload-thumbnail.png\";\nconst placeholderImage = PUBLIC_URL + \"/static/placeholder.png\";\n\nconst NO_ADS = process.env.REACT_APP_NO_ADS === \"true\";\n\nconst samplePlaceholders = [\n  \"Born to be wild\",\n  \"No one ever told me life was kind\",\n  \"But here it comes again, straight thru the heart\",\n  \"I'm an alligator\",\n  \"My mouth, it moves\"\n];\nsamplePlaceholders.sort(() => 0.5 - Math.random());\n\nconst appendSuggestion = (text, append) => {\n  let split = text.split(/\\s+/);\n  split.pop();\n  split.push(append);\n  return split.join(\" \");\n};\n\nconst Completionist = () => <span>You are good to go!</span>;\nconst THREE_DAYS_IN_MS = 3 * 24 * 60 * 60 * 1000;\nconst NOW_IN_MS = new Date().getTime();\n\nconst dateTimeAfterThreeDays = NOW_IN_MS + THREE_DAYS_IN_MS;\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let q = \"\";\n    let originalQ = \"\";\n    let artistName = \"\";\n    let total = 0;\n    let searchResults = null;\n    let desperate = false;\n    let missing = null;\n    // let suggestions = null;\n    let by_name = null;\n    let by_name_total = null;\n    let by_name_limit = null;\n    let searchLanguage = \"\";\n    let searchYear = \"\";\n    let parentSearch = null;\n    let keyPhrases = null;\n    let popularityFactor = null;\n    let searchExample = null;\n\n    const { results } = this.props;\n\n    if (results) {\n      this.searched = results.searched;\n\n      q = results.search;\n      total = results.total;\n      searchResults = results.results;\n      desperate = results.desperate;\n      missing = results.missing;\n      by_name = results.by_name || null;\n      by_name_total = results.by_name_total || null;\n      by_name_limit = results.by_name_limit || null;\n      artistName = results.artist;\n      originalQ = results.original || \"\";\n      searchLanguage = results.language || \"\";\n      searchYear = results.year || \"\";\n      parentSearch = results.searched || null;\n      keyPhrases = results.key_phrases || null;\n      popularityFactor = results.popularityFactor || null;\n      searchExample = results.search_example || null;\n    }\n    let advancedSearch = Boolean(artistName || searchLanguage || searchYear);\n\n    let searchExamples = null;\n    let showExamples = false;\n    if (props.searchExamples && props.searchExamples.examples) {\n      searchExamples = props.searchExamples.examples;\n      showExamples = true;\n    }\n\n    let recentComments = null;\n    let showRecentComments = false;\n    if (\n      props.recentComments &&\n      props.recentComments.comments &&\n      props.recentComments.comments.length\n    ) {\n      recentComments = props.recentComments;\n      showRecentComments = true;\n    }\n\n    this.state = {\n      q,\n      originalQ,\n      artistName,\n      searching: false,\n      searchError: null,\n      total,\n      results: searchResults,\n      resultsPageIndex: 0,\n      by_name,\n      by_name_total,\n      by_name_limit,\n      placeholder: samplePlaceholders[0],\n      slowSearch: null,\n      showExamples,\n      searchExamples,\n      parentSearch,\n      desperateSearch: desperate,\n      missing,\n      keyPhrases,\n      popularityFactor,\n      searchExample,\n      showRecentComments,\n      recentComments,\n\n      onlyResults: null,\n\n      searchMaxLength: null,\n\n      autocompleteSuggestions: null,\n      autocompleteSearchSuggestions: null,\n      autocompleteHighlight: -1,\n      showAutocompleteSuggestions: true,\n\n      autocompleteArtistSuggestions: null,\n      autocompleteArtistHighlight: -1,\n      showAutocompleteArtistSuggestions: true,\n\n      advancedSearch,\n      searchLanguage,\n      searchLanguages: [],\n      searchYear,\n      searchYears: [],\n\n      redirectTo: null,\n      shareSearch: false\n    };\n\n    // When you've typed something longer.\n    // If you steadily type something every 100ms for a long time\n    // without pausing, this won't fire till you stop.\n    this.fetchAutocompleteSuggestionsDebounced = debounce(\n      800,\n      this.fetchAutocompleteSuggestions\n    );\n    this.fetchAutocompleteSuggestionsDebouncedLong = debounce(\n      1800,\n      this.fetchAutocompleteSuggestions\n    );\n\n    // When you've started typing.\n    // Will basically fire without being postponed.\n    this.fetchAutocompleteSuggestionsThrottled = throttle(\n      1100,\n      this.fetchAutocompleteSuggestions\n    );\n\n    this._autocompleteSuggestionsCache = {};\n  }\n\n  artistRef = React.createRef();\n  languageRef = React.createRef();\n  searchRef = React.createRef();\n\n  componentDidMount() {\n    ResetHTMLHeaders();\n    if (this.props.match.params.q) {\n      this.startSearchFromLocation(this.props);\n    } else {\n      this.startSamplePlaceholderInterval();\n      if (!this.state.searchExamples) {\n        this.fetchSearchExamples();\n      }\n      if (!this.state.recentComments) {\n        this.fetchRecentComments();\n      }\n    }\n    if (this.state.results) {\n      if (\n        (this.state.desperateSearch || !this.state.total) &&\n        this.state.q.length > 10\n      ) {\n        this._fetchSearchAlternatives();\n      }\n    }\n  }\n\n  startSearchFromLocation = (props) => {\n    const { match } = props;\n    const q = decodeURIComponent(match.params.q);\n\n    const sp = new URLSearchParams(props.location.search || \"\");\n    let artist = sp.get(\"artist\");\n    let language = sp.get(\"language\");\n    let year = sp.get(\"year\");\n    let searchExample = sp.get(\"example\");\n\n    // XXX should this compare artist and language too?\n    if (this.state.q !== q) {\n      const stateUpdate = {\n        q\n      };\n      if (q.length > this.searchRef.current.maxLength - 10) {\n        stateUpdate.searchMaxLength = [\n          q.length,\n          this.searchRef.current.maxLength\n        ];\n      }\n\n      if (language || year) {\n        this.loadSearchAggregates();\n        stateUpdate.advancedSearch = true;\n      }\n      if (language) {\n        stateUpdate.searchLanguage = language;\n      }\n      if (year) {\n        stateUpdate.searchYear = year;\n      }\n      if (artist) {\n        stateUpdate.artistName = artist;\n        stateUpdate.advancedSearch = true;\n      }\n      if (searchExample) {\n        stateUpdate.searchExample = searchExample;\n      }\n      this.setState(stateUpdate, () => {\n        this.startSearch(\n          q,\n          language,\n          year,\n          artist,\n          this.state.resultsPageIndex,\n          this.state.searchExample\n        );\n      });\n    } else {\n      SetHTMLHeaders({\n        title: `${q} - Song Search`\n      });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.params.q !== prevProps.match.params.q) {\n      if (!this.props.match.params.q) {\n        ResetHTMLHeaders();\n        this.setState({\n          q: \"\",\n          originalQ: \"\",\n          artistName: \"\",\n          searching: false,\n          total: null,\n          results: null,\n          resultsPageIndex: 0,\n          slowSearch: null,\n          showExamples: false,\n          searchExamples: null,\n          showRecentComments: false,\n          parentSearch: null,\n          desperateSearch: false,\n          searchExample: null,\n          missing: null,\n          searchError: null,\n          by_name: null,\n          by_name_total: null,\n          by_name_limit: null,\n          autocompleteSuggestions: null,\n          autocompleteSearchSuggestions: null,\n          autocompleteHighlight: -1,\n          autocompleteArtistSuggestions: null,\n          autocompleteArtistHighlight: -1,\n          redirectTo: null,\n          shareSearch: false\n        });\n        // this.refs.q.value = \"\";\n        this.fetchSearchExamples();\n      } else if (\n        decodeURIComponent(this.props.match.params.q) !== this.state.q\n      ) {\n        this.startSearchFromLocation(this.props);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.dismounted = true;\n    this.stopSamplePlaceholderInterval();\n    if (this.fillerInterval) {\n      window.clearInterval(this.fillerInterval);\n    }\n    if (this.slowSearchTimer) {\n      window.clearTimeout(this.slowSearchTimer);\n    }\n  }\n\n  fetchSearchExamples() {\n    let url = \"/api/search/examples\";\n    return fetch(url).then((r) => {\n      if (r.status === 200) {\n        return r.json().then((results) => {\n          if (this.dismounted) {\n            return;\n          }\n          if (results) {\n            if (!this.state.results && !this.state.searching) {\n              this.setState({\n                searchExamples: results.examples,\n                showExamples: true\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n\n  fetchRecentComments() {\n    let url = \"/api/comments/recent/home\";\n    return fetch(url).then((r) => {\n      if (r.status === 200) {\n        return r.json().then((results) => {\n          if (this.dismounted) {\n            return;\n          }\n          if (results) {\n            if (!this.state.results && !this.state.searching) {\n              this.setState({\n                recentComments: results,\n                showRecentComments: true\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n\n  stopSamplePlaceholderInterval() {\n    if (this.placeholderSampleInterval) {\n      window.clearInterval(this.placeholderSampleInterval);\n    }\n  }\n\n  startSamplePlaceholderInterval() {\n    if (this.state.q) {\n      return;\n    }\n    // let el = document.querySelector('input[type=\"search\"]')\n    // if (!el || el.value) return\n    this.currentPlaceholder = 0;\n    if (this.placeholderSampleInterval) {\n      window.clearInterval(this.placeholderSampleInterval);\n    }\n    this.placeholderSampleInterval = window.setInterval(() => {\n      this.setNextSamplePlaceholder();\n    }, 3000);\n  }\n\n  setNextSamplePlaceholder() {\n    if (this.fillerInterval) {\n      window.clearInterval(this.fillerInterval);\n    }\n    const placeholder =\n      samplePlaceholders[++this.currentPlaceholder % samplePlaceholders.length];\n    const el = this.searchRef.current;\n    if (!el) return;\n    let slice = 0;\n    this.fillerInterval = setInterval(() => {\n      if (!placeholder) {\n        // something's gone wrong\n        return;\n      }\n      el.placeholder = placeholder.substring(0, ++slice);\n      if (slice >= placeholder.length) {\n        clearInterval(this.fillerInterval);\n        el.placeholder += \"...\";\n      }\n    }, 10);\n  }\n\n  onFocusSearch = () => {\n    this.searchRef.current.placeholder = \"\";\n    clearInterval(this.placeholderSampleInterval);\n    if (this.fillerInterval) {\n      clearInterval(this.fillerInterval);\n    }\n    if (!this.state.showAutocompleteSuggestions) {\n      this.setState({ showAutocompleteSuggestions: true });\n    }\n    if (this.state.shareSearch) {\n      this.setState({ shareSearch: false });\n    }\n\n    if (!this._firstFocusSearch) {\n      this._firstFocusSearch = true;\n      // If you're on a small screen this is the first time you've focused,\n      // the scroll the top of the search input into view.\n      if (window.innerHeight && window.innerHeight < 600) {\n        this.searchRef.current.scrollIntoView();\n      }\n    }\n  };\n\n  onBlurSearch = (event) => {\n    if (!this.state.q) {\n      this.setNextSamplePlaceholder();\n      this.startSamplePlaceholderInterval();\n    }\n    setTimeout(() => {\n      if (!this.dismounted) {\n        this.setState({\n          showAutocompleteSuggestions: false\n        });\n      }\n    }, 300);\n  };\n\n  onFocusArtist = (event) => {\n    if (!this.state.showAutocompleteArtistSuggestions) {\n      this.setState({ showAutocompleteArtistSuggestions: true });\n    }\n  };\n\n  onBlurArtist = (event) => {\n    setTimeout(() => {\n      if (!this.dismounted) {\n        this.setState({\n          showAutocompleteArtistSuggestions: false\n        });\n      }\n    }, 300);\n  };\n\n  sampleSearch = (event, search) => {\n    event.preventDefault();\n    const stateUpdate = { q: search.term, searchExample: search.id };\n\n    if (search.language || search.year) {\n      if (\n        !this.state.searchLanguages.length ||\n        !this.state.searchYears.length\n      ) {\n        this.loadSearchAggregates();\n      }\n    }\n\n    if (search.language) {\n      stateUpdate.searchLanguage = search.language;\n      stateUpdate.advancedSearch = true;\n    } else if (this.state.searchLanguage) {\n      stateUpdate.searchLanguage = \"\";\n    }\n\n    if (search.year) {\n      stateUpdate.searchYear = search.year;\n      stateUpdate.advancedSearch = true;\n    } else if (this.state.searchYear) {\n      stateUpdate.searchYear = \"\";\n    }\n\n    if (search.artist) {\n      stateUpdate.artistName = search.artist;\n      stateUpdate.advancedSearch = true;\n    } else if (this.state.artistName) {\n      stateUpdate.artistName = \"\";\n    }\n\n    this.setState(stateUpdate, () => {\n      this.submitSearch();\n    });\n  };\n\n  onSubmit = (event) => {\n    event.preventDefault();\n    this.submitSearch();\n  };\n\n  submitSearch() {\n    let q = this.state.q.trim();\n    // let language = this.languageRef.current && this.languageRef.current.value;\n    // if (!language && this.state.searchLanguage) {\n    //   language = this.state.searchLanguage;\n    // }\n    const language = this.state.searchLanguage;\n    const year = this.state.searchYear;\n\n    let artistName =\n      this.artistRef.current && this.artistRef.current.value.trim();\n    if (!artistName && this.state.artistName) {\n      if (!this.state.advancedSearch) {\n        artistName = this.state.artistName;\n      }\n    } else if (artistName && !this.state.artistName) {\n      this.setState({ artistName });\n    }\n    if (q) {\n      let newURL = `/q/${encodeURIComponent(q)}`;\n      // only include the language= if it's set and not 'en'\n      if (language && language !== \"en\") {\n        newURL += `?language=${language}`;\n      }\n      if (year) {\n        newURL += newURL.includes(\"?\") ? \"&\" : \"?\";\n        newURL += `year=${year}`;\n      }\n      if (artistName) {\n        newURL += newURL.includes(\"?\") ? \"&\" : \"?\";\n        newURL += `artist=${encodeURIComponent(artistName)}`;\n      }\n      let currentURL = this.props.location.pathname;\n      if (this.props.location.search) {\n        currentURL += this.props.location.search;\n      }\n      if (newURL === currentURL) {\n        // get out of here\n        return;\n      }\n      this.props.history.push(newURL);\n      this.startSearch(q, language, year, artistName);\n\n      // XXX this.searchRef.current.blur()????\n      document.querySelector('input[type=\"search\"]').blur();\n      if (this.state.autocompleteSuggestions) {\n        this.setState({\n          autocompleteSuggestions: null,\n          autocompleteSearchSuggestions: null,\n          autocompleteHighlight: -1,\n          showAutocompleteSuggestions: true\n        });\n      }\n      if (this.state.autocompleteArtistSuggestions) {\n        this.setState({\n          autocompleteArtistSuggestions: null,\n          autocompleteArtistHighlight: -1\n        });\n      }\n    }\n  }\n\n  startSearch(\n    q,\n    language = null,\n    year = null,\n    artist = null,\n\n    page = 0,\n    searchExample = null\n  ) {\n    SetHTMLHeaders({\n      title: \"Searching... - Song Search\"\n    });\n    // The state change is quite differnet depend on it being\n    // the first page or a subsequent page.\n    if (page) {\n      this.setState(\n        {\n          searching: true,\n          searchError: null\n        },\n        () => {\n          this.sendSearch(q, language, year, artist, page, searchExample);\n        }\n      );\n    } else {\n      this.setState(\n        {\n          searching: true,\n          searchError: null,\n          // suggestions: null,\n          results: null,\n          by_name: null,\n          showExamples: false,\n          showRecentComments: false,\n          parentSearch: null\n        },\n        () => {\n          this.sendSearch(q, language, year, artist, page, searchExample);\n          this.slowSearchTimer = window.setTimeout(() => {\n            if (!this.state.searchError && !this.state.results) {\n              this.setState({ slowSearch: true });\n            }\n          }, 5 * 1000);\n        }\n      );\n    }\n  }\n\n  sendSearch(\n    q,\n    language = null,\n    year = null,\n    artist = null,\n    page = 0,\n    searchExample = null\n  ) {\n    let url = `/api/search?q=${encodeURIComponent(q)}`;\n    if (language) {\n      url += `&language=${language}`;\n    }\n    if (year) {\n      url += `&year=${year}`;\n    }\n    if (artist) {\n      url += `&artist=${encodeURIComponent(artist)}`;\n    }\n    if (page) {\n      url += `&page=${page + 1}`;\n      url += `&searched=${this.searched}`;\n    } else if (this.state.originalQ) {\n      url += `&original=${this.searched}`;\n    }\n    if (this.state.desperateSearch && !this.state.originalQ) {\n      url += `&desperate=true`;\n    }\n    if (searchExample) {\n      url += `&example=${searchExample}`;\n    }\n    return cachedFetch(url).then((r) => {\n      if (r.status === 200) {\n        return r.json().then((results) => {\n          if (this.slowSearchTimer) {\n            window.clearTimeout(this.slowSearchTimer);\n          }\n          if (this.dismounted) {\n            return;\n          }\n          if (!results) {\n            return;\n          }\n          if (results.error) {\n            this.setState({\n              searchError: results.error,\n              searching: false,\n              slowSearch: null\n            });\n            SetHTMLHeaders({\n              title: \"Sorry, search error\"\n            });\n            return;\n          } else if (this.state.searchError) {\n            this.setState({ searchError: null });\n          }\n\n          SetHTMLHeaders({\n            title: `${q} - Song Search`\n          });\n\n          // This is the first time sendSearch is called for\n          // this q (and this offset).\n          // Decide whether to get suggestions searches...\n          // console.log(\n          //   'Results:', results.results.length,\n          //   'Total:', results.total,\n          //   'Limit:', results.limit,\n          // )\n\n          // set this so that the onExpandClick can use it\n          if (!page) {\n            this.searched = results.searched;\n          }\n          // set in localStorage for the sake \"Open in a new tab\"\n          try {\n            localStorage.setItem(\n              \"searched\",\n              `${results.searched},${new Date().getTime()}`\n            );\n          } catch (ex) {\n            console.warn(\"'localStorage.setItem(\\\"searched\\\")' didn't work\");\n          }\n\n          let allResults;\n          if (page) {\n            allResults = [];\n            this.state.results.forEach((r) => allResults.push(r));\n            results.results.forEach((r) => allResults.push(r));\n          } else {\n            allResults = results.results;\n          }\n          this.setState(\n            {\n              desperateSearch: results.desperate,\n              missing: results.missing,\n              popularityFactor: results.popularity_factor,\n              parentSearch: results.searched,\n              searching: false,\n              results: allResults,\n              keyPhrases: null,\n              by_name: results.by_name,\n              by_name_total: results.by_name_total,\n              by_name_limit: results.by_name_limit,\n              total: results.total,\n              searchError: null,\n              slowSearch: null\n            },\n            () => {\n              if (\n                (this.state.desperateSearch || !this.state.total) &&\n                this.state.q.length > 10\n              ) {\n                this._fetchSearchAlternatives();\n              }\n            }\n          );\n        });\n      } else {\n        r.text().then((text) => {\n          SetHTMLHeaders({\n            title: \"Search Error\"\n          });\n          this.setState({\n            searching: false,\n            searchError: { status: r.status, text: text },\n            slowSearch: false\n          });\n        });\n      }\n    });\n  }\n\n  _fetchSearchAlternatives = () => {\n    const url = `/api/search/alternatives?searched=${this.state.parentSearch}`;\n    return cachedFetch(url).then((r) => {\n      if (r.status === 200) {\n        return r.json().then((results) => {\n          if (this.dismounted) {\n            return;\n          }\n          if (!results) {\n            return;\n          }\n          this.setState({ keyPhrases: results.key_phrases });\n        });\n      }\n    });\n  };\n\n  onChangeSearch = (event) => {\n    const q = event.target.value;\n    this.setState({ q }, () => {\n      if (this.state.desperateSearch) {\n        this.setState({ desperateSearch: false });\n      }\n      if (this.state.originalQ) {\n        this.setState({ originalQ: \"\" });\n      }\n\n      let length = q.length;\n      if (length > this.searchRef.current.maxLength - 10) {\n        this.setState({\n          searchMaxLength: [length, this.searchRef.current.maxLength],\n          showAutocompleteSuggestions: false\n        });\n      } else if (this.state.searchMaxLength) {\n        this.setState({\n          searchMaxLength: null,\n          showAutocompleteSuggestions: true\n        });\n      }\n\n      if (this.state.q.trim()) {\n        if (this.autocompleteWaitingFor) {\n          if (q.trim() === this.autocompleteWaitingFor) {\n            return;\n          }\n        }\n        if ((length < 4 || q.endsWith(\" \")) && length < 24) {\n          // the impatient one\n          this.fetchAutocompleteSuggestionsThrottled(\n            q,\n            this.state.searchLanguage\n          );\n        } else if (length > 24) {\n          // When what you've typed is really long use the really\n          // delayed throttle.\n          this.fetchAutocompleteSuggestionsDebouncedLong(\n            q,\n            this.state.searchLanguage\n          );\n        } else if (length) {\n          this.fetchAutocompleteSuggestionsDebounced(\n            q,\n            this.state.searchLanguage\n          );\n        } else {\n          this.setState({\n            autocompleteSuggestions: null,\n            autocompleteSearchSuggestions: null,\n            autocompleteHighlight: -1,\n            showAutocompleteSuggestions: true\n          });\n        }\n      } else {\n        this.setState({\n          autocompleteSuggestions: null,\n          autocompleteSearchSuggestions: null,\n          autocompleteHighlight: -1,\n          showAutocompleteSuggestions: true\n        });\n      }\n    });\n  };\n\n  fetchAutocompleteSuggestions(q, language = null) {\n    let cacheHash = q.trim();\n    let url = `/api/search/autocomplete?q=${encodeURIComponent(q)}`;\n    if (language) {\n      cacheHash += language.trim();\n      url += `&language=${language}`;\n    }\n    const cached = this._autocompleteSuggestionsCache[cacheHash];\n    if (cached) {\n      return Promise.resolve(cached).then((results) => {\n        this.setState({\n          autocompleteSuggestions: results.matches,\n          autocompleteSearchSuggestions: results.search_suggestions,\n          autocompleteHighlight: -1,\n          missing: results.missing\n        });\n      });\n    }\n\n    // Store a \"global\" of what the latest q was.\n    this.autocompleteWaitingFor = q;\n    return fetch(url).then((r) => {\n      if (r.status === 200) {\n        return r.json().then((results) => {\n          if (this.dismounted) {\n            return;\n          }\n          if (q.startsWith(this.autocompleteWaitingFor)) {\n            this._autocompleteSuggestionsCache[cacheHash] = results;\n            if (this.state.q) {\n              this.setState({\n                autocompleteSuggestions: results.matches,\n                autocompleteSearchSuggestions: results.search_suggestions,\n                autocompleteHighlight: -1\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n\n  fetchAutocompleteArtistSuggestions(q) {\n    const url = `/api/search/autocomplete?q=${q}&artist=true`;\n    return fetch(url)\n      .then((r) => {\n        if (r.status === 200) {\n          return r.json();\n        }\n      })\n      .then((results) => {\n        if (this.dismounted) {\n          return;\n        }\n        if (results) {\n          this.setState({\n            autocompleteArtistSuggestions: results.matches,\n            autocompleteArtistHighlight: -1\n          });\n        }\n      });\n  }\n\n  onKeyDownSearch = (event) => {\n    let suggestions = this.state.autocompleteSuggestions;\n    if (suggestions) {\n      let highlight = this.state.autocompleteHighlight;\n      if (event.key === \"Tab\") {\n        event.preventDefault();\n        let suggestion =\n          highlight > -1 ? suggestions[highlight] : suggestions[0];\n        if (!suggestion._url) {\n          this.setState({\n            q: suggestion.text + \" \"\n          });\n          this.fetchAutocompleteSuggestions(\n            suggestion.text,\n            this.state.searchLanguage\n          );\n        }\n      } else if (event.key === \"ArrowDown\" && highlight < suggestions.length) {\n        event.preventDefault();\n        this.setState({ autocompleteHighlight: highlight + 1 });\n      } else if (event.key === \"ArrowUp\" && highlight > -1) {\n        this.setState({ autocompleteHighlight: highlight - 1 });\n      } else if (event.key === \"Enter\") {\n        if (highlight > -1) {\n          event.preventDefault();\n          const searchSuggestions = this.state.autocompleteSearchSuggestions;\n          if (highlight === 0 && searchSuggestions && searchSuggestions.total) {\n            this.submitSearch();\n            return;\n          }\n          highlight--;\n          if (!suggestions[highlight]) {\n            // Not sure how this can happen\n            console.warn(\"SUGGESTIONS\", suggestions);\n            console.warn(\"HIGHLIGHT\", highlight);\n            // But bail!\n            this.setState(\n              {\n                autocompleteSuggestions: null,\n                autocompleteHighlight: -1\n              },\n              () => this.submitSearch()\n            );\n            return;\n          }\n          if (suggestions[highlight]._url) {\n            this.setState({\n              redirectTo: {\n                pathname: suggestions[highlight]._url\n              }\n            });\n          } else {\n            this.setState(\n              {\n                q: suggestions[highlight].text,\n                autocompleteSuggestions: null,\n                autocompleteHighlight: -1\n              },\n              () => this.submitSearch()\n            );\n          }\n        }\n      }\n    }\n  };\n\n  onKeyDownArtistSearch = (event) => {\n    let suggestions = this.state.autocompleteArtistSuggestions;\n    if (suggestions) {\n      let highlight = this.state.autocompleteArtistHighlight;\n      if (event.key === \"Tab\") {\n        event.preventDefault();\n        if (highlight > -1) {\n          this.setState({\n            artistName: suggestions[highlight].text\n          });\n          this.fetchAutocompleteArtistSuggestions(suggestions[highlight].text);\n        } else if (suggestions.length) {\n          this.setState({\n            artistName: suggestions[0].text\n          });\n          this.fetchAutocompleteArtistSuggestions(suggestions[0].text);\n        }\n      } else if (event.key === \"ArrowDown\" && highlight < suggestions.length) {\n        event.preventDefault();\n        this.setState({ autocompleteArtistHighlight: highlight + 1 });\n      } else if (event.key === \"ArrowUp\" && highlight > -1) {\n        this.setState({ autocompleteArtistHighlight: highlight - 1 });\n      } else if (event.key === \"Enter\") {\n        if (highlight > -1) {\n          event.preventDefault();\n          this.setState({\n            artistName: suggestions[highlight].text,\n            autocompleteArtistSuggestions: null,\n            autocompleteArtistHighlight: -1\n          });\n        }\n      }\n    }\n  };\n\n  toggleShareSearch = (event) => {\n    event.preventDefault();\n    this.setState({\n      shareSearch: !this.state.shareSearch,\n      advancedSearch: false\n    });\n  };\n\n  toggleAdvancedSearch = (event) => {\n    event.preventDefault();\n    if (!this.state.advancedSearch) {\n      // it was not enabled before\n      const withCountsLanguages = this.state.searchLanguages.filter(\n        (x) => x.count\n      );\n      const withCountsYears = this.state.searchYears.filter((x) => x.count);\n      if (!withCountsLanguages.length || !withCountsYears.length) {\n        this.loadSearchAggregates();\n      }\n    }\n    this.setState({\n      advancedSearch: !this.state.advancedSearch,\n      shareSearch: false\n    });\n  };\n\n  // loadSearchLanguages() {\n  //   return fetch(\"/api/search/languages\").then(r => {\n  //     if (r.status === 200) {\n  //       r.json().then(r => {\n  //         this.setState({ searchLanguages: r.languages });\n  //       });\n  //     }\n  //   });\n  // }\n  loadSearchAggregates() {\n    return fetch(\"/api/search/aggregates\").then((r) => {\n      if (r.status === 200) {\n        r.json().then((r) => {\n          this.setState({ searchLanguages: r.languages, searchYears: r.years });\n        });\n      }\n    });\n  }\n\n  onChangeLanguage = (event) => {\n    event.preventDefault();\n    const searchLanguage = event.target.value;\n    this.setState({ searchLanguage });\n  };\n\n  onChangeYear = (event) => {\n    event.preventDefault();\n    const searchYear = event.target.value;\n    this.setState({ searchYear });\n  };\n\n  onChangeArtistName = (event) => {\n    event.preventDefault();\n    const artistName = event.target.value;\n    this.setState({ artistName }, () => {\n      if (artistName.length) {\n        this.fetchAutocompleteArtistSuggestions(this.state.artistName.trim());\n      } else {\n        this.setState({\n          autocompleteArtistSuggestions: null,\n          autocompleteArtistHighlight: -1\n        });\n      }\n    });\n  };\n\n  onSelectSuggestion = (event, suggestion) => {\n    event.preventDefault();\n    if (suggestion._url) {\n      return this.setState({ redirectTo: suggestion._url });\n    }\n    let newText = suggestion.text;\n    if (suggestion.append) {\n      newText = appendSuggestion(this.state.q, newText);\n    }\n    this.setState(\n      {\n        q: newText,\n        autocompleteSuggestions: null,\n        autocompleteHighlight: -1\n      },\n      () => {\n        this.submitSearch();\n      }\n    );\n  };\n\n  onSelectSuggestionAll = (event) => {\n    event.preventDefault();\n    this.submitSearch();\n  };\n\n  onSelectArtistSuggestion = (event, suggestion) => {\n    event.preventDefault();\n    this.setState(\n      {\n        artistName: suggestion.text,\n        autocompleteArtistSuggestions: null,\n        autocompleteArtistHighlight: -1\n      },\n      () => {\n        this.submitSearch();\n      }\n    );\n  };\n\n  onLoadMore = (event) => {\n    event.preventDefault();\n    this.setState(\n      {\n        resultsPageIndex: this.state.resultsPageIndex + 1\n      },\n      () => {\n        this.startSearch(\n          this.state.q,\n          this.state.searchLanguage,\n          this.state.searchYear,\n          this.state.artistName,\n          this.state.resultsPageIndex,\n          this.state.searchExample\n        );\n      }\n    );\n  };\n\n  submitPhrase = (event, keyPhrase) => {\n    event.preventDefault();\n    const stateUpdate = { q: keyPhrase.phrase, originalQ: this.state.q };\n    if (keyPhrase.year) {\n      stateUpdate.searchYear = keyPhrase.year;\n    }\n    if (keyPhrase.language) {\n      stateUpdate.searchLanguage = keyPhrase.language;\n    }\n    this.setState(stateUpdate, () => {\n      this.submitSearch();\n    });\n  };\n\n  reloadSearch = (event) => {\n    event.preventDefault();\n    window.location.reload();\n  };\n\n  loadMoreByName = (event) => {\n    const previousByNameLimit = this.state.by_name_limit;\n    this.setState(\n      {\n        by_name_total: 0,\n        by_name_limit: 0\n      },\n      () => {\n        const url = `/api/search?q=${encodeURIComponent(\n          this.state.q\n        )}&by_name=${previousByNameLimit}`;\n        fetch(url).then((r) => {\n          if (this.dismounted) {\n            return;\n          }\n          if (r.status === 200) {\n            r.json().then((results) => {\n              if (results) {\n                this.setState({\n                  by_name: results.by_name,\n                  by_name_total: results.by_name_total,\n                  by_name_limit: results.by_name_limit\n                });\n              }\n            });\n          }\n        });\n      }\n    );\n  };\n\n  displayYears = (year) => {\n    let yearEnd = year + 9;\n    const currentYear = new Date().getFullYear();\n    if (yearEnd > currentYear) {\n      yearEnd = currentYear;\n    }\n    return `${year}${yearEnd}`;\n  };\n\n  render() {\n    const { redirectTo, searchYear } = this.state;\n    if (redirectTo) {\n      return <Redirect to={redirectTo} push={true} />;\n    }\n    let results = null;\n    let pagination = null;\n    if (this.state.results) {\n      let rows = this.state.results;\n      if (this.state.onlyResults) {\n        let onlyIds = this.state.onlyResults.map((r) => r.id);\n        rows = rows.filter((row) => onlyIds.includes(row.id));\n      }\n      results = (\n        <Results\n          results={rows}\n          searched={this.searched}\n          popularityFactor={this.state.popularityFactor}\n          showYear={Boolean(searchYear)}\n        />\n      );\n      if (this.state.results.length < this.state.total) {\n        pagination = (\n          <Pagination\n            location={this.props.location}\n            page={this.state.resultsPageIndex}\n            onLoadMore={this.onLoadMore}\n          />\n        );\n      }\n    }\n\n    let byName = null;\n    if (this.state.by_name && this.state.by_name.length) {\n      byName = (\n        <SongsByName\n          results={this.state.by_name}\n          total={this.state.by_name_total}\n          limit={this.state.by_name_limit}\n          loadMoreByName={this.loadMoreByName}\n        />\n      );\n    }\n\n    let searchToggles = (\n      <span className=\"help-block toggles\">\n        {this.state.results && this.state.results.length ? (\n          <button\n            type=\"button\"\n            className={\n              this.state.shareSearch\n                ? \"btn btn-default btn-sm active\"\n                : \"btn btn-default btn-sm\"\n            }\n            onClick={this.toggleShareSearch}\n          >\n            {this.state.shareSearch\n              ? \"Hide share search\"\n              : \"Share search results\"}\n          </button>\n        ) : null}\n        <button\n          type=\"button\"\n          className={\n            this.state.advancedSearch\n              ? \"btn btn-default btn-sm active\"\n              : \"btn btn-default btn-sm\"\n          }\n          onClick={this.toggleAdvancedSearch}\n        >\n          {this.state.advancedSearch ? \"Hide search options\" : \"Search options\"}\n        </button>\n      </span>\n    );\n    let advancedSearchStatus = null;\n    if (!this.state.advancedSearch) {\n      let parts = [];\n      // if you currently don't have the advanced search options open,\n      // show what's currently selected.\n      if (this.state.searchLanguage && this.state.searchLanguage !== \"en\") {\n        const language = this.state.searchLanguages.filter((e) => {\n          return e.code === this.state.searchLanguage;\n        })[0].language;\n        parts.push(`Language: ${language}`);\n      }\n\n      if (this.state.searchYear) {\n        parts.push(\n          `Years: ${this.displayYears(parseInt(this.state.searchYear))}`\n        );\n      }\n\n      if (this.state.artistName) {\n        parts.push(`Artist: ${this.state.artistName}`);\n      }\n      if (parts.length) {\n        advancedSearchStatus = (\n          <span className=\"help-block advanced-search-status\">\n            <b>Search options:</b> {parts.join(\", \")}\n          </span>\n        );\n      }\n    }\n\n    let advancedInput = null;\n    if (this.state.advancedSearch) {\n      advancedInput = (\n        <div className=\"advanced\">\n          <div className=\"form-group\" style={{ position: \"relative\" }}>\n            <input\n              type=\"search\"\n              ref={this.artistRef}\n              value={this.state.artistName}\n              className=\"form-control input-lg\"\n              maxLength={100}\n              onFocus={this.onFocusArtist}\n              onBlur={this.onBlurArtist}\n              onChange={this.onChangeArtistName}\n              onKeyDown={this.onKeyDownArtistSearch}\n              aria-label=\"Artist search\"\n              placeholder=\"Artist or band name\"\n            />\n            {this.state.autocompleteArtistSuggestions &&\n            this.state.showAutocompleteArtistSuggestions ? (\n              <ShowAutocompleteArtistSuggestions\n                onSelectSuggestion={this.onSelectArtistSuggestion}\n                highlight={this.state.autocompleteArtistHighlight}\n                suggestions={this.state.autocompleteArtistSuggestions}\n              />\n            ) : null}\n          </div>\n          <div className=\"form-group\">\n            <select\n              ref={this.languageRef}\n              onChange={this.onChangeLanguage}\n              value={this.state.searchLanguage}\n              className=\"form-control\"\n            >\n              <option value=\"\">Any language</option>\n              {this.state.searchLanguages.map((each) => {\n                let text = each.language;\n                if (each.count === 1) {\n                  text += \" (1 song)\";\n                } else if (each.count) {\n                  text += ` (${each.count.toLocaleString()} songs)`;\n                }\n                return (\n                  <option key={each.code} value={each.code}>\n                    {text}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n          <div className=\"form-group\">\n            <select\n              // ref={this.yearRef}\n              onChange={this.onChangeYear}\n              value={this.state.searchYear}\n              className=\"form-control\"\n            >\n              <option value=\"\">Any year</option>\n              {this.state.searchYears.map((each) => {\n                let text = this.displayYears(each.year);\n                if (each.count === 1) {\n                  text += \" (1 song)\";\n                } else if (each.count) {\n                  text += ` (${each.count.toLocaleString()} songs)`;\n                }\n                return (\n                  <option key={text} value={each.year}>\n                    {text}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n          <div className=\"form-group text-right\">\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Search Now\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    let keyPhrases = null;\n    if (\n      this.state.results &&\n      // !this.state.results.length &&\n      this.state.keyPhrases &&\n      this.state.keyPhrases.length\n    ) {\n      keyPhrases = (\n        <ShowKeyPhrases\n          nothingFound={!this.state.results.length}\n          phrases={this.state.keyPhrases}\n          submitPhrase={this.submitPhrase}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <form onSubmit={this.onSubmit} action=\"/api/search/redirect\">\n          <div className=\"form-group\" style={{ position: \"relative\" }}>\n            <div className=\"input-group input-group-lg\">\n              <input\n                type=\"search\"\n                ref={this.searchRef}\n                name=\"q\"\n                autoComplete=\"off\"\n                value={this.state.q}\n                onFocus={this.onFocusSearch}\n                onBlur={this.onBlurSearch}\n                onChange={this.onChangeSearch}\n                onKeyDown={this.onKeyDownSearch}\n                className=\"form-control\"\n                maxLength={150}\n                aria-label=\"Lyrics search\"\n                placeholder={this.state.placeholder}\n              />\n              <span className=\"input-group-btn\">\n                <button\n                  className=\"btn btn-default btn-lg\"\n                  type=\"submit\"\n                  title=\"Click to search\"\n                >\n                  Search\n                </button>\n              </span>\n            </div>\n            {this.state.searchMaxLength ? (\n              <ShowMaxlengthWarning\n                length={this.state.searchMaxLength[0]}\n                maxLength={this.state.searchMaxLength[1]}\n              />\n            ) : null}\n            {this.state.desperateSearch &&\n            this.state.results &&\n            this.state.results.length &&\n            !(\n              this.state.showAutocompleteSuggestions &&\n              this.state.autocompleteSuggestions\n            ) ? (\n              <ShowDesperateSearchWarning />\n            ) : null}\n            {!this.state.desperateSearch &&\n            this.state.missing &&\n            this.state.results &&\n            this.state.results.length &&\n            !(\n              this.state.showAutocompleteSuggestions &&\n              this.state.autocompleteSuggestions\n            ) ? (\n              <ShowMissingSearchWarning missing={this.state.missing} />\n            ) : null}\n            {this.state.autocompleteSuggestions &&\n            this.state.showAutocompleteSuggestions ? (\n              <ShowAutocompleteSuggestions\n                q={this.state.q}\n                onSelectSuggestion={this.onSelectSuggestion}\n                onSelectSuggestionAll={this.onSelectSuggestionAll}\n                highlight={this.state.autocompleteHighlight}\n                suggestions={this.state.autocompleteSuggestions}\n                searchSuggestions={this.state.autocompleteSearchSuggestions}\n              />\n            ) : null}\n          </div>\n          <ShowResultCount\n            results={this.state.results}\n            total={this.state.total}\n            byName={this.state.by_name}\n            onlyResults={this.state.onlyResults}\n          />\n\n          {searchToggles}\n          {advancedSearchStatus}\n          {this.state.shareSearch ? (\n            <ShareInput searched={this.searched} />\n          ) : null}\n          {advancedInput}\n        </form>\n \n      <div id=\"waldo-tag-11815\">\n          <script>\n            {`googletag.cmd.push(function() {\n              googletag.display = \"waldo-tag-11815\";\n            })`};\n          </script>\n        </div>\n\n        \n        {/* <CountdownTimer targetDate={dateTimeAfterThreeDays} /> */}\n        \n\n        {this.state.searchError ? (\n          <SearchError error={this.state.searchError} />\n        ) : null}\n        {this.state.showExamples ? (\n          <ShowExamples\n            sampleSearch={this.sampleSearch}\n            examples={this.state.searchExamples}\n          />\n        ) : null}\n        {this.state.showRecentComments && this.state.recentComments ? (\n          <ShowRecentCommentsWrapper\n            comments={this.state.recentComments.comments}\n          />\n        ) : null}\n        {/* {suggestions} */}\n        {byName}\n        {keyPhrases}\n        {results}\n        {this.state.searching ? <Loading text=\"Searching...\" /> : null}\n        {pagination}\n        {this.state.slowSearch ? (\n          <SlowSearch reloadSearch={this.reloadSearch} />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default Home;\n\nclass ShowRecentCommentsWrapper extends React.PureComponent {\n  render() {\n    const { comments } = this.props;\n    return (\n      <div className=\"recent-comments\" style={{ marginTop: 50 }}>\n        <h4>\n          Recent Comments (<Link to=\"/comments\">All</Link>)\n        </h4>\n        <ShowRecentComments comments={comments} isRoot={true} />\n        <div className=\"load-more\">\n          <Link to=\"/comments\">More recent comments</Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ShowResultCount = React.memo(\n  ({ results, total, onlyResults, byName }) => {\n    if (!results) {\n      return null;\n    }\n    let countResults = null;\n    if (results) {\n      const byNameCount = byName ? byName.length : 0;\n      if (onlyResults) {\n        countResults = onlyResults.length + byNameCount;\n      } else {\n        countResults = results.length + byNameCount;\n      }\n    }\n    return (\n      <p className=\"result-metadata text-right\">\n        <b>\n          {total >= 10000 ? \"More than \" : \"\"}\n          {total.toLocaleString()} {total === 1 ? \"song found\" : \"songs found\"}\n        </b>{\" \"}\n        {countResults && countResults < total\n          ? `(showing ${countResults})`\n          : null}\n      </p>\n    );\n  }\n);\n\nclass ShareInput extends React.PureComponent {\n  state = {\n    copied: false,\n    failed: false,\n    hasFocused: false\n  };\n\n  absurlRef = React.createRef();\n\n  render() {\n    const absoluteUrl = window.location.href;\n    return (\n      <div className=\"form-group\" style={{ marginTop: 30 }}>\n        <div className=\"input-group\">\n          <label className=\"sr-only\">URL:</label>\n          <input\n            ref={this.absurlRef}\n            type=\"text\"\n            className=\"form-control\"\n            readOnly\n            value={absoluteUrl}\n            onFocus={() => {\n              if (!this.state.hasFocused) {\n                this.absurlRef.current.select();\n                this.setState({ hasFocused: true });\n              }\n            }}\n          />\n          <span className=\"input-group-btn\">\n            <button\n              type=\"button\"\n              className={\n                this.state.copied ? \"btn btn-success\" : \"btn btn-primary\"\n              }\n              title=\"Click to copy to clipboard\"\n              onClick={(event) => {\n                event.preventDefault();\n                this.absurlRef.current.select();\n                if (copy(absoluteUrl)) {\n                  this.setState({ copied: true, failed: false }, () => {\n                    if (this.props.searched && !this.copied) {\n                      this.copied = this.props.searched;\n                      fetch(`/api/search/copied/${this.props.searched}`, {\n                        method: \"POST\"\n                      });\n                    }\n                  });\n                } else {\n                  this.setState({ copied: false, failed: true });\n                }\n              }}\n            >\n              {this.state.copied ? \"Copied to clipboard\" : \"Copy to clipboard\"}\n            </button>\n          </span>\n        </div>\n        {this.state.copied ? (\n          <p>\n            The URL to this search has now been copied to your clipboard so you\n            can paste it anywhere. Thanks!\n          </p>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nconst ShowKeyPhrases = React.memo(({ phrases, submitPhrase, nothingFound }) => {\n  let subTitle = null;\n  if (nothingFound) {\n    if (phrases.length === 1) {\n      subTitle = <h4>But, try this...</h4>;\n    } else {\n      subTitle = <h4>But, try these...</h4>;\n    }\n  }\n  return (\n    <div className=\"key-phrases\">\n      {nothingFound ? (\n        <h3>Nothing found</h3>\n      ) : (\n        <h3>Fuzzy results. Try breaking it up...</h3>\n      )}\n      {subTitle}\n      <table className=\"table suggestions table-condensed\">\n        <tbody>\n          {phrases.map((phrase) => {\n            let url = `/q/${phrase.phrase}`;\n            if (phrase.year) {\n              url += `?year=${phrase.year}`;\n            }\n            return (\n              <tr key={phrase.phrase}>\n                <td>\n                  <a href={url} onClick={(e) => submitPhrase(e, phrase)}>\n                    {phrase.diff_html ? (\n                      <span\n                        dangerouslySetInnerHTML={{ __html: phrase.diff_html }}\n                      />\n                    ) : (\n                      phrase.phrase\n                    )}\n                  </a>\n                </td>\n                <td>\n                  <b>{phrase.total}</b> {phrase.total === 1 ? \"song\" : \"songs\"}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n});\n\nconst ShowAutocompleteSuggestions = React.memo(\n  ({\n    q,\n    highlight,\n    suggestions,\n    searchSuggestions,\n    onSelectSuggestion,\n    onSelectSuggestionAll\n  }) => {\n    if (!suggestions.length) {\n      return null;\n    }\n    return (\n      <div className=\"autocomplete\">\n        <ul>\n          {searchSuggestions && q && searchSuggestions.total ? (\n            <li\n              onClick={onSelectSuggestionAll}\n              className={\n                highlight === 0\n                  ? \"active search-suggestion\"\n                  : \"search-suggestion\"\n              }\n            >\n              {searchSuggestions.capped ? (\n                <a\n                  style={{ float: \"right\" }}\n                  href={\"/q/\" + encodeURIComponent(searchSuggestions.term)}\n                >\n                  {searchSuggestions.total.toLocaleString()}{\" \"}\n                  {searchSuggestions.desperate\n                    ? \"approximate matches\"\n                    : \"good matches\"}\n                </a>\n              ) : null}\n              <a href={\"/q/\" + encodeURIComponent(searchSuggestions.term)}>\n                Search for <i>{q}</i>\n              </a>\n            </li>\n          ) : null}\n\n          {suggestions.map((s, index) => {\n            const className = index + 1 === highlight ? \"active\" : \"\";\n            return (\n              <li\n                key={s.id ? s.id : s.text}\n                className={className}\n                onClick={(e) => onSelectSuggestion(e, s)}\n              >\n                {s.id ? (\n                  <ShowAutocompleteSuggestionSong song={s} />\n                ) : (\n                  <ShowAutocompleteSuggestion\n                    text={s.text}\n                    html={s.html}\n                    found={s.found}\n                  />\n                )}\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n);\n\nconst ShowAutocompleteSuggestion = React.memo(({ found, html }) => {\n  if (found) {\n    return (\n      <p className=\"search\">\n        <small>{found}</small>\n        <span dangerouslySetInnerHTML={{ __html: html }} />\n      </p>\n    );\n  } else {\n    return <p className=\"search\" dangerouslySetInnerHTML={{ __html: html }} />;\n  }\n});\n\nconst ShowAutocompleteSuggestionSong = React.memo(({ song }) => {\n  let imageUrl = placeholderImage;\n  if (song.image) {\n    if (song.image.thumbnail100) {\n      imageUrl = song.image.thumbnail100;\n    } else {\n      imageUrl = song.image.url;\n    }\n  }\n  return (\n    <div className=\"media autocomplete-suggestion-song\">\n      <div className=\"media-left\">\n        <AutocompleteImage url={imageUrl} name={song.name} />\n      </div>\n      <div className=\"media-body\">\n        <h5 className=\"artist-name\">\n          <b>{song.name}</b>\n          <span className=\"by\">{\" by \"}</span>\n          {song.artist.name}\n        </h5>\n        {song.fragments.map((fragment, i) => {\n          return (\n            <p\n              key={`${song.id}:${i}`}\n              dangerouslySetInnerHTML={{ __html: fragment }}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n\nconst ShowAutocompleteArtistSuggestions = React.memo(\n  ({ highlight, suggestions, onSelectSuggestion }) => {\n    if (!suggestions.length) {\n      return null;\n    }\n    return (\n      <div className=\"autocomplete\">\n        <ul>\n          {suggestions.map((s, index) => {\n            let className = index === highlight ? \"active\" : \"\";\n            return (\n              <li\n                key={`${s.text}${index}`}\n                className={className}\n                onClick={(e) => onSelectSuggestion(e, s)}\n              >\n                <div className=\"media\">\n                  <div className=\"media-left\">\n                    <AutocompleteImage\n                      url={s.thumbnail100 || s.image || placeholderImage}\n                      name={s.text}\n                    />\n                  </div>\n                  <div className=\"media-body\">\n                    <h5\n                      className=\"artist-name\"\n                      dangerouslySetInnerHTML={{ __html: s.html }}\n                    />\n                    <span className=\"artist-metadata\">\n                      {s.songs ? s.songs : \"0\"} songs\n                    </span>\n                  </div>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n);\n\nfunction ShowMaxlengthWarning({ length, maxLength }) {\n  let className = \"help-block maxlength\";\n  if (length === maxLength) {\n    className += \" danger\";\n  }\n  return (\n    <span className={className}>\n      {length} of max {maxLength} characters!\n    </span>\n  );\n}\n\nfunction ShowDesperateSearchWarning() {\n  return (\n    <span className=\"help-block warning\">\n      <b>Note!</b> Nothing could be found with that exact search. Showing fuzzy\n      matches.\n    </span>\n  );\n}\n\nfunction ShowMissingSearchWarning({ missing }) {\n  return (\n    <span className=\"help-block warning\">\n      <b>Note!</b> Results found by discarding{\" \"}\n      <i style={{ textDecoration: \"line-through\" }}>{missing}</i>.\n    </span>\n  );\n}\n\nconst ShowExamples = React.memo(({ sampleSearch, examples }) => {\n  return (\n    <div className=\"examples\">\n      <h4>Successful searches for songs by lyrics</h4>\n      <ul>\n        {examples.map((search) => {\n          let link = \"/q/\" + encodeURIComponent(search.term);\n          link += `?example=${search.id}`;\n          if (search.artist) {\n            link += `&artist=${encodeURIComponent(search.artist)}`;\n          }\n          if (search.language) {\n            link += `&language=${encodeURIComponent(search.language)}`;\n          }\n          if (search.year) {\n            link += `&year=${search.year}`;\n          }\n          let searchMeta = null;\n          const searchMetaStrings = [];\n\n          if (search.artist) {\n            searchMetaStrings.push([\"artist\", search.artist]);\n          }\n          if (search.language) {\n            searchMetaStrings.push([\"language\", search.language_human]);\n          }\n          if (search.year) {\n            searchMetaStrings.push([\"year\", search.year]);\n          }\n          if (searchMetaStrings.length) {\n            searchMeta = (\n              <span>\n                (\n                {searchMetaStrings.map((n, i) => {\n                  return (\n                    <React.Fragment key={n[0]}>\n                      {n[0]} <b>{n[1]}</b>\n                      {i + 1 < searchMetaStrings.length ? \", \" : \"\"}\n                    </React.Fragment>\n                  );\n                })}\n                )\n              </span>\n            );\n          }\n\n          return (\n            <li key={search.id}>\n              <Link to={link} onClick={(e) => sampleSearch(e, search)}>\n                <b>{search.term}</b>\n              </Link>{\" \"}\n              {searchMeta} <i>{search.total_found} found</i>\n              <br />\n              {search.opened.map((song) => {\n                return (\n                  <span className=\"opened\" key={song.id}>\n                    clicked on{\" \"}\n                    <Link to={song._url}>\n                      <b>{song.name}</b> by <b>{song.artist.name}</b>\n                    </Link>\n                  </span>\n                );\n              })}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n});\n\nfunction SlowSearch({ reloadSearch }) {\n  return (\n    <div className=\"slow-search\">\n      <h4>Sorry, search seems to take longer than normal!</h4>\n      <p>\n        Perhaps it got stuck? <br />\n        <button\n          type=\"button\"\n          className=\"btn btn-default btn-sm\"\n          onClick={reloadSearch}\n        >\n          Reload search\n        </button>\n      </p>\n    </div>\n  );\n}\n\nfunction SearchError({ error }) {\n  return (\n    <div className=\"search-error\">\n      <h4>Sorry, an error occured</h4>\n      {error.status === 400 ? (\n        <p>\n          The query was invalid <code>{error.text}</code>\n        </p>\n      ) : (\n        <p>The server basically failed to compute the search</p>\n      )}\n      {error.status >= 500 && <p>Perhaps simply try again a little later.</p>}\n      {error.status >= 500 && (\n        <p>\n          <button\n            type=\"button\"\n            className=\"btn btn-default\"\n            onClick={(event) => {\n              window.location.reload(true);\n            }}\n          >\n            Reload to try again\n          </button>\n        </p>\n      )}\n    </div>\n  );\n}\n\nclass Results extends React.PureComponent {\n  firstLoad = true;\n  componentDidMount() {\n    if (!isServer) {\n      loadCarbonScript();\n    }\n    this.firstLoad = false;\n  }\n  componentDidUpdate(prevProps) {\n    // Is this if-statement necessary? I mean, isn't componentDidUpdate\n    // something that *only* happens with non-SSR rendering??\n    if (!isServer && prevProps.results !== this.props.results) {\n      loadCarbonScript();\n    }\n  }\n  render() {\n    const { results, searched, popularityFactor, showYear } = this.props;\n    return (\n      <div>\n        {/* This extra span exists to debug if ads are enabled or not */}\n        {!NO_ADS ? <div id=\"carbonadsouter\" /> : <span id=\"_nocardonads\" />}\n\n        <div className=\"results\">\n          {results.map((result, index) => {\n            return (\n              <Result\n                key={result.id}\n                result={result}\n                searched={searched}\n                expandedByDefault={results.length === 1}\n                firstResult={index === 0}\n                popularityFactor={popularityFactor}\n                firstLoad={this.firstLoad}\n                showYear={showYear}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Result extends React.PureComponent {\n  state = {\n    collapsed: true,\n    itunes: null,\n    amazon: null,\n    textHtml: this.props.result.text_html\n  };\n  affiliateLookupStarted = [];\n\n  componentDidMount() {\n    if (this.props.expandedByDefault) {\n      this.expand();\n    }\n  }\n\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  onExpandClick = (event) => {\n    event.preventDefault();\n    this.expand();\n  };\n\n  expand() {\n    const wasCollapsed = this.state.collapsed;\n    this.setState({ collapsed: false });\n    this.fetchTextHTML().then(() => {\n      if (wasCollapsed) {\n        if (this.props.searched) {\n          let recordURL = `/api/song/${this.props.result.id}/`;\n          recordURL += `expand/${this.props.searched}`;\n          fetch(recordURL, { method: \"POST\" })\n            .then((r) => r.json())\n            .then((result) => {\n              // nothing to do\n            });\n        }\n      }\n    });\n  }\n\n  fetchTextHTML() {\n    if (this.state.textHtml) {\n      return Promise.resolve();\n    } else {\n      const url = `/api/song/${this.props.result.id}?text_only=true`;\n      return fetch(url)\n        .then((r) => r.json())\n        .then((result) => {\n          if (this.dismounted) {\n            return;\n          }\n          this.setState({\n            textHtml: result.song.text_html\n          });\n        });\n    }\n  }\n\n  render() {\n    const { result, popularityFactor, firstResult, firstLoad, showYear } =\n      this.props;\n    let className = \"result\";\n    if (this.state.collapsed) {\n      className += \" collapsed\";\n    }\n    let songURL = result._url;\n    let image;\n\n    if (result.image) {\n      image = (\n        <SongImage\n          url={result.image.url}\n          className=\"pull-right img-thumbnail album\"\n          name={result.image.name}\n          forceLoad={firstResult || !firstLoad}\n        />\n      );\n    } else {\n      image = (\n        <SongImage\n          url={null}\n          className=\"pull-right img-thumbnail\"\n          name={result.artist.name}\n          forceLoad={firstResult || !firstLoad}\n        />\n      );\n    }\n\n    let rest = (\n      <p className=\"read-more\">\n        <Link to={songURL}>VIEW SONG</Link>{\" \"}\n        <Link to={songURL} onClick={this.onExpandClick}>\n          EXPAND SONG\n        </Link>\n      </p>\n    );\n    if (!this.state.collapsed) {\n      let searchedId = null;\n      let searched = null;\n      try {\n        searched = localStorage.getItem(\"searched\");\n      } catch (ex) {\n        console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");\n      }\n      if (searched) {\n        if (searched.includes(\",\")) {\n          // The new way\n          searchedId = parseInt(searched.split(\",\")[0], 10);\n        } else {\n          // The old way!\n          searchedId = parseInt(searched, 10);\n        }\n      }\n      rest = (\n        <div className=\"rest\">\n          <div className=\"text\">\n            <h3>Full Text</h3>\n            {this.state.textHtml ? (\n              <RenderParagraphs text={this.state.textHtml} />\n            ) : (\n              <i>Loading full text...</i>\n            )}\n            <SongComments\n              comments={null}\n              commentsCount={null}\n              song={result}\n              searchedId={searchedId}\n            />\n            <AmazonRelatedProducts song={result} />\n\n            {/* {this.state.textHtml && (\n              <YouTubeSnippetIntersectionLazy song={result} />\n            )} */}\n            <p className=\"load-more\">\n              <Link to={songURL}>GO TO SONG PAGE</Link>\n            </p>\n          </div>\n        </div>\n      );\n    }\n\n    let artistName = <b>{result.artist.name}</b>;\n    if (result.artist.fragment) {\n      artistName = (\n        <b dangerouslySetInnerHTML={{ __html: result.artist.fragment }} />\n      );\n    }\n\n    let tooltipTitle;\n    if (process.env.NODE_ENV === \"development\") {\n      let score = result.score.toFixed(4);\n      tooltipTitle = `Score ${score}`;\n      if (result.popularity) {\n        tooltipTitle += ` Popularity: ${result.popularity.toFixed(6)}`;\n      }\n    } else {\n      tooltipTitle = \"Click to view just this song\";\n    }\n\n    return (\n      <div className={className}>\n        <div className=\"head\">\n          <Link to={songURL}>{image}</Link>\n          <h2 title={tooltipTitle}>\n            <Link to={songURL}>{result.name}</Link>\n            {showYear && result.year && (\n              <span className=\"year\"> {result.year}</span>\n            )}\n            {process.env.NODE_ENV === \"development\" ? (\n              <ShowSongScore song={result} factor={popularityFactor} />\n            ) : null}\n          </h2>\n          <h3>\n            <span className=\"by\">by</span> {artistName}\n          </h3>\n\n          {result.albums.length ? <Albums albums={result.albums} /> : null}\n        </div>\n        <div className=\"fragments\">\n          {result.fragments.map((fragment, i) => {\n            return (\n              <p\n                key={`${result.id}${i}`}\n                dangerouslySetInnerHTML={{ __html: fragment }}\n              />\n            );\n          })}\n        </div>\n        {rest}\n      </div>\n    );\n  }\n}\n\nconst SongImage = React.memo(({ url, name, forceLoad, className }) => {\n  // If the song doesn't haven an image, no point messing around.\n  if (!url) {\n    return (\n      <img\n        src={placeholderImage}\n        className={className}\n        title={name}\n        alt={name}\n      />\n    );\n  }\n  return (\n    <img\n      src={url}\n      className={className}\n      title={name}\n      alt={name}\n      loading={forceLoad ? undefined : \"lazy\"}\n    />\n  );\n});\n\n// This assumes that we'll sooner or later need the lazyloadThumbnailImage image\nif (!isServer) {\n  new Image().src = lazyloadThumbnailImage;\n}\n\n// Module level \"cache\" of which image URLs have been successfully inserted\n// into the DOM at least once.\n// By knowing these, we can, on repeat URLs, avoid the whole lazy-load\n// image swapping trick.\nconst loadedOnce = new Set();\n\nfunction AutocompleteImage({ url, name }) {\n  const [src, setSrc] = useState(\n    loadedOnce.has(url) ? url : lazyloadThumbnailImage\n  );\n\n  useEffect(() => {\n    let preloadImg = null;\n    let dismounted = false;\n\n    if (src === lazyloadThumbnailImage) {\n      // We need to preload the eventually needed image.\n      preloadImg = new Image();\n\n      function cb() {\n        if (!dismounted) {\n          setSrc(url);\n        }\n        loadedOnce.add(url);\n      }\n      // This must come before .decode() otherwise Safari will\n      // raise an EncodingError.\n      preloadImg.src = url;\n      // https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-decode\n      // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decode#Browser_compatibility\n      preloadImg.decode\n        ? preloadImg.decode().then(cb, cb)\n        : (preloadImg.onload = cb);\n      // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decoding\n      preloadImg.decoding = \"sync\";\n    }\n\n    return () => {\n      if (preloadImg) {\n        // Immediately undo the preloading since we might not need this image.\n        // See https://jsfiddle.net/nw34gLgt/ for demo of this technique.\n        preloadImg.src = \"\";\n      }\n      dismounted = true;\n    };\n  }, [url, src]);\n\n  if (!url) {\n    // Don't even bother with lazy loading.\n    return (\n      <img\n        className=\"img-rounded\"\n        src={lazyloadThumbnailImage}\n        alt={name}\n        title={name}\n      />\n    );\n  }\n\n  return <img className=\"img-rounded\" src={src} alt={name} title={name} />;\n}\n\nfunction ShowSongScore({ song, factor = 20 }) {\n  const s = song.score - factor * song.popularity;\n  return (\n    <code>\n      {song.score.toFixed(3)} = {s.toFixed(3)} + {factor}\n      &times;\n      {song.popularity.toFixed(4)}\n    </code>\n  );\n}\n\nconst SongsByName = React.memo(({ results, total, limit, loadMoreByName }) => {\n  return (\n    <div className=\"by-name\">\n      <h4>Songs by name</h4>\n      <ul>\n        {results.map((s) => {\n          return (\n            <li key={s.id}>\n              <Link to={s._url}>\n                <b dangerouslySetInnerHTML={{ __html: s.fragment }} /> by{\" \"}\n                <b>{s.artist.name}</b>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n      {total > limit ? (\n        <button className=\"btn btn-default btn-sm\" onClick={loadMoreByName}>\n          {total > 20\n            ? \"Show more songs by name\"\n            : `Show all (${total}) songs by name`}\n        </button>\n      ) : null}\n    </div>\n  );\n});\n\nconst Albums = React.memo(({ albums }) => {\n  return (\n    <p className=\"albums\">\n      {albums.map((album, i) => {\n        const parts = [<b key={album.id}>{album.name}</b>];\n        if (album.year) {\n          parts.push(` (${album.year})`);\n        }\n        if (i + 1 < albums.length) {\n          parts.push(\", \");\n        }\n        return parts;\n      })}\n    </p>\n  );\n});\n\nconst Pagination = React.memo(({ location, onLoadMore }) => {\n  const currentURL = location.pathname + location.search;\n  return (\n    <div className=\"load-more\">\n      <a href={currentURL} onClick={onLoadMore}>\n        LOAD MORE RESULTS\n      </a>\n    </div>\n  );\n});\n","import React, { Component } from \"react\";\nimport { cachedFetch } from \"./Cache\";\nimport { FormattedNumber, ServerError, SetHTMLHeaders } from \"./Common\";\n\nclass About extends Component {\n  state = {\n    serverError: null,\n    totals: (this.props.totalStats && this.props.totalStats.totals) || null\n  };\n\n  componentDidMount() {\n    SetHTMLHeaders({\n      title: \"About - Song Search\"\n    });\n    if (!this.state.totals) {\n      return cachedFetch(\"/api/stats/totals-simple\").then(r => {\n        if (r.ok) {\n          return r.json().then(results => {\n            if (results) {\n              this.setState({ serverError: null, totals: results.totals });\n            }\n          });\n        } else {\n          this.setState({ serverError: r });\n        }\n      });\n    }\n  }\n\n  render() {\n    const { serverError, totals } = this.state;\n    return (\n      <div>\n        <p>\n          Made by Peter Bengtsson<br/>\n          For all inquires email <a href=\"mailto:info@songsear.ch\"> info@songsear.ch</a>\n        </p>\n        {serverError && <ServerError />}\n        {totals ? <ShowNumbers numbers={totals} /> : null}\n      </div>\n    );\n  }\n}\n\nexport default About;\n\nfunction ShowNumbers({ numbers }) {\n  return (\n    <div className=\"numbers\">\n      <p>\n        There are currently{\" \"}\n        <b>\n          <FormattedNumber value={numbers.songs} /> songs\n        </b>{\" \"}\n        to search amongst{\" \"}\n        <b>\n          <FormattedNumber value={numbers.artists} /> artists\n        </b>{\" \"}\n        in{\" \"}\n        <b>\n          <FormattedNumber value={numbers.albums} /> albums\n        </b>\n        .\n      </p>\n      <p>\n        In total{\" \"}\n        <b>\n          <FormattedNumber value={numbers.searches} /> searches\n        </b>{\" \"}\n        have been made.\n      </p>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport useSWR from \"swr\";\n\nimport { ServerError } from \"./Common\";\n\nfunction PrivacyPolicy() {\n  useEffect(() => {\n    document.title = \"Privacy Policy of Song Search\";\n  });\n  const { data, error } = useSWR(\n    `${process.env.PUBLIC_URL}/static/privacy-policy-text.html`,\n    async (url) => {\n      const r = await fetch(url);\n      if (!r.ok) {\n        if (process.env.NODE_ENV === \"development\") {\n          console.warn(`${r.status} on ${url}`);\n        }\n        throw new Error(`${r.status} on ${url}`);\n      }\n      return await r.text();\n    },\n    { revalidateOnFocus: false }\n  );\n\n  if (error) {\n    return <ServerError />;\n  }\n\n  return (\n    <div>\n      <h2>Privacy Policy</h2>\n      {data ? (\n        <div dangerouslySetInnerHTML={{ __html: data }}></div>\n      ) : (\n        <p>\n          <i>Loading privacy policy text...</i>\n        </p>\n      )}\n    </div>\n  );\n}\n\nexport default PrivacyPolicy;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Waypoint } from \"react-waypoint\";\nimport { Helmet } from \"react-helmet\";\nimport {\n  Loading,\n  SetHTMLHeaders,\n  isServer,\n  YouTubeSnippet,\n  SpotifySnippet,\n  IntersectionLazy,\n  // loadCarbonScript,\n  loadAdsenseScript,\n  loadAmplifiedScript,\n  RenderParagraphs,\n  ServerError,\n  AmazonRelatedProducts,\n} from \"./Common\";\nimport { cachedFetch } from \"./Cache\";\nimport { SongComments } from \"./Comments\";\n\nimport \"./Song.css\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nconst placeholderImage = PUBLIC_URL + \"/static/placeholder.png\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nconst NO_ADS = process.env.REACT_APP_NO_ADS === \"true\";\n\nconst AdTag = (props) => {\n  useEffect(() => {\n    if (window.cf_async === undefined) {\n      window.cf_async = false;\n    }\n    document.getElementById(\"inject_ad\");\n    let unique_part = Math.floor(Math.random() * 999999999);\n    let opts = {\n      artist: props.Artistname,\n      song: props.Songname,\n      adunit_id: 100004858,\n      div_id: \"cf_async_\" + unique_part,\n    };\n    let cf_div = document.createElement(\"div\");\n    cf_div.setAttribute(\"id\", opts.div_id);\n    document\n      .getElementById(\"inject_ad\")\n      .parentNode.setAttribute(\"id\", \"ad_\" + unique_part);\n    document.getElementById(\"ad_\" + unique_part).appendChild(cf_div);\n    let c = function () {\n      cf.showAsyncAd(opts);\n    };\n    if (typeof window.cf !== \"undefined\") c();\n    else {\n      cf_async = !0;\n      let r = document.createElement(\"script\"),\n        s = document.getElementsByTagName(\"script\")[0];\n      r.async = !0;\n      r.src = \"//srv.tunefindforfans.com/fruits/apricots.js\";\n      r.readyState\n        ? (r.onreadystatechange = function () {\n            if (\"loaded\" == r.readyState || \"complete\" == r.readyState)\n              (r.onreadystatechange = null), c();\n          })\n        : (r.onload = c);\n      s.parentNode.insertBefore(r, s);\n    }\n  }, []);\n\n  return (\n    <>\n      <div id=\"inject_ad\"></div>\n    </>\n  );\n};\n\nconst Songhead = (props) => {\n  useEffect(() => {\n    if (window.ddcf_async === undefined) {\n      window.ddcf_async = false;\n    }\n    document.getElementById(\"inject_cf_ad\");\n    let unique_part_add = Math.floor(Math.random() * 999999999);\n    let arr = {\n      artist: props.Artistname,\n      song: props.Songname,\n      adunit_id: 100005466,\n      flex: true,\n      div_id: \"cf_async_add_\" + unique_part_add,\n    };\n    let cf_add = document.createElement(\"div\");\n    cf_add.setAttribute(\"id\", arr.div_id);\n    document\n      .getElementById(\"inject_cf_ad\")\n      .parentNode.setAttribute(\"id\", \"cf_ad_\" + unique_part_add);\n    document.getElementById(\"cf_ad_\" + unique_part_add).appendChild(cf_add);\n    let c = function () {\n      cf.showAsyncAd(arr);\n    };\n    if (typeof window.cf !== \"undefined\") c();\n    else {\n      cf_async = !0;\n      let r = document.createElement(\"script\"),\n        s = document.getElementsByTagName(\"script\")[0];\n      r.async = !0;\n      r.src = \"//srv.tunefindforfans.com/fruits/apricots.js\";\n      r.readyState\n        ? (r.onreadystatechange = function () {\n            if (\"loaded\" == r.readyState || \"complete\" == r.readyState)\n              (r.onreadystatechange = null), c();\n          })\n        : (r.onload = c);\n      s.parentNode.insertBefore(r, s);\n    }\n  }, []);\n\n  return (\n    <>\n      <div id=\"inject_cf_ad\"></div>\n    </>\n  );\n};\n\nclass Song extends React.Component {\n  state = {\n    song: this.props.song || null,\n    loading: false,\n    notFound: this.props.songNotFound || false,\n    serverError: null,\n  };\n\n  componentDidMount() {\n    const { match } = this.props;\n    const id = parseInt(match.params.id, 10);\n    if (!this.state.song || this.state.song.id !== id) {\n      if (!this.props.songNotFound) {\n        this.loadSong(id);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.setState(\n        {\n          song: null,\n          loading: false,\n          notFound: false,\n          serverError: null,\n        },\n        () => {\n          try {\n            localStorage.removeItem(\"searched\");\n          } catch (ex) {\n            console.warn(\"'localStorage.removeItem(\\\"searched\\\")' didn't work\");\n          }\n\n          this.loadSong(this.props.match.params.id);\n        }\n      );\n    }\n  }\n\n  loadSong(id) {\n    SetHTMLHeaders({\n      title: \"Loading... - Song Search\",\n    });\n    if (!isServer) {\n      this.showLoadingSoon = window.setTimeout(() => {\n        if (!this.dismounted) {\n          if (\n            !this.state.serverError &&\n            !this.state.notFound &&\n            !this.state.song &&\n            !this.state.loading\n          ) {\n            this.setState({ loading: true });\n          }\n        }\n      }, 500);\n    }\n\n    let url = `/api/song/${id}`;\n    let searched = null;\n    try {\n      searched = localStorage.getItem(\"searched\");\n    } catch (ex) {\n      console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");\n    }\n    if (searched) {\n      if (searched.includes(\",\")) {\n        // It *used* to be that what was stored in localStorage.searched was just the\n        // search ID. Then in April 2019 this changed to become `ID,timestamp`.\n        // E.g. '92613,1556152340091'. So, we need to deal with handling both\n        // the new and the old.\n        const timestamp = parseInt(searched.split(\",\")[1], 10);\n        const age = (new Date().getTime() - timestamp) / 1000;\n        if (age > 3600) {\n          searched = null;\n        } else {\n          searched = searched.split(\",\")[0];\n        }\n      }\n      if (searched) {\n        url += `?searched=${encodeURIComponent(searched)}`;\n      }\n    }\n\n    return cachedFetch(url).then((r) => {\n      if (!isServer && this.showLoadingSoon) {\n        window.clearTimeout(this.showLoadingSoon);\n      }\n      if (r.status === 400) {\n        return r.json().then((result) => {\n          this.setState({ loading: false });\n          if (result.error && result.error === \"redirected\") {\n            if (isServer) {\n              this.setState({ notFound: true });\n            } else {\n              document.location.href = result.new_url;\n            }\n          } else {\n            // Some other error\n            this.setState({ serverError: true });\n          }\n        });\n      } else if (r.status === 404) {\n        this.setState({ loading: false, notFound: true });\n        SetHTMLHeaders({ title: \"Not Found\" });\n      } else if (r.status === 500) {\n        this.setState({ loading: false, serverError: true });\n        SetHTMLHeaders({ title: \"Song loading error :(\" });\n      } else {\n        return r.json().then((result) => {\n          if (result && !result.error) {\n            this.renderResult(result);\n          } else if (result && result.error) {\n            console.log(\"ERROR:\", result.error);\n          }\n          // if (searched) {\n          //   localStorage.removeItem(\"searched\");\n          // }\n          return result;\n        });\n      }\n    });\n  }\n\n  renderResult(result) {\n    // Make sure this matches server/render.js\n    let title = `${result.song.name} lyrics by ${result.song.artist.name}`;\n    if (!isServer) {\n      SetHTMLHeaders({\n        title: title,\n        image: result.song.image,\n      });\n    }\n    this.setState({\n      loading: false,\n      song: result.song,\n    });\n  }\n\n  render() {\n    const { loading, song, serverError, notFound } = this.state;\n\n    return (\n      <div>\n        {loading && <Loading text=\"Loading...\" />}\n        {song && <Result song={song} />}\n\n        {serverError && !song && <ServerError />}\n        {notFound && <NotFound />}\n      </div>\n    );\n  }\n}\n\nfunction Result({ song }) {\n  // useEffect(() => {\n  //   // loadCarbonScript();\n  // }, []);\n\n  let searchedId;\n\n  if (!isServer) {\n    let searched = null;\n    try {\n      searched = localStorage.getItem(\"searched\");\n    } catch (ex) {\n      console.warn(\"'localStorage.getItem(\\\"searched\\\")' didn't work\");\n    }\n\n    if (searched) {\n      if (searched.includes(\",\")) {\n        // The new way\n        searchedId = parseInt(searched.split(\",\")[0], 10);\n      } else {\n        // The old way!\n        searchedId = parseInt(searched, 10);\n      }\n    }\n  }\n\n  let comments = null;\n  let commentsCount = null;\n  if (song.comments) {\n    comments = song.comments.comments;\n    commentsCount = song.comments.comments_count;\n  }\n\n  return (\n    <>\n      <div className=\"header-add\">\n        <Songhead Songname={song.name} Artistname={song.artist.name} />\n      </div>\n      <div className=\"result song oka\">\n        <RenderSongHead song={song} />\n        {/* {!NO_ADS ? <div id=\"carbonadsouter\" /> : <span id=\"_nocardonads\" />} */}\n        <RenderParagraphs song={song.id} text={song.text_html} />\n\n        {!NO_ADS && <AmplifiedSnippet song={song} />}\n\n        <SongComments\n          comments={comments}\n          commentsCount={commentsCount}\n          song={song}\n          searchedId={searchedId}\n        />\n        <ShareSong song={song} />\n        <AmazonRelatedProducts song={song} />\n        {!isServer ? (\n          <IntersectionLazy render={() => <SpotifySnippet song={song} />} />\n        ) : null}\n        {!isServer ? (\n          <IntersectionLazy render={() => <YouTubeSnippet song={song} />} />\n        ) : null}\n        {!isServer ? <ShowRelated song={song} /> : null}\n      </div>\n    </>\n  );\n}\n\nfunction AmplifiedSnippet({ song }) {\n  useEffect(() => {\n    loadAmplifiedScript({ song: song.name, artist: song.artist.name });\n  }, [song]);\n\n  return (\n    <div id=\"amplifiedouter\">\n      <div id=\"amplified_100003500\" />\n    </div>\n  );\n}\n\nfunction ShareSong({ song }) {\n  const [showShare, setShowShare] = useState(false);\n  const [shared, setShared] = useState(false);\n  const [shareError, setShareError] = useState(null);\n  useEffect(() => {\n    if (navigator.share) {\n      setShowShare(true);\n    }\n  }, []);\n  if (!showShare) return null;\n\n  return (\n    <div style={{ margin: \"30px 0\", textAlign: \"center\" }}>\n      <button\n        className=\"btn btn-primary\"\n        onClick={() => {\n          const shareData = {\n            title: song.name,\n            text: `I found '${song.name}' on Song Search!`,\n            url: window.location.href,\n          };\n          try {\n            navigator\n              .share(shareData)\n              .then(() => {\n                setShared(true);\n                setShareError(null);\n              })\n              .catch((e) => {\n                setShareError(e);\n              })\n              .finally(() => {\n                fetch(`/api/song/${song.id}/shared/`, {\n                  method: \"POST\",\n                });\n              });\n          } catch (err) {\n            setShareError(err);\n          }\n        }}\n      >\n        {shared ? \"Thanks!\" : \"Share this song\"}\n      </button>\n      {shareError && <p>Sharing failed or was canceled. Oh well.</p>}\n    </div>\n  );\n}\n\n// XXX Check if this React.memo works\nconst RenderSongHead = React.memo(({ song }) => {\n  let image = null;\n  if (song.image) {\n    image = (\n      <img\n        src={song.image.url}\n        alt={song.image.name}\n        className=\"song-picture\"\n      />\n    );\n  } else {\n    image = (\n      <img\n        src={placeholderImage}\n        alt={song.artist.name}\n        width={150}\n        height={150}\n      />\n    );\n  }\n  let albums = null;\n  if (song.albums.length) {\n    let albumNames = song.albums\n      .map((a) => {\n        if (a.year) {\n          return `${a.name} (${a.year})`;\n        } else {\n          return a.name;\n        }\n      })\n      .join(\", \");\n    albums = (\n      <h3>\n        <span className=\"by\">on</span> {albumNames}\n      </h3>\n    );\n  }\n  return (\n    <>\n      <div className=\"text-center last\">\n        {image}\n        <h2 className=\"\">{song.name}</h2>\n        <h3>\n          <span className=\"by\">by</span> {song.artist.name}\n        </h3>\n        {albums}\n        <AdTag Songname={song.name} Artistname={song.artist.name} />\n      </div>\n    </>\n  );\n});\n\nconst ShowRelated = React.memo(({ song }) => {\n  const [related, setRelated] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const mounted = React.useRef(false);\n\n  useEffect(() => {\n    if (loading && related) {\n      setLoading(false);\n    }\n  }, [related, loading]);\n\n  function loadRelated() {\n    const url = `/api/song/${song.id}/related`;\n    return cachedFetch(url).then((r) => {\n      if (r.ok) {\n        r.json().then((result) => {\n          if (result && result.categories) {\n            setRelated(result.categories);\n          }\n        });\n      }\n    });\n  }\n\n  const _started = useRef();\n\n  function loadRelatedDebounced() {\n    if (!_started.current) {\n      _started.current = new Date().getTime();\n      loadRelated();\n    }\n  }\n\n  function onEnter() {\n    if (!related && !loading) {\n      loadRelatedDebounced();\n    }\n  }\n\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  if (related) {\n    if (!related.length) {\n      return null;\n    }\n    return (\n      <div className=\"related\">\n        {related.map((category) => {\n          return (\n            <ShowRelatedGroup\n              key={category.label}\n              label={category.label}\n              songs={category.results}\n            />\n          );\n        })}\n      </div>\n    );\n  } else if (loading) {\n    return null;\n  }\n  return <Waypoint onEnter={onEnter} />;\n});\n\nfunction ShowRelatedGroup({ label, songs }) {\n  return (\n    <div>\n      <h4>{label}</h4>\n      <ul>\n        {songs.map((song) => {\n          return (\n            <li key={song.id}>\n              <Link to={song._url}>\n                <b>{song.name}</b> <span className=\"by\">by</span>{\" \"}\n                {song.artist.name}\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nfunction NotFound() {\n  return (\n    <div className=\"not-found\">\n      <h3>Song Not Found</h3>\n      <p>\n        <img alt=\"Skull\" src={skullImage} />\n      </p>\n      <p>\n        <Link to=\"/\">Try another search</Link>\n      </p>\n    </div>\n  );\n}\n\nexport default Song;\n","import React from \"react\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nexport class AppErrorBoundary extends React.Component {\n  state = { error: null, submittedErrorId: null };\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  async componentDidCatch(error, errorInfo) {\n    const formData = new FormData();\n    formData.append(\"error\", error.toString());\n    formData.append(\"error_info\", JSON.stringify(errorInfo));\n    formData.append(\"url\", document.location.href);\n    formData.append(\"stack\", error.stack);\n    try {\n      if (localStorage.getItem(\"searched\")) {\n        formData.append(\"searched\", localStorage.getItem(\"searched\"));\n      }\n      if (localStorage.getItem(\"commentEmail\")) {\n        formData.append(\"commentEmail\", localStorage.getItem(\"commentEmail\"));\n      }\n    } catch (ex) {\n      console.log(\"Unable to extract localStorage keys\");\n    }\n    let response;\n    try {\n      response = await fetch(\"/api/errorboundary\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        const submission = await response.json();\n        const submittedErrorId = submission.id;\n        this.setState({ submittedErrorId });\n      } else {\n        console.log(\"Bad response trying to store error boundary.\");\n        console.error(response);\n      }\n    } catch (fetchError) {\n      console.log(\"Unable to send error info to server.\");\n      console.error(fetchError);\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <h3 style={{ color: \"#b12704\" }}>Application Error</h3>\n\n          <p>\n            <img alt=\"Skull\" src={skullImage} />\n          </p>\n          <p>\n            <b>Soooo sorry!</b>\n            <br />\n            It appears the application encountered a crash trying to render this\n            page.\n            <br />\n            Please try again later or <a href=\"/\">try another search</a>.\n          </p>\n          <p>\n            <b>\n              <a href=\"/\">Return to home page</a>\n            </b>\n          </p>\n          {this.state.submittedErrorId && (\n            <p>\n              Your error has been submitted to our server. <br />\n              Submission ID: <code>{this.state.submittedErrorId}</code>\n            </p>\n          )}\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CustomTimeAgo, SetHTMLHeaders, Loading, ServerError } from \"./Common\";\n\nclass MuteComment extends React.Component {\n  state = {\n    loading: false,\n    comment: null,\n    muted: false,\n    notFound: false,\n    serverError: null\n  };\n\n  async componentDidMount() {\n    SetHTMLHeaders({\n      title: \"Mute Comment - Song Search\"\n    });\n    window.setTimeout(() => {\n      const { comment, loading, notFound, serverError } = this.state;\n      if (\n        !this.dismounted &&\n        !comment &&\n        !loading &&\n        !notFound &&\n        !serverError\n      ) {\n        this.setState({ loading: true });\n      }\n    }, 1000);\n    const formData = new FormData();\n    const { match } = this.props;\n    formData.append(\"oid\", match.params.oid);\n    formData.append(\"id\", match.params.id);\n    let response;\n    try {\n      response = await fetch(\"/api/comments/mute\", {\n        method: \"POST\",\n        body: formData\n      });\n    } catch (ex) {\n      this.setState({ serverError: ex, loading: false });\n    }\n\n    if (response.ok) {\n      const result = await response.json();\n      this.setState(\n        {\n          comment: result.comment,\n          muted: true,\n          notFound: false,\n          loading: false,\n          serverError: null\n        },\n        () => {\n          SetHTMLHeaders({\n            title: \"Comment Muted - Song Search\"\n          });\n        }\n      );\n    } else if (response.status === 400) {\n      this.setState(\n        {\n          comment: null,\n          notFound: true,\n          loading: false,\n          serverError: null\n        },\n        () => {\n          SetHTMLHeaders({\n            title: \"Comment Not Found - Song Search\"\n          });\n        }\n      );\n    } else {\n      this.setState({ serverError: response, loading: false });\n    }\n  }\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  render() {\n    const { loading, comment, muted, notFound, serverError } = this.state;\n    if (loading) {\n      return <Loading text=\"One sec...\" />;\n    }\n    if (serverError) return <ServerError />;\n    return (\n      <div>\n        {muted && (\n          <div>\n            <h2>Comment Muted</h2>\n            <p>\n              You will not receive any more email notifications to replies on\n              this comment.\n            </p>\n            <p>\n              <Link to=\"/\">Go back to the Home page</Link>\n            </p>\n          </div>\n        )}\n\n        {notFound && <ShowNotFound />}\n\n        {comment && <ShowCommentData comment={comment} />}\n      </div>\n    );\n  }\n}\n\nexport default MuteComment;\n\nfunction ShowNotFound() {\n  return (\n    <div>\n      <h2>Comment Not Found</h2>\n      <p>\n        Sorry, but the instructions to mute this particular comment could not be\n        found.\n      </p>\n      <p>\n        <Link to=\"/\">Go back to the Home page</Link>\n      </p>\n    </div>\n  );\n}\n\nfunction ShowCommentData({ comment }) {\n  return (\n    <div style={{ marginTop: 70 }}>\n      {comment.song && (\n        <h4 style={{ marginBottom: 20 }}>\n          Song:{\" \"}\n          <a href={`${comment.song._url}#c${comment.id}`}>\n            <b>{comment.song.name}</b> <span className=\"by\">by</span>{\" \"}\n            <b>{comment.song.artist.name}</b>\n          </a>\n        </h4>\n      )}\n      <h4>Comment:</h4>\n      <blockquote dangerouslySetInnerHTML={{ __html: comment.text_rendered }} />\n      <p>\n        Posted <CustomTimeAgo date={comment.created} />\n      </p>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport Home from \"./Home\";\nimport About from \"./About\";\nimport PrivacyPolicy from \"./PrivacyPolicy\";\nimport Song from \"./Song\";\nimport { AppErrorBoundary } from \"./ErrorBoundaries\";\nimport MuteComment from \"./MuteComment\";\nimport RecentComments from \"./RecentComments\";\nimport { isServer } from \"./Common\";\n\nexport function NoMatch({ location }) {\n  return (\n    <div>\n      <h2>Page Not Found</h2>\n      <h3>\n        No match for <code>{location.pathname}</code>\n      </h3>\n    </div>\n  );\n}\n\nclass App extends React.Component {\n  render() {\n    const {\n      song,\n      related,\n      songNotFound,\n      results,\n      totalStats,\n      searchExamples,\n      recentComments,\n      recentCommentsHomepage\n    } = this.props;\n\n    let onSongPage = false;\n    if (isServer) {\n      if (song) {\n        onSongPage = true;\n      }\n    } else if (/\\/song\\//.test(window.location.pathname)) {\n      onSongPage = true;\n    }\n\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"page-header\">\n            <h1>\n              <Link to=\"/\">Song Search</Link>\n            </h1>\n            {onSongPage ? (\n              <h5 className=\"home-link\">\n                <Link to=\"/\">Try another search</Link>\n              </h5>\n            ) : (\n              <RotatingSubHeader />\n            )}\n          </div>\n          <div className=\"container children\">\n            <AppErrorBoundary>\n              <Switch>\n                <Route\n                  exact\n                  path=\"/\"\n                  render={(props) => {\n                    return (\n                      <Home\n                        {...props}\n                        searchExamples={searchExamples}\n                        recentComments={recentCommentsHomepage}\n                      />\n                    );\n                  }}\n                />\n                <Route\n                  path=\"/q/:q\"\n                  render={(props) => {\n                    return <Home {...props} results={results} />;\n                  }}\n                />\n                <Route\n                  path=\"/song/:artist/:name/:id\"\n                  render={(props) => {\n                    return (\n                      <Song\n                        {...props}\n                        song={song}\n                        related={related}\n                        songNotFound={songNotFound}\n                      />\n                    );\n                  }}\n                />\n                <Route\n                  path=\"/about\"\n                  render={(props) => {\n                    return <About {...props} totalStats={totalStats} />;\n                  }}\n                />\n                <Route path=\"/privacy\" component={PrivacyPolicy} />\n                <Route\n                  path=\"/comments\"\n                  exact\n                  render={(props) => {\n                    return (\n                      <RecentComments\n                        {...props}\n                        recentComments={recentComments}\n                      />\n                    );\n                  }}\n                />\n                <Route\n                  path=\"/comments/p:page\"\n                  render={(props) => {\n                    return (\n                      <RecentComments\n                        {...props}\n                        recentComments={recentComments}\n                      />\n                    );\n                  }}\n                />\n                <Route\n                  path=\"/mute/:oid/:id\"\n                  render={(props) => {\n                    return <MuteComment {...props} />;\n                  }}\n                />\n                <Route component={NoMatch} />\n              </Switch>\n            </AppErrorBoundary>\n          </div>\n        </div>\n        <footer className=\"footer\">\n          <div className=\"container\">\n            <p className=\"text-muted\">\n              <Link to=\"/\">Home</Link>\n              {\"  \"}\n              <Link to=\"/comments\">Recent comments</Link>\n              {\"  \"}\n              <Link to=\"/about\">About this site</Link>\n              {\"  \"}\n              <Link to=\"/privacy\">Privacy Policy</Link>\n              {process.env.NODE_ENV === \"development\" ? (\n                <span> React version {React.version}</span>\n              ) : null}\n            </p>\n          </div>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\nconst SUB_HEADERS = [\n  \"I'm looking for a song that I heard.\",\n  \"I'm looking for a song I don't know the name of.\",\n  \"I'm looking for a song that goes like this.\",\n  \"Looking for a song I don't know the name of.\",\n  \"Find me a song by lyrics.\"\n];\n\nfunction shuffle(a) {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\nshuffle(SUB_HEADERS);\n\nfunction RotatingSubHeader() {\n  const [quote, setQuote] = useState(SUB_HEADERS[0]);\n\n  useEffect(() => {\n    let dismounted = false;\n    function cycle() {\n      setTimeout(() => {\n        if (!dismounted) {\n          const nextIndex =\n            (SUB_HEADERS.indexOf(quote) + 1) % SUB_HEADERS.length;\n          setQuote(SUB_HEADERS[nextIndex]);\n          cycle();\n        }\n      }, 10000);\n    }\n    cycle();\n\n    return () => {\n      dismounted = true;\n    };\n  }, [quote]);\n\n  return <h5>{quote}</h5>;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport \"./static/bootstrap.css\";\nimport \"./index.css\";\nimport \"./App.css\";\nimport \"./Home.css\";\nimport \"./Common.css\";\nimport \"./CarbonAds.css\";\n\nconst container = document.getElementById(\"root\");\nconst app = (\n  <BrowserRouter>\n    <React.StrictMode>\n      <App\n        song={window.__song__}\n        related={window.__related__}\n        results={window.__results__}\n        songNotFound={window.__songNotFound__}\n        totalStats={window.__totalStats__}\n        searchExamples={window.__searchExamples__}\n        recentComments={window.__recentComments__}\n        recentCommentsHomepage={window.__recentCommentsHomepage__}\n      />\n    </React.StrictMode>\n  </BrowserRouter>\n);\n\nif (container.firstElementChild) {\n  if (window.origin !== \"https://translate.googleusercontent.com\") {\n    ReactDOM.hydrate(app, container);\n  }\n} else {\n  ReactDOM.render(app, container);\n}\nserviceWorkerRegistration.register();\n"]}}