{"ast":null,"code":"import _regeneratorRuntime from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Link}from\"react-router-dom\";import{CustomTimeAgo,SetHTMLHeaders,Loading,ServerError}from\"./Common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MuteComment=/*#__PURE__*/function(_React$Component){_inherits(MuteComment,_React$Component);var _super=_createSuper(MuteComment);function MuteComment(){var _this;_classCallCheck(this,MuteComment);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false,comment:null,muted:false,notFound:false,serverError:null};return _this;}_createClass(MuteComment,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var formData,match,response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:SetHTMLHeaders({title:\"Mute Comment - Song Search\"});window.setTimeout(function(){var _this2$state=_this2.state,comment=_this2$state.comment,loading=_this2$state.loading,notFound=_this2$state.notFound,serverError=_this2$state.serverError;if(!_this2.dismounted&&!comment&&!loading&&!notFound&&!serverError){_this2.setState({loading:true});}},1000);formData=new FormData();match=this.props.match;formData.append(\"oid\",match.params.oid);formData.append(\"id\",match.params.id);_context.prev=6;_context.next=9;return fetch(\"/api/comments/mute\",{method:\"POST\",body:formData});case 9:response=_context.sent;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](6);this.setState({serverError:_context.t0,loading:false});case 15:if(!response.ok){_context.next=22;break;}_context.next=18;return response.json();case 18:result=_context.sent;this.setState({comment:result.comment,muted:true,notFound:false,loading:false,serverError:null},function(){SetHTMLHeaders({title:\"Comment Muted - Song Search\"});});_context.next=23;break;case 22:if(response.status===400){this.setState({comment:null,notFound:true,loading:false,serverError:null},function(){SetHTMLHeaders({title:\"Comment Not Found - Song Search\"});});}else{this.setState({serverError:response,loading:false});}case 23:case\"end\":return _context.stop();}}},_callee,this,[[6,12]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.dismounted=true;}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,comment=_this$state.comment,muted=_this$state.muted,notFound=_this$state.notFound,serverError=_this$state.serverError;if(loading){return/*#__PURE__*/_jsx(Loading,{text:\"One sec...\"});}if(serverError)return/*#__PURE__*/_jsx(ServerError,{});return/*#__PURE__*/_jsxs(\"div\",{children:[muted&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Comment Muted\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You will not receive any more email notifications to replies on this comment.\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go back to the Home page\"})})]}),notFound&&/*#__PURE__*/_jsx(ShowNotFound,{}),comment&&/*#__PURE__*/_jsx(ShowCommentData,{comment:comment})]});}}]);return MuteComment;}(React.Component);export default MuteComment;function ShowNotFound(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Comment Not Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sorry, but the instructions to mute this particular comment could not be found.\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go back to the Home page\"})})]});}function ShowCommentData(_ref){var comment=_ref.comment;return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:70},children:[comment.song&&/*#__PURE__*/_jsxs(\"h4\",{style:{marginBottom:20},children:[\"Song:\",\" \",/*#__PURE__*/_jsxs(\"a\",{href:\"\".concat(comment.song._url,\"#c\").concat(comment.id),children:[/*#__PURE__*/_jsx(\"b\",{children:comment.song.name}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"by\",children:\"by\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:comment.song.artist.name})]})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Comment:\"}),/*#__PURE__*/_jsx(\"blockquote\",{dangerouslySetInnerHTML:{__html:comment.text_rendered}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted \",/*#__PURE__*/_jsx(CustomTimeAgo,{date:comment.created})]})]});}","map":{"version":3,"sources":["/home/mandeep/Downloads/Song-sorch work/site/src/MuteComment.js"],"names":["React","Link","CustomTimeAgo","SetHTMLHeaders","Loading","ServerError","MuteComment","state","loading","comment","muted","notFound","serverError","title","window","setTimeout","dismounted","setState","formData","FormData","match","props","append","params","oid","id","fetch","method","body","response","ok","json","result","status","Component","ShowNotFound","ShowCommentData","marginTop","song","marginBottom","_url","name","artist","__html","text_rendered","created"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CustomTimeAgo, SetHTMLHeaders, Loading, ServerError } from \"./Common\";\n\nclass MuteComment extends React.Component {\n  state = {\n    loading: false,\n    comment: null,\n    muted: false,\n    notFound: false,\n    serverError: null\n  };\n\n  async componentDidMount() {\n    SetHTMLHeaders({\n      title: \"Mute Comment - Song Search\"\n    });\n    window.setTimeout(() => {\n      const { comment, loading, notFound, serverError } = this.state;\n      if (\n        !this.dismounted &&\n        !comment &&\n        !loading &&\n        !notFound &&\n        !serverError\n      ) {\n        this.setState({ loading: true });\n      }\n    }, 1000);\n    const formData = new FormData();\n    const { match } = this.props;\n    formData.append(\"oid\", match.params.oid);\n    formData.append(\"id\", match.params.id);\n    let response;\n    try {\n      response = await fetch(\"/api/comments/mute\", {\n        method: \"POST\",\n        body: formData\n      });\n    } catch (ex) {\n      this.setState({ serverError: ex, loading: false });\n    }\n\n    if (response.ok) {\n      const result = await response.json();\n      this.setState(\n        {\n          comment: result.comment,\n          muted: true,\n          notFound: false,\n          loading: false,\n          serverError: null\n        },\n        () => {\n          SetHTMLHeaders({\n            title: \"Comment Muted - Song Search\"\n          });\n        }\n      );\n    } else if (response.status === 400) {\n      this.setState(\n        {\n          comment: null,\n          notFound: true,\n          loading: false,\n          serverError: null\n        },\n        () => {\n          SetHTMLHeaders({\n            title: \"Comment Not Found - Song Search\"\n          });\n        }\n      );\n    } else {\n      this.setState({ serverError: response, loading: false });\n    }\n  }\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  render() {\n    const { loading, comment, muted, notFound, serverError } = this.state;\n    if (loading) {\n      return <Loading text=\"One sec...\" />;\n    }\n    if (serverError) return <ServerError />;\n    return (\n      <div>\n        {muted && (\n          <div>\n            <h2>Comment Muted</h2>\n            <p>\n              You will not receive any more email notifications to replies on\n              this comment.\n            </p>\n            <p>\n              <Link to=\"/\">Go back to the Home page</Link>\n            </p>\n          </div>\n        )}\n\n        {notFound && <ShowNotFound />}\n\n        {comment && <ShowCommentData comment={comment} />}\n      </div>\n    );\n  }\n}\n\nexport default MuteComment;\n\nfunction ShowNotFound() {\n  return (\n    <div>\n      <h2>Comment Not Found</h2>\n      <p>\n        Sorry, but the instructions to mute this particular comment could not be\n        found.\n      </p>\n      <p>\n        <Link to=\"/\">Go back to the Home page</Link>\n      </p>\n    </div>\n  );\n}\n\nfunction ShowCommentData({ comment }) {\n  return (\n    <div style={{ marginTop: 70 }}>\n      {comment.song && (\n        <h4 style={{ marginBottom: 20 }}>\n          Song:{\" \"}\n          <a href={`${comment.song._url}#c${comment.id}`}>\n            <b>{comment.song.name}</b> <span className=\"by\">by</span>{\" \"}\n            <b>{comment.song.artist.name}</b>\n          </a>\n        </h4>\n      )}\n      <h4>Comment:</h4>\n      <blockquote dangerouslySetInnerHTML={{ __html: comment.text_rendered }} />\n      <p>\n        Posted <CustomTimeAgo date={comment.created} />\n      </p>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}