{"ast":null,"code":"import _regeneratorRuntime from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/mandeep/Downloads/Song-sorch work/site/src/ErrorBoundaries.js\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nvar skullImage = PUBLIC_URL + \"/static/skull.png\";\nexport var AppErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inherits(AppErrorBoundary, _React$Component);\n\n  var _super = _createSuper(AppErrorBoundary);\n\n  function AppErrorBoundary() {\n    var _this;\n\n    _classCallCheck(this, AppErrorBoundary);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      error: null,\n      submittedErrorId: null\n    };\n    return _this;\n  }\n\n  _createClass(AppErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function () {\n      var _componentDidCatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(error, errorInfo) {\n        var formData, response, submission, submittedErrorId;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                formData = new FormData();\n                formData.append(\"error\", error.toString());\n                formData.append(\"error_info\", JSON.stringify(errorInfo));\n                formData.append(\"url\", document.location.href);\n                formData.append(\"stack\", error.stack);\n\n                try {\n                  if (localStorage.getItem(\"searched\")) {\n                    formData.append(\"searched\", localStorage.getItem(\"searched\"));\n                  }\n\n                  if (localStorage.getItem(\"commentEmail\")) {\n                    formData.append(\"commentEmail\", localStorage.getItem(\"commentEmail\"));\n                  }\n                } catch (ex) {\n                  console.log(\"Unable to extract localStorage keys\");\n                }\n\n                _context.prev = 6;\n                _context.next = 9;\n                return fetch(\"/api/errorboundary\", {\n                  method: \"POST\",\n                  body: formData\n                });\n\n              case 9:\n                response = _context.sent;\n\n                if (!response.ok) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _context.next = 13;\n                return response.json();\n\n              case 13:\n                submission = _context.sent;\n                submittedErrorId = submission.id;\n                this.setState({\n                  submittedErrorId: submittedErrorId\n                });\n                _context.next = 20;\n                break;\n\n              case 18:\n                console.log(\"Bad response trying to store error boundary.\");\n                console.error(response);\n\n              case 20:\n                _context.next = 26;\n                break;\n\n              case 22:\n                _context.prev = 22;\n                _context.t0 = _context[\"catch\"](6);\n                console.log(\"Unable to send error info to server.\");\n                console.error(_context.t0);\n\n              case 26:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[6, 22]]);\n      }));\n\n      function componentDidCatch(_x, _x2) {\n        return _componentDidCatch.apply(this, arguments);\n      }\n\n      return componentDidCatch;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.error) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              color: \"#b12704\"\n            },\n            children: \"Application Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"Skull\",\n              src: skullImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Soooo sorry!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 13\n            }, this), \"It appears the application encountered a crash trying to render this page.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 13\n            }, this), \"Please try again later or \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              children: \"try another search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 39\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/\",\n                children: \"Return to home page\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 11\n          }, this), this.state.submittedErrorId && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Your error has been submitted to our server. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 60\n            }, this), \"Submission ID: \", /*#__PURE__*/_jsxDEV(\"code\", {\n              children: this.state.submittedErrorId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }, this);\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      return {\n        error: error\n      };\n    }\n  }]);\n\n  return AppErrorBoundary;\n}(React.Component);","map":{"version":3,"sources":["/home/mandeep/Downloads/Song-sorch work/site/src/ErrorBoundaries.js"],"names":["React","PUBLIC_URL","process","env","skullImage","AppErrorBoundary","state","error","submittedErrorId","errorInfo","formData","FormData","append","toString","JSON","stringify","document","location","href","stack","localStorage","getItem","ex","console","log","fetch","method","body","response","ok","json","submission","id","setState","textAlign","color","props","children","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,UAAU,GAAGC,OAAO,CAACC,GAAR,CAAYF,UAAZ,IAA0B,EAA7C;AACA,IAAMG,UAAU,GAAGH,UAAU,GAAG,mBAAhC;AAEA,WAAaI,gBAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UACEC,KADF,GACU;AAAEC,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,gBAAgB,EAAE;AAAjC,KADV;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,wFAOE,iBAAwBD,KAAxB,EAA+BE,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,QADR,GACmB,IAAIC,QAAJ,EADnB;AAEED,gBAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,KAAK,CAACM,QAAN,EAAzB;AACAH,gBAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA8BE,IAAI,CAACC,SAAL,CAAeN,SAAf,CAA9B;AACAC,gBAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuBI,QAAQ,CAACC,QAAT,CAAkBC,IAAzC;AACAR,gBAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,KAAK,CAACY,KAA/B;;AACA,oBAAI;AACF,sBAAIC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAJ,EAAsC;AACpCX,oBAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BQ,YAAY,CAACC,OAAb,CAAqB,UAArB,CAA5B;AACD;;AACD,sBAAID,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAJ,EAA0C;AACxCX,oBAAAA,QAAQ,CAACE,MAAT,CAAgB,cAAhB,EAAgCQ,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhC;AACD;AACF,iBAPD,CAOE,OAAOC,EAAP,EAAW;AACXC,kBAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACD;;AAfH;AAAA;AAAA,uBAkBqBC,KAAK,CAAC,oBAAD,EAAuB;AAC3CC,kBAAAA,MAAM,EAAE,MADmC;AAE3CC,kBAAAA,IAAI,EAAEjB;AAFqC,iBAAvB,CAlB1B;;AAAA;AAkBIkB,gBAAAA,QAlBJ;;AAAA,qBAsBQA,QAAQ,CAACC,EAtBjB;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAuB+BD,QAAQ,CAACE,IAAT,EAvB/B;;AAAA;AAuBYC,gBAAAA,UAvBZ;AAwBYvB,gBAAAA,gBAxBZ,GAwB+BuB,UAAU,CAACC,EAxB1C;AAyBM,qBAAKC,QAAL,CAAc;AAAEzB,kBAAAA,gBAAgB,EAAhBA;AAAF,iBAAd;AAzBN;AAAA;;AAAA;AA2BMe,gBAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;AACAD,gBAAAA,OAAO,CAAChB,KAAR,CAAcqB,QAAd;;AA5BN;AAAA;AAAA;;AAAA;AAAA;AAAA;AA+BIL,gBAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAD,gBAAAA,OAAO,CAAChB,KAAR;;AAhCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAPF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,WA2CE,kBAAS;AACP,UAAI,KAAKD,KAAL,CAAWC,KAAf,EAAsB;AACpB,4BACE;AAAK,UAAA,KAAK,EAAE;AAAE2B,YAAAA,SAAS,EAAE;AAAb,WAAZ;AAAA,kCACE;AAAI,YAAA,KAAK,EAAE;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAGE;AAAA,mCACE;AAAK,cAAA,GAAG,EAAC,OAAT;AAAiB,cAAA,GAAG,EAAE/B;AAAtB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAHF,eAME;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA,oBAFF,6FAKE;AAAA;AAAA;AAAA;AAAA,oBALF,6CAM4B;AAAG,cAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAN5B;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAcE;AAAA,mCACE;AAAA,qCACE;AAAG,gBAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAdF,EAmBG,KAAKE,KAAL,CAAWE,gBAAX,iBACC;AAAA,qFAC+C;AAAA;AAAA;AAAA;AAAA,oBAD/C,kCAEiB;AAAA,wBAAO,KAAKF,KAAL,CAAWE;AAAlB;AAAA;AAAA;AAAA;AAAA,oBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA,kBApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AA4BD;;AACD,aAAO,KAAK4B,KAAL,CAAWC,QAAlB;AACD;AA3EH;AAAA;AAAA,WAGE,kCAAgC9B,KAAhC,EAAuC;AACrC,aAAO;AAAEA,QAAAA,KAAK,EAALA;AAAF,OAAP;AACD;AALH;;AAAA;AAAA,EAAsCP,KAAK,CAACsC,SAA5C","sourcesContent":["import React from \"react\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nexport class AppErrorBoundary extends React.Component {\n  state = { error: null, submittedErrorId: null };\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  async componentDidCatch(error, errorInfo) {\n    const formData = new FormData();\n    formData.append(\"error\", error.toString());\n    formData.append(\"error_info\", JSON.stringify(errorInfo));\n    formData.append(\"url\", document.location.href);\n    formData.append(\"stack\", error.stack);\n    try {\n      if (localStorage.getItem(\"searched\")) {\n        formData.append(\"searched\", localStorage.getItem(\"searched\"));\n      }\n      if (localStorage.getItem(\"commentEmail\")) {\n        formData.append(\"commentEmail\", localStorage.getItem(\"commentEmail\"));\n      }\n    } catch (ex) {\n      console.log(\"Unable to extract localStorage keys\");\n    }\n    let response;\n    try {\n      response = await fetch(\"/api/errorboundary\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        const submission = await response.json();\n        const submittedErrorId = submission.id;\n        this.setState({ submittedErrorId });\n      } else {\n        console.log(\"Bad response trying to store error boundary.\");\n        console.error(response);\n      }\n    } catch (fetchError) {\n      console.log(\"Unable to send error info to server.\");\n      console.error(fetchError);\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <h3 style={{ color: \"#b12704\" }}>Application Error</h3>\n\n          <p>\n            <img alt=\"Skull\" src={skullImage} />\n          </p>\n          <p>\n            <b>Soooo sorry!</b>\n            <br />\n            It appears the application encountered a crash trying to render this\n            page.\n            <br />\n            Please try again later or <a href=\"/\">try another search</a>.\n          </p>\n          <p>\n            <b>\n              <a href=\"/\">Return to home page</a>\n            </b>\n          </p>\n          {this.state.submittedErrorId && (\n            <p>\n              Your error has been submitted to our server. <br />\n              Submission ID: <code>{this.state.submittedErrorId}</code>\n            </p>\n          )}\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}