{"ast":null,"code":"import _regeneratorRuntime from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PUBLIC_URL=process.env.PUBLIC_URL||\"\";var skullImage=PUBLIC_URL+\"/static/skull.png\";export var AppErrorBoundary=/*#__PURE__*/function(_React$Component){_inherits(AppErrorBoundary,_React$Component);var _super=_createSuper(AppErrorBoundary);function AppErrorBoundary(){var _this;_classCallCheck(this,AppErrorBoundary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:null,submittedErrorId:null};return _this;}_createClass(AppErrorBoundary,[{key:\"componentDidCatch\",value:function(){var _componentDidCatch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error,errorInfo){var formData,response,submission,submittedErrorId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append(\"error\",error.toString());formData.append(\"error_info\",JSON.stringify(errorInfo));formData.append(\"url\",document.location.href);formData.append(\"stack\",error.stack);try{if(localStorage.getItem(\"searched\")){formData.append(\"searched\",localStorage.getItem(\"searched\"));}if(localStorage.getItem(\"commentEmail\")){formData.append(\"commentEmail\",localStorage.getItem(\"commentEmail\"));}}catch(ex){console.log(\"Unable to extract localStorage keys\");}_context.prev=6;_context.next=9;return fetch(\"/api/errorboundary\",{method:\"POST\",body:formData});case 9:response=_context.sent;if(!response.ok){_context.next=18;break;}_context.next=13;return response.json();case 13:submission=_context.sent;submittedErrorId=submission.id;this.setState({submittedErrorId:submittedErrorId});_context.next=20;break;case 18:console.log(\"Bad response trying to store error boundary.\");console.error(response);case 20:_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](6);console.log(\"Unable to send error info to server.\");console.error(_context.t0);case 26:case\"end\":return _context.stop();}}},_callee,this,[[6,22]]);}));function componentDidCatch(_x,_x2){return _componentDidCatch.apply(this,arguments);}return componentDidCatch;}()},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#b12704\"},children:\"Application Error\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"Skull\",src:skullImage})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Soooo sorry!\"}),/*#__PURE__*/_jsx(\"br\",{}),\"It appears the application encountered a crash trying to render this page.\",/*#__PURE__*/_jsx(\"br\",{}),\"Please try again later or \",/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"try another search\"}),\".\"]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Return to home page\"})})}),this.state.submittedErrorId&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Your error has been submitted to our server. \",/*#__PURE__*/_jsx(\"br\",{}),\"Submission ID: \",/*#__PURE__*/_jsx(\"code\",{children:this.state.submittedErrorId})]})]});}return this.props.children;}}],[{key:\"getDerivedStateFromError\",value:function getDerivedStateFromError(error){return{error:error};}}]);return AppErrorBoundary;}(React.Component);","map":{"version":3,"sources":["/home/mandeep/Downloads/Song-sorch work/site/src/ErrorBoundaries.js"],"names":["React","PUBLIC_URL","process","env","skullImage","AppErrorBoundary","state","error","submittedErrorId","errorInfo","formData","FormData","append","toString","JSON","stringify","document","location","href","stack","localStorage","getItem","ex","console","log","fetch","method","body","response","ok","json","submission","id","setState","textAlign","color","props","children","Component"],"mappings":"+7BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAGC,OAAO,CAACC,GAAR,CAAYF,UAAZ,EAA0B,EAA7C,CACA,GAAMG,CAAAA,UAAU,CAAGH,UAAU,CAAG,mBAAhC,CAEA,UAAaI,CAAAA,gBAAb,+WACEC,KADF,CACU,CAAEC,KAAK,CAAE,IAAT,CAAeC,gBAAgB,CAAE,IAAjC,CADV,uKAOE,iBAAwBD,KAAxB,CAA+BE,SAA/B,oKACQC,QADR,CACmB,GAAIC,CAAAA,QAAJ,EADnB,CAEED,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBL,KAAK,CAACM,QAAN,EAAzB,EACAH,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8BE,IAAI,CAACC,SAAL,CAAeN,SAAf,CAA9B,EACAC,QAAQ,CAACE,MAAT,CAAgB,KAAhB,CAAuBI,QAAQ,CAACC,QAAT,CAAkBC,IAAzC,EACAR,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBL,KAAK,CAACY,KAA/B,EACA,GAAI,CACF,GAAIC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAJ,CAAsC,CACpCX,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BQ,YAAY,CAACC,OAAb,CAAqB,UAArB,CAA5B,EACD,CACD,GAAID,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAJ,CAA0C,CACxCX,QAAQ,CAACE,MAAT,CAAgB,cAAhB,CAAgCQ,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhC,EACD,CACF,CAAC,MAAOC,EAAP,CAAW,CACXC,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAfH,sCAkBqBC,CAAAA,KAAK,CAAC,oBAAD,CAAuB,CAC3CC,MAAM,CAAE,MADmC,CAE3CC,IAAI,CAAEjB,QAFqC,CAAvB,CAlB1B,QAkBIkB,QAlBJ,mBAsBQA,QAAQ,CAACC,EAtBjB,iDAuB+BD,CAAAA,QAAQ,CAACE,IAAT,EAvB/B,SAuBYC,UAvBZ,eAwBYvB,gBAxBZ,CAwB+BuB,UAAU,CAACC,EAxB1C,CAyBM,KAAKC,QAAL,CAAc,CAAEzB,gBAAgB,CAAhBA,gBAAF,CAAd,EAzBN,+BA2BMe,OAAO,CAACC,GAAR,CAAY,8CAAZ,EACAD,OAAO,CAAChB,KAAR,CAAcqB,QAAd,EA5BN,yFA+BIL,OAAO,CAACC,GAAR,CAAY,sCAAZ,EACAD,OAAO,CAAChB,KAAR,cAhCJ,qEAPF,yIA2CE,iBAAS,CACP,GAAI,KAAKD,KAAL,CAAWC,KAAf,CAAsB,CACpB,mBACE,aAAK,KAAK,CAAE,CAAE2B,SAAS,CAAE,QAAb,CAAZ,wBACE,WAAI,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAX,+BADF,cAGE,gCACE,YAAK,GAAG,CAAC,OAAT,CAAiB,GAAG,CAAE/B,UAAtB,EADF,EAHF,cAME,kCACE,mCADF,cAEE,aAFF,2FAKE,aALF,2CAM4B,UAAG,IAAI,CAAC,GAAR,gCAN5B,OANF,cAcE,gCACE,gCACE,UAAG,IAAI,CAAC,GAAR,iCADF,EADF,EAdF,CAmBG,KAAKE,KAAL,CAAWE,gBAAX,eACC,kFAC+C,aAD/C,gCAEiB,sBAAO,KAAKF,KAAL,CAAWE,gBAAlB,EAFjB,GApBJ,GADF,CA4BD,CACD,MAAO,MAAK4B,KAAL,CAAWC,QAAlB,CACD,CA3EH,0CAGE,kCAAgC9B,KAAhC,CAAuC,CACrC,MAAO,CAAEA,KAAK,CAALA,KAAF,CAAP,CACD,CALH,8BAAsCP,KAAK,CAACsC,SAA5C","sourcesContent":["import React from \"react\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nexport class AppErrorBoundary extends React.Component {\n  state = { error: null, submittedErrorId: null };\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  async componentDidCatch(error, errorInfo) {\n    const formData = new FormData();\n    formData.append(\"error\", error.toString());\n    formData.append(\"error_info\", JSON.stringify(errorInfo));\n    formData.append(\"url\", document.location.href);\n    formData.append(\"stack\", error.stack);\n    try {\n      if (localStorage.getItem(\"searched\")) {\n        formData.append(\"searched\", localStorage.getItem(\"searched\"));\n      }\n      if (localStorage.getItem(\"commentEmail\")) {\n        formData.append(\"commentEmail\", localStorage.getItem(\"commentEmail\"));\n      }\n    } catch (ex) {\n      console.log(\"Unable to extract localStorage keys\");\n    }\n    let response;\n    try {\n      response = await fetch(\"/api/errorboundary\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        const submission = await response.json();\n        const submittedErrorId = submission.id;\n        this.setState({ submittedErrorId });\n      } else {\n        console.log(\"Bad response trying to store error boundary.\");\n        console.error(response);\n      }\n    } catch (fetchError) {\n      console.log(\"Unable to send error info to server.\");\n      console.error(fetchError);\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <h3 style={{ color: \"#b12704\" }}>Application Error</h3>\n\n          <p>\n            <img alt=\"Skull\" src={skullImage} />\n          </p>\n          <p>\n            <b>Soooo sorry!</b>\n            <br />\n            It appears the application encountered a crash trying to render this\n            page.\n            <br />\n            Please try again later or <a href=\"/\">try another search</a>.\n          </p>\n          <p>\n            <b>\n              <a href=\"/\">Return to home page</a>\n            </b>\n          </p>\n          {this.state.submittedErrorId && (\n            <p>\n              Your error has been submitted to our server. <br />\n              Submission ID: <code>{this.state.submittedErrorId}</code>\n            </p>\n          )}\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}