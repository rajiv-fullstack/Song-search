{"ast":null,"code":"import _objectSpread from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _regeneratorRuntime from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/mandeep/Downloads/Song-sorch work/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/mandeep/Downloads/Song-sorch work/site/src/Common.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport TimeAgo from \"react-timeago\";\nimport { Waypoint } from \"react-waypoint\";\nimport useSWR from \"swr\";\nimport { cachedFetch } from \"./Cache\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar PUBLIC_URL = process.env.PUBLIC_URL || \"\"; // const itunesAppImage = PUBLIC_URL + \"/static/itunes-app-icon.png\";\n\nvar skullImage = PUBLIC_URL + \"/static/skull.png\";\nexport var isServer = typeof document === \"undefined\";\nvar defaultHTMLHeaders = {\n  title: \"Song Search - Find Songs by Lyrics\",\n  image: isServer ? null : document.querySelector('meta[itemprop=\"image\"]').content\n};\nexport var SetHTMLHeaders = function SetHTMLHeaders(_ref) {\n  var title = _ref.title,\n      _ref$image = _ref.image,\n      image = _ref$image === void 0 ? null : _ref$image;\n\n  if (isServer) {\n    console.warn(\"SetHTMLHeaders should not be called in server mode\");\n    return;\n  }\n  /* Only set when it's different */\n\n\n  if (title !== document.title) {\n    document.title = title;\n  }\n\n  var ogtitle = document.querySelector('meta[property=\"og:title\"]');\n\n  if (ogtitle.content !== title) {\n    ogtitle.content = title;\n  }\n\n  var itemtitle = document.querySelector('meta[itemprop=\"name\"]');\n\n  if (itemtitle !== title) {\n    itemtitle.content = title;\n  }\n\n  var img = document.querySelector('meta[itemprop=\"image\"]');\n\n  if (img.content !== image) {\n    img.content = image;\n  }\n};\n_c = SetHTMLHeaders;\nexport var ResetHTMLHeaders = function ResetHTMLHeaders() {\n  SetHTMLHeaders(defaultHTMLHeaders);\n};\n_c2 = ResetHTMLHeaders;\nexport var Loading = function Loading(_ref2) {\n  var text = _ref2.text;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    title: text,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cssload-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cssload-square\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cssload-square\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cssload-square\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cssload-square\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cssload-square\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, _this);\n};\n_c3 = Loading;\nexport function FormattedNumber(_ref3) {\n  var value = _ref3.value;\n  return value.toLocaleString();\n}\n_c4 = FormattedNumber;\nexport function AmazonRelatedProducts(_ref4) {\n  _s();\n\n  var _this2 = this;\n\n  var song = _ref4.song;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      result = _useState2[0],\n      setResult = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loadingMore = _useState6[0],\n      setLoadingMore = _useState6[1];\n\n  useEffect(function () {\n    if (page > 1) {\n      setLoadingMore(true);\n    }\n  }, [page]);\n  useEffect(function () {\n    var mounted = true;\n    var url = \"/api/song/\".concat(song.id, \"/amazon?v=5\");\n\n    if (page > 1) {\n      url += \"&page=\".concat(page);\n    }\n\n    fetch(url).then(function (r) {\n      if (!mounted) return;\n\n      if (r.ok) {\n        r.json().then(function (result) {\n          setResult(result);\n          setLoadingMore(false);\n        });\n      }\n    });\n    return function () {\n      mounted = false;\n    };\n  }, [song, page]);\n\n  function loadMore() {\n    setPage(page + 1);\n  }\n\n  if (!result || !result.items.length) {\n    return null;\n  }\n\n  var items = result.items,\n      total = result.total;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"amazon-related-products\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Relevant on Amazon.com\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), items.map(function (item) {\n      return /*#__PURE__*/_jsxDEV(AmazonRelatedItem, {\n        item: item\n      }, item.asin || item.ASIN, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, _this2);\n    }), /*#__PURE__*/_jsxDEV(\"small\", {\n      children: \"As an Amazon Associate I earn from qualifying purchases.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), total > items.length && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: \"right\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-default btn-sm\",\n        onClick: loadMore,\n        disabled: loadingMore,\n        children: loadingMore ? \"Loading...\" : \"Load more products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AmazonRelatedProducts, \"ax6EU4CLJZimiK5uRYbVIYBbaNU=\");\n\n_c5 = AmazonRelatedProducts;\n\nfunction AmazonRelatedItem(_ref5) {\n  var item = _ref5.item;\n\n  if (!item.detail_page_url) {\n    // Later in 2020, this can be replaced with just `return null`\n    return old__AmazonRelatedItem({\n      item: item\n    });\n  }\n\n  var productTypeInfo = item.product_group;\n\n  if (productTypeInfo && item.binding && productTypeInfo !== item.binding) {\n    productTypeInfo += \", \".concat(item.binding);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"media amazon-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-left media-top\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: item.detail_page_url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"media-object\",\n          loading: \"lazy\",\n          src: item.image_small || item.image_medium,\n          alt: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"media-heading\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: item.detail_page_url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), item.contributor && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"By \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: item.contributor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [item.price && /*#__PURE__*/_jsxDEV(\"b\", {\n          className: \"price\",\n          children: item.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 26\n        }, this), productTypeInfo, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), item.release_date && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Release date: \", item.release_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n}\n\n_c6 = AmazonRelatedItem;\n\nfunction old__AmazonRelatedItem(_ref6) {\n  var item = _ref6.item;\n  var productTypeInfo = item.ItemAttributes.ProductGroup;\n\n  if (productTypeInfo && item.ItemAttributes.Binding && productTypeInfo !== item.ItemAttributes.Binding) {\n    productTypeInfo += \", \".concat(item.ItemAttributes.Binding);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"media amazon-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-left media-top\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: item.URL,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"media-object\",\n          src: item.SmallImage,\n          alt: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"media-heading\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: item.URL,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: item.Title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), item.Creator && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"By \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: item.Creator\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [item.ItemAttributes.ListPrice && /*#__PURE__*/_jsxDEV(\"b\", {\n          className: \"price\",\n          children: item.ItemAttributes.ListPrice.FormattedPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), productTypeInfo]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n} // export function Affiliates({ song }) {\n//   console.log(\"IS THIS STILL USED?!??!?!?!?!\");\n//   // const [amazon, setAmazon] = React.useState(null);\n//   const [itunes, setItunes] = React.useState(null);\n//   useEffect(() => {\n//     let dismounted = false;\n//     const url = `/api/song/${song.id}/affiliate/itunes`;\n//     cachedFetch(url).then((response) => {\n//       if (response.ok) {\n//         if (dismounted) {\n//           return;\n//         }\n//         response.json().then((results) => {\n//           if (\n//             results.itunes &&\n//             results.itunes.matches &&\n//             results.itunes.matches.length\n//           ) {\n//             setItunes(results.itunes);\n//           }\n//         });\n//       } else {\n//         console.warn(response);\n//       }\n//     });\n//     return () => {\n//       dismounted = true;\n//     };\n//   }, [song]);\n//   if (isServer) {\n//     return null;\n//   }\n//   return (\n//     <>\n//       {/* XXX This causes a double-render even though 'song' hasn't changed!! */}\n//       <AmazonRelatedProducts song={song} />\n//       <ITunesBadge itunes={itunes} />\n//     </>\n//   );\n// }\n// const ITunesBadge = React.memo(({ itunes }) => {\n//   if (!itunes) {\n//     return null;\n//   }\n//   if (!itunes.matches.length) {\n//     return null;\n//   }\n//   const first = itunes.matches[0];\n//   const trackURL = `${first.trackViewUrl}&at=${itunes.token}`;\n//   const trackLink = (\n//     <p>\n//       <a href={trackURL}>\n//         <b>{first.trackName}</b>\n//         {\" by \"}\n//         <b>{first.artistName}</b>\n//         {first.trackPrice &&\n//           first.trackPrice > 0.0 &&\n//           ` ($${first.trackPrice})`}\n//       </a>\n//     </p>\n//   );\n//   const trackIcon = (\n//     <p style={{ float: \"left\", marginBottom: 15 }}>\n//       <a href={trackURL} className=\"app-icon\" title={first.trackName}>\n//         <img src={itunesAppImage} alt=\"iTunes\" />\n//       </a>\n//     </p>\n//   );\n//   let albumLink = null;\n//   if (first.collectionName) {\n//     const collectionURL = `${first.collectionViewUrl}&at=${itunes.token}`;\n//     albumLink = (\n//       <p>\n//         <a href={collectionURL}>\n//           On album <b>{first.collectionName}</b>\n//           {first.collectionPrice &&\n//             first.collectionPrice > 0 &&\n//             ` ($${first.collectionPrice})`}\n//         </a>\n//       </p>\n//     );\n//   }\n//   let preview = null;\n//   if (first.previewUrl) {\n//     preview = (\n//       <div style={{ clear: \"left\", textAlign: \"center\" }}>\n//         <b>iTunes</b> Preview\n//         <br />\n//         <audio controls preload=\"none\" src={first.previewUrl} />\n//       </div>\n//     );\n//   }\n//   return (\n//     <div style={{ marginTop: 30, marginBottom: 20 }}>\n//       <h4>On Apple iTunes</h4>\n//       {trackIcon}\n//       {trackLink}\n//       {albumLink}\n//       {preview}\n//     </div>\n//   );\n// });\n\n\nexport function SpotifySnippet(_ref7) {\n  _s2();\n\n  var song = _ref7.song,\n      _ref7$compact = _ref7.compact,\n      compact = _ref7$compact === void 0 ? true : _ref7$compact;\n\n  var _useSWR = useSWR(\"/api/song/\".concat(song.id, \"/spotify\"), /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n      var r;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(url);\n\n            case 2:\n              r = _context.sent;\n\n              if (r.ok) {\n                _context.next = 6;\n                break;\n              }\n\n              if (process.env.NODE_ENV === \"development\") {\n                console.warn(\"\".concat(r.status, \" on \").concat(url));\n              }\n\n              throw new Error(\"\".concat(r.status, \" on \").concat(url));\n\n            case 6:\n              _context.next = 8;\n              return r.json();\n\n            case 8:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref8.apply(this, arguments);\n    };\n  }(), {\n    revalidateOnFocus: false\n  }),\n      data = _useSWR.data;\n\n  if (!data) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spotify\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"On Spotify\\u2122\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: data.embed_url,\n        width: \"300\",\n        height: compact ? 80 : 380,\n        frameBorder: \"0\",\n        allowtransparency: \"true\",\n        allow: \"encrypted-media\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(SpotifySnippet, \"Bw9uScf/xQBWZKhLCWSR33xISM4=\", false, function () {\n  return [useSWR];\n});\n\n_c7 = SpotifySnippet;\nexport var YouTubeSnippet = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(YouTubeSnippet, _React$PureComponent);\n\n  var _super = _createSuper(YouTubeSnippet);\n\n  function YouTubeSnippet() {\n    var _this3;\n\n    _classCallCheck(this, YouTubeSnippet);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this3 = _super.call.apply(_super, [this].concat(args));\n    _this3.state = {\n      snippet: null,\n      searched: false,\n      clicked: false\n    };\n\n    _this3.onClickThumbnail = function (event) {\n      event.preventDefault();\n\n      _this3.setState({\n        clicked: true\n      });\n    };\n\n    return _this3;\n  }\n\n  _createClass(YouTubeSnippet, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var id = this.props.song.id;\n      var url = \"/api/song/\".concat(id, \"/youtube\");\n      return cachedFetch(url).then(function (r) {\n        if (_this4.dismounted) {\n          return;\n        }\n\n        if (r.status !== 200) {\n          console.warn(r.status, \"loading\", url);\n        } else {\n          r.json().then(function (response) {\n            if (response.snippet) {\n              _this4.setState({\n                snippet: response.snippet,\n                searched: true\n              });\n            } else {\n              _this4.setState({\n                searched: true\n              });\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.dismounted = true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          clicked = _this$state.clicked,\n          snippet = _this$state.snippet;\n\n      if (isServer || snippet === null) {\n        return null;\n      }\n\n      var media;\n      var videoId = snippet.videoId;\n      var href = \"https://www.youtube.com/watch?v=\".concat(videoId);\n\n      if (clicked) {\n        // const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0&amp;showinfo=0`\n        var src = \"https://www.youtube-nocookie.com/embed/\".concat(videoId, \"?rel=0\");\n        var width = 335;\n        var height = 178; // =335/(16/9)\n\n        var containerDiv = document.querySelector(\"div.result\");\n\n        if (containerDiv && containerDiv.offsetWidth > 335) {\n          width = 560;\n          height = 315;\n        }\n\n        media = /*#__PURE__*/_jsxDEV(\"iframe\", {\n          width: width,\n          height: height,\n          title: snippet.title || \"YouTube Snippet\",\n          src: src,\n          frameBorder: 0,\n          allow: \"autoplay; encrypted-media\",\n          allowFullScreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 9\n        }, this);\n      } else {\n        var thumbnail = snippet.thumbnails.medium;\n\n        var _containerDiv = document.querySelector(\"div.result\");\n\n        if (_containerDiv && _containerDiv.offsetWidth > 335) {\n          thumbnail = snippet.thumbnails.high;\n        }\n\n        media = /*#__PURE__*/_jsxDEV(\"a\", {\n          href: href,\n          onClick: this.onClickThumbnail,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: thumbnail.url,\n            width: thumbnail.width,\n            height: thumbnail.height,\n            title: \"Click to load video\",\n            alt: \"Video thumbnail\",\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 9\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"youtube\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"YouTube\\u2122\", \" \", !clicked ? /*#__PURE__*/_jsxDEV(\"small\", {\n            onClick: this.onClickThumbnail,\n            children: \"Click to load\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [media, /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: href,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: \"Watch on YouTube\\u2122\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return YouTubeSnippet;\n}(React.PureComponent);\nexport function IntersectionLazy(_ref9) {\n  _s3();\n\n  var render = _ref9.render;\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      entered = _useState8[0],\n      setEntered = _useState8[1];\n\n  function onEnter() {\n    setEntered(true);\n  }\n\n  if (entered) {\n    return render(); // return <YouTubeSnippet song={song} />;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Waypoint, {\n    onEnter: onEnter\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 485,\n    columnNumber: 10\n  }, this);\n} // export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n\n_s3(IntersectionLazy, \"ZWFvFDZaFlODZYwGUMXg7XIOPyM=\");\n\n_c8 = IntersectionLazy;\nexport function loadCarbonScript() {\n  var carbonParent = document.getElementById(\"carbonadsouter\");\n\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      var script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src = \"https://cdn.carbonads.com/carbon.js?serve=CK7DCK7W&placement=songsearch\";\n      script.async = true;\n      carbonParent.appendChild(script);\n    }\n  }\n}\nexport function loadAdsenseScript() {\n  var carbonParent = document.getElementById(\"carbonadsouter\");\n\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      var script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src = \"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";\n      script.async = true;\n      script.setAttribute('data-ad-client', 'ca-pub-8561605615946624');\n      carbonParent.appendChild(script);\n    }\n  }\n}\nexport function loadAmplifiedScript(_ref10) {\n  var song = _ref10.song,\n      artist = _ref10.artist;\n  var parent = document.getElementById(\"amplifiedouter\");\n\n  if (parent) {\n    if (!parent.querySelector(\"script\")) {\n      window.amplified = window.amplified || {\n        init: []\n      };\n      window.amplified.init.push(function () {\n        amplified.setParams({\n          artist: artist,\n          song: song\n        });\n        amplified.pushAdUnit(100003500);\n        amplified.run();\n      });\n      var script = document.createElement(\"script\");\n      script.id = \"_amplified_js\";\n      script.src = \"https://srv.clickfuse.com/ads/ads.js\";\n      script.async = true;\n      parent.appendChild(script);\n    }\n  }\n}\nexport var RenderParagraphs = /*#__PURE__*/React.memo(_c9 = function _c9(_ref11) {\n  var text = _ref11.text;\n  return /*#__PURE__*/_jsxDEV(\"blockquote\", {\n    dangerouslySetInnerHTML: {\n      __html: text\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 562,\n    columnNumber: 10\n  }, _this);\n});\n_c10 = RenderParagraphs;\nexport function CustomTimeAgo(props) {\n  return /*#__PURE__*/_jsxDEV(TimeAgo // Since the smallest granularity is 1 min, no point making the\n  // setInterval any smaller than this.\n  , _objectSpread({\n    minPeriod: 60,\n    formatter: function formatter(value, unit, suffix, epochSeconds, nextFormatter) {\n      if (unit === \"second\") {\n        return \"seconds ago\";\n      }\n\n      return nextFormatter(value, unit, suffix, epochSeconds);\n    }\n  }, props), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 567,\n    columnNumber: 5\n  }, this);\n}\n_c11 = CustomTimeAgo;\nexport function ServerError() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"not-found\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Server Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"Skull\",\n        src: skullImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Most likely a \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"temporary problem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 23\n      }, this), \" which will go away if you\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"reload this page soon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Back to the home page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 584,\n    columnNumber: 5\n  }, this);\n}\n_c12 = ServerError;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"SetHTMLHeaders\");\n$RefreshReg$(_c2, \"ResetHTMLHeaders\");\n$RefreshReg$(_c3, \"Loading\");\n$RefreshReg$(_c4, \"FormattedNumber\");\n$RefreshReg$(_c5, \"AmazonRelatedProducts\");\n$RefreshReg$(_c6, \"AmazonRelatedItem\");\n$RefreshReg$(_c7, \"SpotifySnippet\");\n$RefreshReg$(_c8, \"IntersectionLazy\");\n$RefreshReg$(_c9, \"RenderParagraphs$React.memo\");\n$RefreshReg$(_c10, \"RenderParagraphs\");\n$RefreshReg$(_c11, \"CustomTimeAgo\");\n$RefreshReg$(_c12, \"ServerError\");","map":{"version":3,"sources":["/home/mandeep/Downloads/Song-sorch work/site/src/Common.js"],"names":["React","useEffect","useState","Link","TimeAgo","Waypoint","useSWR","cachedFetch","PUBLIC_URL","process","env","skullImage","isServer","document","defaultHTMLHeaders","title","image","querySelector","content","SetHTMLHeaders","console","warn","ogtitle","itemtitle","img","ResetHTMLHeaders","Loading","text","FormattedNumber","value","toLocaleString","AmazonRelatedProducts","song","result","setResult","page","setPage","loadingMore","setLoadingMore","mounted","url","id","fetch","then","r","ok","json","loadMore","items","length","total","map","item","asin","ASIN","textAlign","AmazonRelatedItem","detail_page_url","old__AmazonRelatedItem","productTypeInfo","product_group","binding","image_small","image_medium","contributor","price","release_date","ItemAttributes","ProductGroup","Binding","URL","SmallImage","Title","Creator","ListPrice","FormattedPrice","SpotifySnippet","compact","NODE_ENV","status","Error","revalidateOnFocus","data","embed_url","YouTubeSnippet","state","snippet","searched","clicked","onClickThumbnail","event","preventDefault","setState","props","dismounted","response","media","videoId","href","src","width","height","containerDiv","offsetWidth","thumbnail","thumbnails","medium","high","PureComponent","IntersectionLazy","render","entered","setEntered","onEnter","loadCarbonScript","carbonParent","getElementById","script","createElement","async","appendChild","loadAdsenseScript","setAttribute","loadAmplifiedScript","artist","parent","window","amplified","init","push","setParams","pushAdUnit","run","RenderParagraphs","memo","__html","CustomTimeAgo","unit","suffix","epochSeconds","nextFormatter","ServerError"],"mappings":"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AAA,SAAS,EAAC,YAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,eAAd;AAAA,+BACE;AAAG,UAAA,IAAI,EAAEnB,IAAI,CAACkB,GAAd;AAAmB,UAAA,MAAM,EAAC,QAA1B;AAAmC,UAAA,GAAG,EAAC,qBAAvC;AAAA,oBACGlB,IAAI,CAACoB;AADR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,EAMGpB,IAAI,CAACqB,OAAL,iBACC;AAAA,uCACK;AAAA,oBAAIrB,IAAI,CAACqB;AAAT;AAAA;AAAA;AAAA;AAAA,gBADL;AAAA;AAAA;AAAA;AAAA;AAAA,cAPJ,eAWE;AAAA,mBACGrB,IAAI,CAACe,cAAL,CAAoBO,SAApB,iBACC;AAAG,UAAA,SAAS,EAAC,OAAb;AAAA,oBACGtB,IAAI,CAACe,cAAL,CAAoBO,SAApB,CAA8BC;AADjC;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAMGhB,eANH;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF;AAAA;AAAA;AAAA;AAAA;AAAA,YANF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6BD,C,CAED;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,OAAO,SAASiB,cAAT,QAAkD;AAAA;;AAAA,MAAxB5C,IAAwB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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport TimeAgo from \"react-timeago\";\nimport { Waypoint } from \"react-waypoint\";\nimport useSWR from \"swr\";\n\nimport { cachedFetch } from \"./Cache\";\n\nconst PUBLIC_URL = process.env.PUBLIC_URL || \"\";\n// const itunesAppImage = PUBLIC_URL + \"/static/itunes-app-icon.png\";\nconst skullImage = PUBLIC_URL + \"/static/skull.png\";\n\nexport const isServer = typeof document === \"undefined\";\n\nconst defaultHTMLHeaders = {\n  title: \"Song Search - Find Songs by Lyrics\",\n  image: isServer\n    ? null\n    : document.querySelector('meta[itemprop=\"image\"]').content\n};\n\nexport const SetHTMLHeaders = function ({ title, image = null }) {\n  if (isServer) {\n    console.warn(\"SetHTMLHeaders should not be called in server mode\");\n    return;\n  }\n  /* Only set when it's different */\n  if (title !== document.title) {\n    document.title = title;\n  }\n  let ogtitle = document.querySelector('meta[property=\"og:title\"]');\n  if (ogtitle.content !== title) {\n    ogtitle.content = title;\n  }\n\n  let itemtitle = document.querySelector('meta[itemprop=\"name\"]');\n  if (itemtitle !== title) {\n    itemtitle.content = title;\n  }\n  let img = document.querySelector('meta[itemprop=\"image\"]');\n  if (img.content !== image) {\n    img.content = image;\n  }\n};\n\nexport const ResetHTMLHeaders = function () {\n  SetHTMLHeaders(defaultHTMLHeaders);\n};\n\nexport const Loading = ({ text }) => {\n  return (\n    <div className=\"loading\" title={text}>\n      <div className=\"cssload-wrapper\">\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n        <div className=\"cssload-square\" />\n      </div>\n      <p>{text}</p>\n    </div>\n  );\n};\n\nexport function FormattedNumber({ value }) {\n  return value.toLocaleString();\n}\n\nexport function AmazonRelatedProducts({ song }) {\n  const [result, setResult] = useState(null);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n\n  useEffect(() => {\n    if (page > 1) {\n      setLoadingMore(true);\n    }\n  }, [page]);\n\n  useEffect(() => {\n    let mounted = true;\n    let url = `/api/song/${song.id}/amazon?v=5`;\n    if (page > 1) {\n      url += `&page=${page}`;\n    }\n    fetch(url).then((r) => {\n      if (!mounted) return;\n      if (r.ok) {\n        r.json().then((result) => {\n          setResult(result);\n          setLoadingMore(false);\n        });\n      }\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [song, page]);\n\n  function loadMore() {\n    setPage(page + 1);\n  }\n\n  if (!result || !result.items.length) {\n    return null;\n  }\n  const { items, total } = result;\n  return (\n    <div className=\"amazon-related-products\">\n      <h4>Relevant on Amazon.com</h4>\n      {items.map((item) => (\n        <AmazonRelatedItem key={item.asin || item.ASIN} item={item} />\n      ))}\n      <small>As an Amazon Associate I earn from qualifying purchases.</small>\n      {total > items.length && (\n        <p style={{ textAlign: \"right\" }}>\n          <button\n            className=\"btn btn-default btn-sm\"\n            onClick={loadMore}\n            disabled={loadingMore}\n          >\n            {loadingMore ? \"Loading...\" : \"Load more products...\"}\n          </button>\n        </p>\n      )}\n    </div>\n  );\n}\n\nfunction AmazonRelatedItem({ item }) {\n  if (!item.detail_page_url) {\n    // Later in 2020, this can be replaced with just `return null`\n    return old__AmazonRelatedItem({ item });\n  }\n\n  let productTypeInfo = item.product_group;\n  if (productTypeInfo && item.binding && productTypeInfo !== item.binding) {\n    productTypeInfo += `, ${item.binding}`;\n  }\n  return (\n    <div className=\"media amazon-item\">\n      <div className=\"media-left media-top\">\n        <a\n          href={item.detail_page_url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img\n            className=\"media-object\"\n            loading=\"lazy\"\n            src={item.image_small || item.image_medium}\n            alt=\"Product\"\n          />\n        </a>\n      </div>\n      <div className=\"media-body\">\n        <h4 className=\"media-heading\">\n          <a\n            href={item.detail_page_url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {item.title}\n          </a>\n        </h4>\n        {item.contributor && (\n          <p>\n            By <b>{item.contributor}</b>\n          </p>\n        )}\n        <p>\n          {item.price && <b className=\"price\">{item.price}</b>}\n          {productTypeInfo}\n          <br />\n          {item.release_date && <span>Release date: {item.release_date}</span>}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction old__AmazonRelatedItem({ item }) {\n  let productTypeInfo = item.ItemAttributes.ProductGroup;\n  if (\n    productTypeInfo &&\n    item.ItemAttributes.Binding &&\n    productTypeInfo !== item.ItemAttributes.Binding\n  ) {\n    productTypeInfo += `, ${item.ItemAttributes.Binding}`;\n  }\n  return (\n    <div className=\"media amazon-item\">\n      <div className=\"media-left media-top\">\n        <a href={item.URL} target=\"_blank\" rel=\"noopener noreferrer\">\n          <img className=\"media-object\" src={item.SmallImage} alt=\"Product\" />\n        </a>\n      </div>\n      <div className=\"media-body\">\n        <h4 className=\"media-heading\">\n          <a href={item.URL} target=\"_blank\" rel=\"noopener noreferrer\">\n            {item.Title}\n          </a>\n        </h4>\n        {item.Creator && (\n          <p>\n            By <b>{item.Creator}</b>\n          </p>\n        )}\n        <p>\n          {item.ItemAttributes.ListPrice && (\n            <b className=\"price\">\n              {item.ItemAttributes.ListPrice.FormattedPrice}\n            </b>\n          )}\n          {productTypeInfo}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// export function Affiliates({ song }) {\n//   console.log(\"IS THIS STILL USED?!??!?!?!?!\");\n//   // const [amazon, setAmazon] = React.useState(null);\n//   const [itunes, setItunes] = React.useState(null);\n\n//   useEffect(() => {\n//     let dismounted = false;\n//     const url = `/api/song/${song.id}/affiliate/itunes`;\n//     cachedFetch(url).then((response) => {\n//       if (response.ok) {\n//         if (dismounted) {\n//           return;\n//         }\n//         response.json().then((results) => {\n//           if (\n//             results.itunes &&\n//             results.itunes.matches &&\n//             results.itunes.matches.length\n//           ) {\n//             setItunes(results.itunes);\n//           }\n//         });\n//       } else {\n//         console.warn(response);\n//       }\n//     });\n//     return () => {\n//       dismounted = true;\n//     };\n//   }, [song]);\n\n//   if (isServer) {\n//     return null;\n//   }\n//   return (\n//     <>\n//       {/* XXX This causes a double-render even though 'song' hasn't changed!! */}\n//       <AmazonRelatedProducts song={song} />\n//       <ITunesBadge itunes={itunes} />\n//     </>\n//   );\n// }\n\n// const ITunesBadge = React.memo(({ itunes }) => {\n//   if (!itunes) {\n//     return null;\n//   }\n//   if (!itunes.matches.length) {\n//     return null;\n//   }\n\n//   const first = itunes.matches[0];\n//   const trackURL = `${first.trackViewUrl}&at=${itunes.token}`;\n//   const trackLink = (\n//     <p>\n//       <a href={trackURL}>\n//         <b>{first.trackName}</b>\n//         {\" by \"}\n//         <b>{first.artistName}</b>\n//         {first.trackPrice &&\n//           first.trackPrice > 0.0 &&\n//           ` ($${first.trackPrice})`}\n//       </a>\n//     </p>\n//   );\n\n//   const trackIcon = (\n//     <p style={{ float: \"left\", marginBottom: 15 }}>\n//       <a href={trackURL} className=\"app-icon\" title={first.trackName}>\n//         <img src={itunesAppImage} alt=\"iTunes\" />\n//       </a>\n//     </p>\n//   );\n\n//   let albumLink = null;\n//   if (first.collectionName) {\n//     const collectionURL = `${first.collectionViewUrl}&at=${itunes.token}`;\n//     albumLink = (\n//       <p>\n//         <a href={collectionURL}>\n//           On album <b>{first.collectionName}</b>\n//           {first.collectionPrice &&\n//             first.collectionPrice > 0 &&\n//             ` ($${first.collectionPrice})`}\n//         </a>\n//       </p>\n//     );\n//   }\n\n//   let preview = null;\n//   if (first.previewUrl) {\n//     preview = (\n//       <div style={{ clear: \"left\", textAlign: \"center\" }}>\n//         <b>iTunes</b> Preview\n//         <br />\n//         <audio controls preload=\"none\" src={first.previewUrl} />\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <div style={{ marginTop: 30, marginBottom: 20 }}>\n//       <h4>On Apple iTunes</h4>\n//       {trackIcon}\n//       {trackLink}\n//       {albumLink}\n//       {preview}\n//     </div>\n//   );\n// });\n\nexport function SpotifySnippet({ song, compact = true }) {\n  const { data } = useSWR(\n    `/api/song/${song.id}/spotify`,\n    async (url) => {\n      const r = await fetch(url);\n      if (!r.ok) {\n        if (process.env.NODE_ENV === \"development\") {\n          console.warn(`${r.status} on ${url}`);\n        }\n        throw new Error(`${r.status} on ${url}`);\n      }\n      return await r.json();\n    },\n    { revalidateOnFocus: false }\n  );\n  if (!data) {\n    return null;\n  }\n  return (\n    <div className=\"spotify\">\n      <h4>On Spotify</h4>\n      <div style={{ textAlign: \"center\" }}>\n        {/* https://developer.spotify.com/documentation/widgets/generate/embed/ */}\n        <iframe\n          src={data.embed_url}\n          width=\"300\"\n          height={compact ? 80 : 380}\n          frameBorder=\"0\"\n          allowtransparency=\"true\"\n          allow=\"encrypted-media\"\n        ></iframe>\n      </div>\n    </div>\n  );\n}\n\nexport class YouTubeSnippet extends React.PureComponent {\n  state = {\n    snippet: null,\n    searched: false,\n    clicked: false\n  };\n\n  componentDidMount() {\n    const id = this.props.song.id;\n    let url = `/api/song/${id}/youtube`;\n    return cachedFetch(url).then((r) => {\n      if (this.dismounted) {\n        return;\n      }\n      if (r.status !== 200) {\n        console.warn(r.status, \"loading\", url);\n      } else {\n        r.json().then((response) => {\n          if (response.snippet) {\n            this.setState({ snippet: response.snippet, searched: true });\n          } else {\n            this.setState({ searched: true });\n          }\n        });\n      }\n    });\n  }\n  componentWillUnmount() {\n    this.dismounted = true;\n  }\n\n  onClickThumbnail = (event) => {\n    event.preventDefault();\n    this.setState({ clicked: true });\n  };\n\n  render() {\n    const { clicked, snippet } = this.state;\n    if (isServer || snippet === null) {\n      return null;\n    }\n    let media;\n    const videoId = snippet.videoId;\n    const href = `https://www.youtube.com/watch?v=${videoId}`;\n    if (clicked) {\n      // const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0&amp;showinfo=0`\n      const src = `https://www.youtube-nocookie.com/embed/${videoId}?rel=0`;\n      let width = 335;\n      let height = 178; // =335/(16/9)\n      const containerDiv = document.querySelector(\"div.result\");\n      if (containerDiv && containerDiv.offsetWidth > 335) {\n        width = 560;\n        height = 315;\n      }\n      media = (\n        <iframe\n          width={width}\n          height={height}\n          title={snippet.title || \"YouTube Snippet\"}\n          src={src}\n          frameBorder={0}\n          allow=\"autoplay; encrypted-media\"\n          allowFullScreen\n        />\n      );\n    } else {\n      let thumbnail = snippet.thumbnails.medium;\n      const containerDiv = document.querySelector(\"div.result\");\n      if (containerDiv && containerDiv.offsetWidth > 335) {\n        thumbnail = snippet.thumbnails.high;\n      }\n      media = (\n        <a href={href} onClick={this.onClickThumbnail}>\n          <img\n            src={thumbnail.url}\n            width={thumbnail.width}\n            height={thumbnail.height}\n            title=\"Click to load video\"\n            alt=\"Video thumbnail\"\n            loading=\"lazy\"\n          />\n        </a>\n      );\n    }\n    return (\n      <div className=\"youtube\">\n        <h4>\n          YouTube{\" \"}\n          {!clicked ? (\n            <small onClick={this.onClickThumbnail}>Click to load</small>\n          ) : null}\n        </h4>\n        <div style={{ textAlign: \"center\" }}>\n          {media}\n          <p>\n            <small>\n              <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n                Watch on YouTube\n              </a>\n            </small>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function IntersectionLazy({ render }) {\n  const [entered, setEntered] = useState(false);\n  function onEnter() {\n    setEntered(true);\n  }\n  if (entered) {\n    return render();\n    // return <YouTubeSnippet song={song} />;\n  }\n  return <Waypoint onEnter={onEnter} />;\n}\n\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n\n// export function YouTubeSnippetIntersectionLazy({ song }) {\n//   const [entered, setEntered] = useState(false);\n//   function onEnter() {\n//     setEntered(true);\n//   }\n//   if (entered) {\n//     return <YouTubeSnippet song={song} />;\n//   }\n//   return <Waypoint onEnter={onEnter} />;\n// }\n\nexport function loadCarbonScript() {\n  const carbonParent = document.getElementById(\"carbonadsouter\");\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      const script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src =\n        \"https://cdn.carbonads.com/carbon.js?serve=CK7DCK7W&placement=songsearch\";\n      script.async = true;\n      carbonParent.appendChild(script);\n    }\n  }\n}\n\nexport function loadAdsenseScript() {\n  const carbonParent = document.getElementById(\"carbonadsouter\");\n  if (carbonParent) {\n    if (!carbonParent.querySelector(\"script\")) {\n      const script = document.createElement(\"script\");\n      script.id = \"_carbonads_js\";\n      script.src =\n        \"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\";\n      script.async = true;\n      script.setAttribute('data-ad-client', 'ca-pub-8561605615946624');\n      carbonParent.appendChild(script);\n    }\n  }\n}\n\nexport function loadAmplifiedScript({ song, artist }) {\n  const parent = document.getElementById(\"amplifiedouter\");\n  if (parent) {\n    if (!parent.querySelector(\"script\")) {\n      window.amplified = window.amplified || { init: [] };\n      window.amplified.init.push(() => {\n        amplified.setParams({\n          artist,\n          song\n        });\n        amplified.pushAdUnit(100003500);\n        amplified.run();\n      });\n      const script = document.createElement(\"script\");\n      script.id = \"_amplified_js\";\n      script.src = \"https://srv.clickfuse.com/ads/ads.js\";\n      script.async = true;\n      parent.appendChild(script);\n    }\n  }\n}\n\nexport const RenderParagraphs = React.memo(({ text }) => {\n  return <blockquote dangerouslySetInnerHTML={{ __html: text }} />;\n});\n\nexport function CustomTimeAgo(props) {\n  return (\n    <TimeAgo\n      // Since the smallest granularity is 1 min, no point making the\n      // setInterval any smaller than this.\n      minPeriod={60}\n      formatter={(value, unit, suffix, epochSeconds, nextFormatter) => {\n        if (unit === \"second\") {\n          return \"seconds ago\";\n        }\n        return nextFormatter(value, unit, suffix, epochSeconds);\n      }}\n      {...props}\n    />\n  );\n}\n\nexport function ServerError() {\n  return (\n    <div className=\"not-found\">\n      <h3>Server Error</h3>\n      <p>\n        <img alt=\"Skull\" src={skullImage} />\n      </p>\n      <p>\n        Most likely a <b>temporary problem</b> which will go away if you{\" \"}\n        <b>reload this page soon</b>.\n      </p>\n      <p>\n        <Link to=\"/\">Back to the home page</Link>\n      </p>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}